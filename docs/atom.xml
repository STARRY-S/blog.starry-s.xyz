<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>STARRY-S' Blog</title>
  <subtitle>Morning.</subtitle>
  <icon>https://blog.starry-s.moe/images/avatar.jpg</icon>
  <link rel="self" type="application/atom+xml" href="https://blog.starry-s.moe/atom.xml" />
  
  <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/" />
  
  <updated>2021-07-15T06:27:07.000Z</updated>
  
  <id>https://blog.starry-s.moe/</id>
  
  <author>
    <name>STARRY-S</name>
    <email>hxstarrys@gmail.com</email>
  </author>
  
  <generator uri="https://github.com/AlynxZhou/hikaru-generator-feed/" version="v2.3.4">Hikaru Generator Feed</generator>
  
  
  
  
  
  <entry>
    <title>聊聊近期本站发生的事情</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/daily-2021-07-15/" />
    <id>https://blog.starry-s.moe/posts/daily-2021-07-15/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-07-15T06:27:07.000Z</published>
    
    
    <updated>2021-07-15T06:27:07.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;又到了暑期该给域名续费的时间了，然而一顿误操作把原域名给删掉了。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;p&gt;又到了暑期该给域名续费的时间了，然而一顿误操作把原域名给删掉了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
&lt;h2 id=&quot;起因&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/daily-2021-07-15/#%E8%B5%B7%E5%9B%A0&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h2&gt;
&lt;p&gt;在收到提醒我续费域名的邮件之后，我在7月3号登录 NameSilo 交了16.99美元给我的&lt;code&gt;.me&lt;/code&gt;域名续费。在缴费成功且收到付款的 invoice 邮件后，我就以为域名续费成功了然后就干别的事情去了。&lt;/p&gt;
&lt;p&gt;因为月初到9号一直有工训（工程训练），每天都要穿大一时留下的军训服到学校的工训楼那边学一些机床、电钻、机械这类的东西&lt;/p&gt;
&lt;p&gt;（容我短暂吐槽一下，真搞不懂计算机专业的为啥还要搞这个又累又耽误时间，而且有的机器岁数看着都比我还大，搞不好还会把人弄伤，尤其是运气贼好在工训的最后一天排到了普车的某老师，态度差就不说了，还让我们把苦累活全干完了）&lt;/p&gt;
&lt;p&gt;所以我没有太多时间用电脑整理博客这些东西（懒）。&lt;/p&gt;
&lt;p&gt;工训结束后有些事情需要回家一趟，然后收到了 NameSilo 发来的域名还有7天就到期的邮件。然而当时就很疑惑我几天前就已经充过钱了为啥还说我域名没有续费。&lt;/p&gt;
&lt;p&gt;到家后因为没带电脑所以用的 iPad 访问 NameSilo 打开 Billing 页面确认了一下确实是我充过钱但是域名没有被续到2022年。&lt;/p&gt;
&lt;p&gt;然后我又付了一遍16.99美元，这次确认了我的域名被成功续到了2022年。&lt;/p&gt;
&lt;p&gt;然而几天前充的16.99美元因为超过了3天的退款时间，所以我联系了客服，确定了我的域名被续到了2022年之后，把我刚刚缴的16.99美元申请退款。&lt;/p&gt;
&lt;p&gt;因为NameSilo有规定是在续费订单申请退款之后，域名也将被删除，所以一通操作之下我第一次缴费的16.99美元没退回来，域名也没了，还收了我第二次续费退款的几块钱手续费。&lt;/p&gt;
&lt;p&gt;（怪我英语不好没读懂退款的注意事项......）&lt;/p&gt;
&lt;h2 id=&quot;结果&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/daily-2021-07-15/#%E7%BB%93%E6%9E%9C&quot; title=&quot;结果&quot;&gt;&lt;/a&gt;结果&lt;/h2&gt;
&lt;p&gt;我知道上面的内容读起来很乱，但是这件事情还是有必要讲出来，还是解释清楚较好，不然会引起一些不必要的麻烦。&lt;/p&gt;
&lt;p&gt;所以我又不得不买了个&lt;code&gt;.moe&lt;/code&gt;域名，把我的网站全迁到新域名上。新域名就多了一个字母‘o’，意思同日语的‘萌’。&lt;/p&gt;
&lt;p&gt;因为在家那几天没有电脑，我总不能现借电脑给TF卡烧镜像然后拿树莓派更新我的博客吧，所以本站的主页在12号那天有几个小时无法访问。&lt;/p&gt;
&lt;p&gt;然后音乐播放器的链接直到今天15号更新后才恢复正常。&lt;/p&gt;
&lt;p&gt;因为&lt;code&gt;.me&lt;/code&gt;域名已经被 NameSilo 等待删除了，所以我没办法再弄个302重定向到新的域名上去，所以可能有些人不知道本站更换了新的域名。（尽管本站的访问量极少，估计没几个人看）&lt;/p&gt;
&lt;p&gt;等&lt;code&gt;.me&lt;/code&gt;域名被删除之后，如果没有被其他人抢注，我还可以购买的话，到时候看情况搞个302重定向吧。&lt;/p&gt;
&lt;p&gt;所以本站底部的访问量又要从0开始统计了。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;STARRY-S&lt;/em&gt;&lt;/p&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/tags/%E6%97%A5%E5%B8%B8/" />
    
  </entry>
  
  
  
  <entry>
    <title>《空之境界》摘抄</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/karanokyokai/" />
    <id>https://blog.starry-s.moe/posts/karanokyokai/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-07-03T13:01:37.000Z</published>
    
    
    <updated>2021-07-15T06:25:29.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;很久以前就打算二刷空境原著了，由于种种原因进展一直比较缓慢。&lt;/p&gt;
&lt;p&gt;最终在 Kindle (&lt;del&gt;泡面盖&lt;/del&gt;) 上阅读时标记了一些不错的菌言菌语，整理到博客上。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;很久以前就打算二刷空境原著了，由于种种原因进展一直比较缓慢。&lt;/p&gt;
&lt;p&gt;最终在 Kindle (&lt;del&gt;泡面盖&lt;/del&gt;) 上阅读时标记了一些不错的菌言菌语，整理到博客上。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;Oblivious&quot;,
        artist: &quot;Kalafina&quot;,
        url: &quot;https://music.starry-s.moe/music/obj_w5rDlsOJwrLDjj7CmsOj_8776653719_722d_c783_516e_072d631639c3a9e51d99be99dfae261f.m4a&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/Kalafina All Time Best 2008-2018 small.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#7c7c7c&quot;
    }]
});
&lt;/script&gt; 

&lt;h2 id=&quot;俯瞰风景&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E4%BF%AF%E7%9E%B0%E9%A3%8E%E6%99%AF&quot; title=&quot;俯瞰风景&quot;&gt;&lt;/a&gt;俯瞰风景&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;飞行这个名词，与坠落这个名词是相连结的。但越是迷恋天空的人，越会欠缺这样的认知，结果死了之后也只能持续朝云端飞行，不会往地面坠落下来，等于是朝着天空坠落。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;视野并不是眼球看到的景象，而是大脑处理过的景象。我们的视野受到我们的常识保护着，不认为自身的高度叫高，甚至觉得是种常识，没有高这个概念存在。反过来说，凡是人类，都活在俯瞰的视野中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;人是活在箱中的生物，也只能在箱中生活。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在这短暂存在的密室里，现在无论外界发生什么事都与式没有关联，也无法产生关联。这份实际感受，微微沁入她本应空虚的心。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;——如果自身的视野就是世界的一切，此刻世界的确正在沉睡。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果城市是深海，夜空就是纯粹的黑暗。在那片黑暗上，星辰就像散落的宝石那般闪闪发光。月亮是洞穴，一个凿穿夜空这张黑色图画纸的巨大洞穴。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;月亮其实不是反射太阳的镜子，只是在窥视这一侧的景色——在两仪家，式曾听人这么说过。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一头宛如以一根根丝线梳就的黑发顺滑无比，只要风势一大，黑发迎风飞舞的模样就散发出无比幽玄之美。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;刀刃有六寸长，与其说是刀更像是一柄只由白刃构成的凶器。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因为天空没有尽头。我认为如果能无拘无束的漫游、能自由飞往任何地方，就可以找到我不讨厌的世界。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;所谓的 ‘逃’ 有两种，漫无目的的逃以及带有目的的逃。一般将前者称为 ‘漂浮’，后者称为 ‘飞行’。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;我们并不是根据背负的罪来选择道路，而是先选择道路再背负起自己的罪孽。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;虽然根本不值得一提，我终究认为自己最后还是应该死于从俯瞰坠落。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;无论当事人下了什么决定，自杀还是会被视为自杀来处理。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;杀人考察（前）&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E6%9D%80%E4%BA%BA%E8%80%83%E5%AF%9F%EF%BC%88%E5%89%8D%EF%BC%89&quot; title=&quot;杀人考察（前）&quot;&gt;&lt;/a&gt;杀人考察（前）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;人要无知一点比较好，黑桐。人在小时候只看得到自己，根本不会察觉别人的恶意。就算是污秽也好，当被爱的感觉转化成经验，人才能够以善意去对待他人——因为人只能展现本身已具有的情感。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;你要当心点，黑桐同学。不详的预感，会招来不详的现实&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;痛觉残留&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E7%97%9B%E8%A7%89%E6%AE%8B%E7%95%99&quot; title=&quot;痛觉残留&quot;&gt;&lt;/a&gt;痛觉残留&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;无法适应社会的人非常多，他们的存在本身却从一开始就无法适应这个社会。他们不应该存在，不，是无法存在。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;这让她很高兴。因为活下去，就等于痛苦下去。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;被排除在境界之外的人，也会被彻底剥夺其存在意义。所以，那只不过是肉块罢了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;对于想不通的事，不要强迫自己接受比较好。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因为缺乏感觉的人一样拥有身体，也能够移动自如，我们就认为他们除了没有感觉之外没什么不同。但这是错误的。没有感觉，就代表什么都接收不到喔，黑桐。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;黑桐没能赶上是吗？接下来，就看暴风雨是先抵达，还是先被制造出来。式一个人去，有可能反被打败啊，两仪。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;痛觉可是种好东西，有错的终究是伤口，不可以搞错先后顺序。我们需要痛觉，无论多么痛苦都一样。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“没有什么伤是无法痊愈的。不会痊愈的伤口不叫伤口，叫作死亡。”&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;伽蓝之洞&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E4%BC%BD%E8%93%9D%E4%B9%8B%E6%B4%9E&quot; title=&quot;伽蓝之洞&quot;&gt;&lt;/a&gt;伽蓝之洞&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;“没错，你无法过着正常生活。要烦恼也该有个限度，两仪式，你该认清现实了。你原本就是属于我们这边的人吧？ 所以——别再梦想什么普通（幸福）的生活了。”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;这女的——真是专挑我逃避的问题刺人痛楚。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;矛盾螺旋&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E7%9F%9B%E7%9B%BE%E8%9E%BA%E6%97%8B&quot; title=&quot;矛盾螺旋&quot;&gt;&lt;/a&gt;矛盾螺旋&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;所谓的变成大人，就是明智的将幻想取代。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;追求社会上理所当然的生活就得遭受打击。只要接受我的人生注定如此，就不会觉得自己不幸。这和小时候一样。我以聪明代替幻想，决定一个人活下去。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;这家伙以前曾说心是看不见的。因此，她绝不会对别人吐露肉眼看不见的烦恼。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;忍耐明明是你的优点，结果你却选择了痛苦的那条路。第一次见面的时候，胭条巴正要抹杀胭条巴。失去未来，变成空壳的你，也跟现在一样想死是吗？&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;或许，她就是将如暗处鲜花般优美的日本幽灵，与外国童话中的妖精融合而成的结晶。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“和他们结识，算是我在伦敦时唯一的疏忽吧。”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;灵长已经变得太复杂，是过度追求万能，替生命附加种种能力导致的结果。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;朦胧不定的东西会召唤朦胧不定的言语。事情明明这么简单，方才的平稳气息却已散去，让人难以呼吸。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;由于没有任何一点小的异常，所以也就注意不到大的异常。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;若不在人们身上使用相同的仪式死亡，给你的献祭便不完全。如果死亡之后再次复活的螺旋不完全。没有达到相互交缠且相克的条件，便无法将其联系起来。于是我便准备了他们的尸体作为阴，他们平常的生活作为阳。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;死者与生者无法兼容。在满是矛盾的这个世界中，个体是没有共通这层意义的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第一次脱离了死的困境，但那只不过是为了迎接第二次、第三次的死所注定的方法。这种有限的死的方式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;为了消除现象而引起的现象，最终会变成将自己向绝境逼迫的行为。但是果然，即使留下最初的现象不管，也会演变成被逼迫至绝境的情形。无论怎样努力，现象这个词的含义是不会消失的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;由于事物总是连带有许多阻碍，所以并不存在完美的事物。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“学问和年龄无关，柯尼勒斯，虽然你外表看起来很年轻，但你总是只注意外表，所以内在才会追不上啊。”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;让一个人了解事物，与其教他，不如让他自己体验来得快。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生命的证据不是如何去追求快乐，因为生命的意义，就是要去体会痛苦。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;但那也是不可能的，扭曲的轮回不会在同一个地方转动，若死者不能亲自结束身为死者的存在，日常生活永远不会到来。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;忘却录音&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E5%BF%98%E5%8D%B4%E5%BD%95%E9%9F%B3&quot; title=&quot;忘却录音&quot;&gt;&lt;/a&gt;忘却录音&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;事情就是因为有尽头，所以才能观测到无限这件事。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在确认自己的记忆时，不可以依靠他人的记忆。毕竟只有名为回忆的自我天平，才能决定过去......&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;所谓的忘记，其实是记忆劣化。回忆是一种不会消失、只会逐渐褪色的废弃物。你不觉得很可惜吗？人们竟然让属于永恒的事物生锈。亲手让身为永恒的事物化为烟尘。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;污秽由污秽自己解决是最好的作法，因为不管是什么人，想要清除污秽，就一定会受到污秽沾染，这是一个不详的循环，我们称之为 ‘诅咒’。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;所谓的天才，到最后只是把自己当成对手。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;妖精很难控制，操纵者常常在不知不觉间，从实现他们自己的愿望变成实现妖精的愿望。鲜花你听清楚了，要注意——使用自己以外的东西所制造出来的使魔，别走到操纵者反被操纵的下场&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;我的能力只能从别人已经走过的道路来获得信息，但你却可以看到接下来的路通往哪里呢......&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;人之所以选择忘却记忆，绝不是因为那些记忆没有必要，而是因为记住那些事很危险。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;我们刻意忘却过去犯下的种种过错。忘却那些如果记得就会让自己崩溃的记忆。我们靠着这么做——才能守护自己现在是健康而无辜的幻象。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“物质是用来消费及磨耗的事物，这个名为地球的世界逐渐走向崩坏也是自然的道理，因为在最后走向死亡是最正确的存在方式，所以谁也不会去解决这个问题。对我们来说，真正的世界只存在于各自的脑髓中而已。”&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;杀人考察（后）&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E6%9D%80%E4%BA%BA%E8%80%83%E5%AF%9F%EF%BC%88%E5%90%8E%EF%BC%89&quot; title=&quot;杀人考察（后）&quot;&gt;&lt;/a&gt;杀人考察（后）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;本能在表层意识具现化成人格时，将会驱逐所有理性，会凌驾我这个名为白纯里绪的人格。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;向对方抱有的情感，超出自己的容许量的时候吧，自己能承受的感情量是一定的，有些人容量很大，也有人容量很小，不论是爱情或者是憎恨，当那种感情超过自己所能容纳的量，那么超出的部分会转变为痛苦，如此一来，便不能忍受对方的存在。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;为了到最后让自己死去，所以我们只有杀一次人的权利。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;人一辈子只能承受一人份的人生价值，为了原谅无法走到尽头的人生，所以大家才会用尊重的态度看待死亡，因为生命等价，即使是自己的生命，也不是自己所拥有的东西。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;光是孕育意识的大脑，无法产生人格。虽然只有脑部也可以活下去，但我们必须先拥有肉体才能产生自我意识。有了肉体之后，和肉体一起培养，就有了现在的人格。喜爱自己肉体的人，应该属于社交型人格，而厌恶自己肉体的人，则属于内向型人格。虽然光有意识也可以培养出人格，但那样的人格是无法认识自己的，一般来说，心灵就会长成特别的东西。那样的话，已经不能称之为人格，和计算机没有什么不同。如果有谁只是一个大脑，那个人就必须创造出一个 ‘只有脑的自己’ 的人格。必须舍弃肉体这个大我，而保存意识这个小我。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“不是有了知性才有肉体。”&lt;/p&gt;
&lt;p&gt;“而是，有了肉体之后，知性才得以诞生。”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;说到底，人类只不过是在自己这个空壳中做着梦而已。明明是那么地显而易见的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;大部分的人并不是出于自己的愿望要过那样的生活。想要成为特别的存在却无法实现，这种形式才是真正的平凡人生。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;未来福音&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/karanokyokai/#%E6%9C%AA%E6%9D%A5%E7%A6%8F%E9%9F%B3&quot; title=&quot;未来福音&quot;&gt;&lt;/a&gt;未来福音&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;她擅长的并非预测未来，而是教人如何避免遭遇到不幸。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;那是一种希望，希望对方相信她说的话。也是一种绝望，绝望于对方不可能相信。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;所谓的现实，即为数值尚未确定的公式。公式的数值会不断变动，不用说是求出答案，人们连要求出什么都不知道。然而——一旦这个数值确定下来，答案便再也不会改变。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;这一切都是醒着的，但没有什么活着的样子。没有任何例外。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“就是因为知道得太清楚，才会看不见吗——橙子说得对极了。炸弹魔，你有没有听到？既然你的眼睛什么都没看见，不如废了算了。”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“未来并没有不同。‘未来’这种东西，一开始便不存在。不存在的东西，当然没有办法控制。”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;她依然是老样子，即使自己遇到不幸，也没有显露出来，仍旧表现得潇洒又懒惰，完全就是时下高中女生会有的样子。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“没错。那顶多算是憧憬。你就像个看到偶像，拼命叫个不停的幸福小粉丝。所谓的恋爱啊，应该要更轰轰烈烈、更不堪回首、更捉摸不定，如同不是抵达终点，便是发生意外的云霄飞车。总之啊，谈恋爱不可能留下什么美好回忆......”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“我漂亮地踩到地雷。”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;既然我可以用未来视取巧，相对地当然要承担一些代价。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;不论谁看见她，都会期待她未来的发展，另一方面，又暗暗希望她永远维持现在的样子&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在这个时代，幸福的未来相当罕见。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;既然看得见未来，当然也会了解过去。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;这十年——不，说得更正确，是十二年来，我始终像故事中模仿人类的机器人，融入这个城市的生活罢了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;我遇见难得的朋友，之后又失去他。尽管试着承续他的衣钵，却每天被唯一的读者批评。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;尽管我也为此付出代价，往后的人生满是失败。但我至少还留有什么。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;“你很快会从这个世界上消失。你的前途一片漆黑，未来完全没有任何希望。你不会留下任何东西，也没有获救的可能......但是，太不可思议了，尽管如此，你的梦想将继续活下去。”&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    <category term="阅读" label="阅读" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/%E9%98%85%E8%AF%BB/" />
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/tags/%E6%97%A5%E5%B8%B8/" />
    
    <category term="空之境界" label="空之境界" scheme="https://blog.starry-s.moe/tags/%E7%A9%BA%E4%B9%8B%E5%A2%83%E7%95%8C/" />
    
    <category term="摘抄" label="摘抄" scheme="https://blog.starry-s.moe/tags/%E6%91%98%E6%8A%84/" />
    
  </entry>
  
  
  
  <entry>
    <title>Learn OpenGL</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/learn_opengl/" />
    <id>https://blog.starry-s.moe/posts/learn_opengl/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-05-10T13:33:10.000Z</published>
    
    
    <updated>2021-05-11T10:03:39.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;其实咱很久很久以前就开始看&lt;a href=&quot;https://learnopengl-cn.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;LearnOpenGL CN&lt;/a&gt;这个网站了......&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;其实咱很久很久以前就开始看&lt;a href=&quot;https://learnopengl-cn.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;LearnOpenGL CN&lt;/a&gt;这个网站了......&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
&lt;!-- obj_w5rDlsOJwrLDjj7CmsOj_8776656540_d358_942f_cb9c_b29cfa734f2c6c5f95938d794ce3d90e.mov --&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;One Light&quot;,
        artist: &quot;Kalafina&quot;,
        url: &quot;https://music.starry-s.moe/music/obj_w5rDlsOJwrLDjj7CmsOj_8776656540_d358_942f_cb9c_b29cfa734f2c6c5f95938d794ce3d90e.mov&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/Kalafina All Time Best 2008-2018 small.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#484444&quot;
    }]
});
&lt;/script&gt; 

&lt;h2 id=&quot;前言&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E5%89%8D%E8%A8%80&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;
&lt;p&gt;首先需要明白什么是核心模式，什么是立即渲染模式，立即渲染模式的代码中都包含&lt;code&gt;glBegin()&lt;/code&gt;和&lt;code&gt;glEnd()&lt;/code&gt;，绘图的部分都是在这两个函数之间，比如画一个点就是&lt;code&gt;glVertex2f(x, y)&lt;/code&gt;，这种方式画图确实很简单，用户只要提供坐标和颜色就好了，不用知道GPU干了什么，而缺点是性能低，有很多限制，所以新版本的OpenGL为了给开发者提供更多的可操作空间而逐渐废弃了立即渲染改用核心模式。&lt;/p&gt;
&lt;p&gt;核心模式提供了很多强大的功能，可以管线编程，代码量增加了很多，所以对初学者不太友好。&lt;/p&gt;
&lt;p&gt;LearnOpenGL CN上面的代码基于C++，而OpenGL是用C编写的，教程上的代码除了矩阵运算部分可以使用C++的运算符重载而使代码编写起来变得更简单一些外，其他部分基本没啥区别，而且教程为了便于教学使用的也是面向过程式编程，没有将各个功能封装到一个类里面，所以咱这篇教程用C编写。&lt;/p&gt;
&lt;p&gt;要记住C就是C，C++就是C++，C不是C++的子集，只能说C++兼容部分C的代码，不要把C和C++混用，不要因为C++支持面向对象使得一些功能看起来简单很易于使用就轻易迈入C++的坑。&lt;/p&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;
&lt;p&gt;有关OpenGL的介绍以及安装GLFW、GLAD以及编译所需的CMake的部分可以直接看&lt;a href=&quot;https://learnopengl-cn.github.io/01%20Getting%20started/02%20Creating%20a%20window/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;教程&lt;/a&gt;，咱尽可能把教程上没有提到的或者是刚开始学OpenGL很难理解的部分记录下来。&lt;/p&gt;
&lt;p&gt;大体上就是安装&lt;code&gt;glfw&lt;/code&gt;，Arch Linux使用包管理器&lt;code&gt;sudo pacman -S glfw-x11&lt;/code&gt; (如果你使用的是wayland，那么安装&lt;code&gt;glfw-wayland&lt;/code&gt;)，然后把下载的&lt;code&gt;glad/glad.h&lt;/code&gt;复制到&lt;code&gt;/usr/include&lt;/code&gt;下，把&lt;code&gt;glad.c&lt;/code&gt;复制到工程文件夹的代码目录下。&lt;/p&gt;
&lt;p&gt;为使用CMake生成Makefile，编写&lt;code&gt;CMakeLists.txt&lt;/code&gt;:&lt;/p&gt;
&lt;figure data-raw=&quot;cmake_minimum_required(VERSION 3.0)

project(
    &amp;quot;Learn OpenGL&amp;quot;
    LANGUAGES C
    VERSION 0.1.0
)

set(C_FLAGS &amp;quot;-Wall -lm -ldl -std=c11&amp;quot;)
set(CMAKE_C_FLAGS ${C_FLAGS})
set(OpenGL_GL_PREFERENCE LEGACY)

find_package(glfw3 REQUIRED)
find_package(OpenGL REQUIRED)

include_directories(${OPENGL_INCLUDE_DIR} src)

aux_source_directory(&amp;quot;src&amp;quot; GLSRC)
add_executable(main ${GLSRC})
target_link_libraries(main ${OPENGL_gl_LIBRARY} glfw)
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;cmake_minimum_required(VERSION 3.0)

project(
    &quot;Learn OpenGL&quot;
    LANGUAGES C
    VERSION 0.1.0
)

set(C_FLAGS &quot;-Wall -lm -ldl -std=c11&quot;)
set(CMAKE_C_FLAGS ${C_FLAGS})
set(OpenGL_GL_PREFERENCE LEGACY)

find_package(glfw3 REQUIRED)
find_package(OpenGL REQUIRED)

include_directories(${OPENGL_INCLUDE_DIR} src)

aux_source_directory(&quot;src&quot; GLSRC)
add_executable(main ${GLSRC})
target_link_libraries(main ${OPENGL_gl_LIBRARY} glfw)
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;完成上述步骤后，确保工程文件夹的结构如下：&lt;/p&gt;
&lt;figure data-raw=&quot;├── build/
├── CMakeLists.txt
└── src/
    ├── glad.c
    └── main.c
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;├── build/
├── CMakeLists.txt
└── src/
    ├── glad.c
    └── main.c
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;h2 id=&quot;创建窗口&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E5%88%9B%E5%BB%BA%E7%AA%97%E5%8F%A3&quot; title=&quot;创建窗口&quot;&gt;&lt;/a&gt;创建窗口&lt;/h2&gt;
&lt;p&gt;编辑&lt;code&gt;main.c&lt;/code&gt;，加入所需的头文件&lt;/p&gt;
&lt;figure data-raw=&quot;// glad.h要加在glfw3.h之前

#include &lt;glad/glad.h&gt;
#include &lt;GLFW/glfw3.h&gt;
#include &lt;stdio.h&gt;
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;// glad.h要加在glfw3.h之前

#include &amp;lt;glad/glad.h&amp;gt;
#include &amp;lt;GLFW/glfw3.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;在main函数中初始化OpenGL并创建窗口&lt;/p&gt;
&lt;figure data-raw=&quot;int main(int argc, char **argv)
{
        glfwInit();
        /* 使用OpenGL版本为3.3 */
        glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);
        glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);
        /* 使用核心模式 */
        glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

#ifdef __APPLE__
        glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
#endif

        /* 创建窗口 */
        GLFWwindow *window =
                    glfwCreateWindow(800, 600, &amp;quot;Hello World&amp;quot;, NULL, NULL);
        if (window == NULL) {
                fprintf(stderr, &amp;quot;Failed to create window.\n&amp;quot;);
                glfwTerminate();
                return -1;
        }
        glfwMakeContextCurrent(window);

        /* 初始化glad */
        if (!gladLoadGLLoader((GLADloadproc) glfwGetProcAddress))
        {
                fprintf(stderr, &amp;quot;Failed to initialize GLAD\n&amp;quot;);
                glfwTerminate();
                return -1;
        }

        /* prepare render */

        /* main loop */

        glfwTerminate();
        return 0;
}
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;int main(int argc, char **argv)
{
        glfwInit();
        /* 使用OpenGL版本为3.3 */
        glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);
        glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);
        /* 使用核心模式 */
        glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

#ifdef __APPLE__
        glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
#endif

        /* 创建窗口 */
        GLFWwindow *window =
                    glfwCreateWindow(800, 600, &quot;Hello World&quot;, NULL, NULL);
        if (window == NULL) {
                fprintf(stderr, &quot;Failed to create window.\n&quot;);
                glfwTerminate();
                return -1;
        }
        glfwMakeContextCurrent(window);

        /* 初始化glad */
        if (!gladLoadGLLoader((GLADloadproc) glfwGetProcAddress))
        {
                fprintf(stderr, &quot;Failed to initialize GLAD\n&quot;);
                glfwTerminate();
                return -1;
        }

        /* prepare render */

        /* main loop */

        glfwTerminate();
        return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;创建窗口的代码比较容易理解，到这里可以尝试编译一下代码检查有没有遇到什么问题，如果编译失败了可以尝试检查GLFW是否安装正确，代码哪里出现了什么问题。&lt;/p&gt;
&lt;p&gt;编译代码并运行生成的程序：&lt;/p&gt;
&lt;figure data-raw=&quot;cd build
cmake .. &amp;amp;&amp;amp; make -j8
./main
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;cd build
cmake .. &amp;amp;&amp;amp; make -j8
./main
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;如果一切正常的话，可以看到窗口一闪而过就消失了，因为到目前为止我们只创建了一个窗口，创建完成后就结束了程序，所以窗口会瞬间消失。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;准备绘图&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E5%87%86%E5%A4%87%E7%BB%98%E5%9B%BE&quot; title=&quot;准备绘图&quot;&gt;&lt;/a&gt;准备绘图&lt;/h2&gt;
&lt;p&gt;在绘制形状之前，我们需要一些准备工作比如设定视口、回调函数，创建顶点缓冲区等操作，然后在大循环中进行渲染绘制。&lt;/p&gt;
&lt;h3 id=&quot;视口&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E8%A7%86%E5%8F%A3&quot; title=&quot;视口&quot;&gt;&lt;/a&gt;视口&lt;/h3&gt;
&lt;p&gt;首先要告诉OpenGL咱的窗口尺寸是多少，以便OpenGL根据窗口大小显示数据和坐标。&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;/* prepare render */&lt;/code&gt;处添加代码：&lt;/p&gt;
&lt;figure data-raw=&quot;glViewport(0, 0, 800, 600);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;glViewport(0, 0, 800, 600);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;首先需要知道你传给OpenGL的坐标都是&lt;code&gt;-1.0&lt;/code&gt;到&lt;code&gt;1.0&lt;/code&gt;之间的数，OpenGL再将其转换成屏幕上的像素点坐标，这个过程由GPU运算所得，所以你得告诉OpenGL你的屏幕尺寸，&lt;code&gt;glViewport&lt;/code&gt;的前两个参数为&lt;code&gt;0, 0&lt;/code&gt;指的是窗口左下角的位置，这个值咱目前不需要修改。&lt;/p&gt;
&lt;h3 id=&quot;回调函数&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0&quot; title=&quot;回调函数&quot;&gt;&lt;/a&gt;回调函数&lt;/h3&gt;
&lt;p&gt;我们需要一个窗口被更改的回调函数，这样当窗口尺寸发生变化时，程序可以调用这个函数调整视口。&lt;/p&gt;
&lt;p&gt;我们还需要一个&lt;a href=&quot;https://www.glfw.org/docs/3.3/input_guide.html#input_key&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;按键回调函数&lt;/a&gt;，当用户按下键盘上的某个按键后会调用这个回调函数处理按键操作。&lt;/p&gt;
&lt;p&gt;编写函数&lt;code&gt;framebuffer_size_callback&lt;/code&gt;用来处理窗口尺寸更改:&lt;/p&gt;
&lt;figure data-raw=&quot;void framebuffer_size_callback(GLFWwindow* window, int width, int height)
{
        glViewport(0, 0, width, height);
}
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;void framebuffer_size_callback(GLFWwindow* window, int width, int height)
{
        glViewport(0, 0, width, height);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;这样当你拖拽窗口进行缩放时，窗口里的图像也会跟着窗口尺寸改变而进行缩放。&lt;/p&gt;
&lt;p&gt;编写&lt;code&gt;key_callback&lt;/code&gt;函数处理用户按键操作：&lt;/p&gt;
&lt;figure data-raw=&quot;void key_callback(GLFWwindow *window, int key, int s, int action, int m)
{
        if (key == GLFW_KEY_ESCAPE &amp;amp;&amp;amp; action == GLFW_PRESS) {
                glfwSetWindowShouldClose(window, GL_TRUE);
        }

        if (key == GLFW_KEY_Q &amp;amp;&amp;amp; action == GLFW_PRESS) {
                glfwSetWindowShouldClose(window, GL_TRUE);
        }
}
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;void key_callback(GLFWwindow *window, int key, int s, int action, int m)
{
        if (key == GLFW_KEY_ESCAPE &amp;amp;&amp;amp; action == GLFW_PRESS) {
                glfwSetWindowShouldClose(window, GL_TRUE);
        }

        if (key == GLFW_KEY_Q &amp;amp;&amp;amp; action == GLFW_PRESS) {
                glfwSetWindowShouldClose(window, GL_TRUE);
        }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;当用户按下&lt;code&gt;ESC&lt;/code&gt;或&lt;code&gt;Q&lt;/code&gt;键时，可以结束OpenGL窗口的运行。&lt;/p&gt;
&lt;p&gt;然后我们需要注册这两个回调函数，在&lt;code&gt;/* prepare render */&lt;/code&gt;处添加下面的代码:&lt;/p&gt;
&lt;figure data-raw=&quot;glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);
glfwSetKeyCallback(window, key_callback);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);
glfwSetKeyCallback(window, key_callback);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;h3 id=&quot;大循环&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E5%A4%A7%E5%BE%AA%E7%8E%AF&quot; title=&quot;大循环&quot;&gt;&lt;/a&gt;大循环&lt;/h3&gt;
&lt;p&gt;在大循环中，每循环一次代表绘制一帧画面。这里利用了双缓冲将绘制的图形放到缓存中，然后将缓存中的图形刷新到显示器上。(因为OpenGL绘图操作是逐行绘制的，如果不先将图形存到缓存中而直接显示在显示器上的话，在画面快速变动时你很可能会遇到画面撕裂，垂直不同步)&lt;/p&gt;
&lt;p&gt;大循环部分的代码长这个样子:&lt;/p&gt;
&lt;figure data-raw=&quot;while(!glfwWindowShouldClose(window))
{
        /* 清空背景色为深灰色 */
        glClearColor(0.1f, 0.1f, 0.1f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT);

        /* draw something */

        /* swap buffer */
        glfwSwapBuffers(window);
        glfwPollEvents();
}
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;while(!glfwWindowShouldClose(window))
{
        /* 清空背景色为深灰色 */
        glClearColor(0.1f, 0.1f, 0.1f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT);

        /* draw something */

        /* swap buffer */
        glfwSwapBuffers(window);
        glfwPollEvents();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;每次循环的开始需要使用&lt;code&gt;glClear&lt;/code&gt;清空屏幕，这样就不会看到上一次渲染的结果。&lt;/p&gt;
&lt;p&gt;这里我们使用&lt;code&gt;glClearColor&lt;/code&gt;设定清空屏幕的颜色为接近纯黑色的灰色。&lt;/p&gt;
&lt;p&gt;大循环每循环一次，OpenGL就渲染了一帧画面并显示在显示器上，所以你可以计算一秒钟循环的次数而估算游戏的帧率。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;因为我们使用了双缓冲，所以这时游戏的帧数被限制为等于显示的刷新帧数，
比如显示器刷新率为144帧，游戏的帧率就被锁为144，如果想解除这个限制需要改为单缓冲。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;到此为止，我们已经创建了一个游戏引擎，但是这个引擎还什么都没有做。&lt;/p&gt;
&lt;p&gt;尝试编译代码，可以看到一个黑色（深灰）的窗口，按&lt;code&gt;ESC&lt;/code&gt;或&lt;code&gt;Q&lt;/code&gt;即可结束运行。&lt;/p&gt;
&lt;!-- ![Window](images/create_window.png &quot;创建窗口&quot;) --&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
    &lt;img src=&quot;/posts/learn_opengl/images/create_window.png&quot; alt=&quot;Window&quot; title=&quot;创建窗口&quot;&gt;
&lt;/div&gt;

&lt;p&gt;如果你遇到什么问题，可以&lt;a href=&quot;/posts/learn_opengl/learn-code-1/main.c&quot;&gt;对照一下代码&lt;/a&gt;是否有问题。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;三角形&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E4%B8%89%E8%A7%92%E5%BD%A2&quot; title=&quot;三角形&quot;&gt;&lt;/a&gt;三角形&lt;/h2&gt;
&lt;p&gt;画三角形的过程很简单，首先要确定三角形的三个顶点坐标，然后告诉GPU这三个点坐标就可以了 :)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果你看不懂顶点着色器、几何着色器、片段着色器、光栅化这些难懂的知识点，那么你不必急于弄懂这个过程，等把图形绘制出来后再回来看这部分的内容。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;标准化设备坐标&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E6%A0%87%E5%87%86%E5%8C%96%E8%AE%BE%E5%A4%87%E5%9D%90%E6%A0%87&quot; title=&quot;标准化设备坐标&quot;&gt;&lt;/a&gt;标准化设备坐标&lt;/h3&gt;
&lt;p&gt;因为OpenGL的坐标为都是-1.0f到1.0f之间的数（我们先不考虑视口变换这些复杂的情形）&lt;/p&gt;
&lt;p&gt;x, y, z的坐标为-1.0f到1.0f的坐标称作标准化设备坐标，坐标原点在窗口的正中央且在窗口的表面上，往右为x正方向，往上为y正方向，往屏幕里面为z正方向（这里是左手系）。&lt;/p&gt;
&lt;p&gt;有关标准化设备坐标的介绍请看&lt;a href=&quot;https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_2&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;所以我们先声明三角形的顶点和颜色值到一个一维数组里面（用一维数组是因为顶点坐标值在内存的分布都是连续的，这样方便给GPU传坐标）。&lt;/p&gt;
&lt;figure data-raw=&quot;float vertices[] = {
    -0.5f, -0.5f, 0.0f,     // 左下角
     1.0f,  0.0f, 0.0f,     // red
     0.5f, -0.5f, 0.0f,     // 右下角
     0.0f,  1.0f, 0.0f,     // green
     0.0f,  0.5f, 0.0f,     // y轴正上方
     0.0f,  0.0f, 1.0f      // blue
};
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;float vertices[] = {
    -0.5f, -0.5f, 0.0f,     // 左下角
     1.0f,  0.0f, 0.0f,     // red
     0.5f, -0.5f, 0.0f,     // 右下角
     0.0f,  1.0f, 0.0f,     // green
     0.0f,  0.5f, 0.0f,     // y轴正上方
     0.0f,  0.0f, 1.0f      // blue
};
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;h3 id=&quot;顶点缓冲&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E9%A1%B6%E7%82%B9%E7%BC%93%E5%86%B2&quot; title=&quot;顶点缓冲&quot;&gt;&lt;/a&gt;顶点缓冲&lt;/h3&gt;
&lt;p&gt;首先我们需要创建一个顶点缓冲对象，用来存我们的顶点信息，这个对象叫“Vertex Buffer Object”（VBO），之后创建一个顶点数组对象“Vertex Array Object”（VAO），用来存我们创建的VBO。&lt;/p&gt;
&lt;p&gt;为便于理解，你可以把VBO当作为开辟了一块GPU上的显存(Buffer)，用来存顶点和颜色信息，然后VAO是一个包含多个VBO的数组(Array)。&lt;/p&gt;
&lt;p&gt;绘图时可以把VBO中存的大量顶点信息发送给GPU，因为用CPU给显卡发顶点坐标的速度慢而且没办法一次发送大量的顶点坐标，所以我们把顶点坐标存到显存中，绘图时直接访问显存即可。&lt;/p&gt;
&lt;p&gt;生成一个VBO和一个VAO的代码为：&lt;/p&gt;
&lt;figure data-raw=&quot;// VAO和VBO的ID都是非负整型
GLuint VBO, VAO;

// 生成一个VAO和一个VBO
glGenVertexArrays(1, &amp;amp;VAO);
glGenBuffers(1, &amp;amp;VBO);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;// VAO和VBO的ID都是非负整型
GLuint VBO, VAO;

// 生成一个VAO和一个VBO
glGenVertexArrays(1, &amp;amp;VAO);
glGenBuffers(1, &amp;amp;VBO);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;我们刚刚创建好了一个缓存对象，我们现在需要告诉这个缓存的数据空间大小以及数据（顶点坐标）。&lt;/p&gt;
&lt;p&gt;首先我们绑定刚创建的VAO，然后绑定VBO&lt;/p&gt;
&lt;figure data-raw=&quot;glBindVertexArray(VAO);
glBindBuffer(GL_ARRAY_BUFFER, VBO);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;glBindVertexArray(VAO);
glBindBuffer(GL_ARRAY_BUFFER, VBO);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;之后给VBO传递数组信息&lt;/p&gt;
&lt;figure data-raw=&quot;glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;第一个参数是目标缓冲的类型，我们刚刚把VBO绑定到&lt;code&gt;GL_ARRAY_BUFFER&lt;/code&gt;上了&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第二个参数是顶点信息所占的空间大小，单位是字节。三角形一共3个顶点，每个顶点有3个坐标值和3个颜色值，&lt;/p&gt;
&lt;p&gt;所以大小是&lt;code&gt;6 * 3 * sizeof(float)&lt;/code&gt;，不过我们可以直接用&lt;code&gt;sizeof(vertices)&lt;/code&gt;知道整个数组的大小。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第三个参数是数组的地址&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第四个参数告诉GL我们的顶点数据几乎不会改变，所以是&lt;code&gt;GL_STATIC_DRAW&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如果数据会被改变很多次，则为&lt;code&gt;GL_DYNAMIC_DRAW&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果数据每次绘制都会更改，则改为&lt;code&gt;GL_STREAM_DRAW&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然后我们告诉CPU我们给VBO传递的数组都是什么：&lt;/p&gt;
&lt;figure data-raw=&quot;glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*) 0);
glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*) (3 * sizeof(float)));
glEnableVertexAttribArray(0);
glEnableVertexAttribArray(1);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*) 0);
glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*) (3 * sizeof(float)));
glEnableVertexAttribArray(0);
glEnableVertexAttribArray(1);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;第一个参数为位置，告诉这个数据传递到顶点着色器的哪个位置上&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第二个参数为大小，我们定义的那个数组一个顶点有3个坐标，所以是3&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第三个参数为数据类型，这里是float。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第四个参数为false，暂时不用管他&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第五个参数为步长，一个顶点有三个坐标和三个颜色值，所以每传一个顶点，就走&lt;code&gt;6 * sizeof(float)&lt;/code&gt;的长度。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第六个参数为偏移量，因为我们定义的数组中前三个数字代表顶点坐标，后三个数字代表颜色，所以传递顶点坐标时，偏移量为0，传递颜色时偏移量为&lt;code&gt;3 * sizeof(float)&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://learnopengl-cn.github.io/img/01/05/vertex_attribute_pointer_interleaved.png&quot; alt=&quot;VBO中内存数据&quot;&gt;&lt;/p&gt;
&lt;p&gt;之后使用&lt;code&gt;glEnableVertexAttribArray&lt;/code&gt;告诉OpenGL启用顶点着色器上这个位置的数据。&lt;/p&gt;
&lt;p&gt;最后使用完VAO后要记得将其解绑：&lt;/p&gt;
&lt;figure data-raw=&quot;glBindVertexArray(0);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;glBindVertexArray(0);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;h3 id=&quot;着色器&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E7%9D%80%E8%89%B2%E5%99%A8&quot; title=&quot;着色器&quot;&gt;&lt;/a&gt;着色器&lt;/h3&gt;
&lt;p&gt;我们需要写两个着色器程序，分别为顶点着色器和片段着色器。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;开头说的核心模式可编程管线就是指我们可以写着色器程序，手动指定管线都进行什么操作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;顶点着色器&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E9%A1%B6%E7%82%B9%E7%9D%80%E8%89%B2%E5%99%A8&quot; title=&quot;顶点着色器&quot;&gt;&lt;/a&gt;顶点着色器&lt;/h4&gt;
&lt;p&gt;因为OpenGL使用的是标准化设备坐标而不是屏幕上的像素点为坐标，所以GPU需要把标准化设备坐标转换为屏幕上的像素点，这个过程由顶点着色器实现。&lt;/p&gt;
&lt;p&gt;而顶点着色器不知道咱们三角形的每个顶点的坐标是多少，所以咱们得往着色器中传我们刚才创建的VBO里面存储的坐标。&lt;/p&gt;
&lt;p&gt;着色器程序使用GLSL编写，其代码和C很像&lt;/p&gt;
&lt;p&gt;在代码文件夹中新建一个&lt;code&gt;vertex.glsl&lt;/code&gt;，编写以下代码：&lt;/p&gt;
&lt;figure data-raw=&quot;#version 330 core
layout (location = 0) in vec3 aPos;     // 传入坐标
layout (location = 1) in vec3 aColor;   // 传入颜色
out vec3 color;     // 向片段着色器发送颜色

void main()
{
    gl_Position = vec4(aPos, 1.0);
    color = aColor;
}
&quot; data-info=&quot;language-glsl&quot; data-lang=&quot;glsl&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-glsl&quot;&gt;#version 330 core
layout (location = 0) in vec3 aPos;     // 传入坐标
layout (location = 1) in vec3 aColor;   // 传入颜色
out vec3 color;     // 向片段着色器发送颜色

void main()
{
    gl_Position = vec4(aPos, 1.0);
    color = aColor;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;第一行代表我们使用OpenGL 3.3 核心模式&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第二行声明了一个类型为&lt;code&gt;vec3&lt;/code&gt;（三维坐标）的变量，该变量的位置为&lt;code&gt;0&lt;/code&gt;，需要人为的通过这个位置给他传值，这个变量代表顶点的坐标&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第三行声明的&lt;code&gt;aColor&lt;/code&gt;用来代表颜色，顶点着色器不需要处理颜色，所以我们接收到颜色值后不需要处理，直接传出去即可。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;main函数中&lt;code&gt;gl_Position&lt;/code&gt;代表这个顶点的位置坐标，我们把CPU传给顶点着色器的&lt;code&gt;vec3&lt;/code&gt;转换为&lt;code&gt;vec4&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;片段着色器&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E7%89%87%E6%AE%B5%E7%9D%80%E8%89%B2%E5%99%A8&quot; title=&quot;片段着色器&quot;&gt;&lt;/a&gt;片段着色器&lt;/h4&gt;
&lt;p&gt;顶点着色器处理完顶点后，由片段着色器计算每个像素点的颜色，所以如果我们想给三角形上色的话，也是在这个环节进行。&lt;/p&gt;
&lt;p&gt;在代码文件夹中新建一个&lt;code&gt;fragment.glsl&lt;/code&gt;&lt;/p&gt;
&lt;figure data-raw=&quot;#version 330 core
in vec3 color;    // 接收顶点着色器发送的颜色
out vec4 FragColor;

void main()
{
    FragColor = vec4(color, 1.0f);
}
&quot; data-info=&quot;language-glsl&quot; data-lang=&quot;glsl&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-glsl&quot;&gt;#version 330 core
in vec3 color;    // 接收顶点着色器发送的颜色
out vec4 FragColor;

void main()
{
    FragColor = vec4(color, 1.0f);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;第一行同顶点着色器，代表OpenGL版本为3.3 核心模式&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第二行表示接收顶点着色器发送的颜色数据到变量&lt;code&gt;color&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第三行声明了一个类型为&lt;code&gt;vec4&lt;/code&gt;(4维坐标)的变量，表示向外传递变量&lt;code&gt;FragColor&lt;/code&gt;（该像素点的颜色值）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;main函数中设定变量&lt;code&gt;FragColor&lt;/code&gt;的值等于&lt;code&gt;color&lt;/code&gt;，用来指颜色。&lt;/p&gt;
&lt;p&gt;最后一个值恒为1.0f，我们暂时不需要修改它。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;编译着色器&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E7%BC%96%E8%AF%91%E7%9D%80%E8%89%B2%E5%99%A8&quot; title=&quot;编译着色器&quot;&gt;&lt;/a&gt;编译着色器&lt;/h3&gt;
&lt;p&gt;因为我们只是写了着色器程序的代码，需要让GPU将其编译。&lt;/p&gt;
&lt;p&gt;编译着色器的部分对应的LearnOpenGL CN教程&lt;a href=&quot;https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_4&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;在这里&lt;/a&gt;，本篇不打算重复讲编译着色器部分的代码。&lt;/p&gt;
&lt;p&gt;我们可以把编译着色器的代码封装到几个函数里面，这样可以减少main函数中重复代码的数量。&lt;/p&gt;
&lt;p&gt;有关这部分的代码我推荐使用&lt;a href=&quot;https://sh.alynx.one/posts/Learn-OpenGL-1/#%E7%9D%80%E8%89%B2%E5%99%A8%EF%BC%88Shader%EF%BC%89&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;这篇文章&lt;/a&gt;中讲述的方式从文件中读取glsl代码并将其编译。&lt;/p&gt;
&lt;p&gt;最后在main函数的准备阶段处的最下面，插入以下代码，编译你的着色器程序：&lt;/p&gt;
&lt;figure data-raw=&quot;GLuint shaderProgram = load_program(&amp;quot;vertex.glsl&amp;quot;, &amp;quot;fragment.glsl&amp;quot;);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;GLuint shaderProgram = load_program(&quot;vertex.glsl&quot;, &quot;fragment.glsl&quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;h3 id=&quot;我们期待的三角形&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn_opengl/#%E6%88%91%E4%BB%AC%E6%9C%9F%E5%BE%85%E7%9A%84%E4%B8%89%E8%A7%92%E5%BD%A2&quot; title=&quot;我们期待的三角形&quot;&gt;&lt;/a&gt;我们期待的三角形&lt;/h3&gt;
&lt;p&gt;经过了前面的一番准备，我们创建了缓冲对象存顶点的坐标和颜色信息，之后编写了着色器程序处理顶点坐标和颜色。&lt;/p&gt;
&lt;p&gt;现在我们终于可以在大循环中画三角形了。&lt;/p&gt;
&lt;p&gt;在大循环的&lt;code&gt;/* draw something */&lt;/code&gt;下面添加如下代码：&lt;/p&gt;
&lt;figure data-raw=&quot;glUseProgram(shaderProgram);
glBindVertexArray(VAO);
glDrawArrays(GL_TRIANGLES, 0, 3);
glBindVertexArray(0);
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;glUseProgram(shaderProgram);
glBindVertexArray(VAO);
glDrawArrays(GL_TRIANGLES, 0, 3);
glBindVertexArray(0);
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;这串代码表示我们首先使用刚编译好的着色器程序，之后绑定VAO，绘制一个三角形，最后解绑。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;至此我们的工程文件夹结构修改如下：&lt;/p&gt;
&lt;figure data-raw=&quot;├── build/
├── CMakeLists.txt
└── src/
    ├── fragment.glsl
    ├── glad.c
    ├── main.c
    ├── shader.c
    ├── shader.h
    └── vertex.glsl
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;├── build/
├── CMakeLists.txt
└── src/
    ├── fragment.glsl
    ├── glad.c
    ├── main.c
    ├── shader.c
    ├── shader.h
    └── vertex.glsl
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;因为我们编写了&lt;code&gt;vertex.glsl&lt;/code&gt;和&lt;code&gt;fragment.glsl&lt;/code&gt;，需要修改&lt;code&gt;CMakeLists.txt&lt;/code&gt;，使得编译时将代码文件夹下的着色器文件复制到&lt;code&gt;build&lt;/code&gt;文件夹下。&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;CMakeLists.txt&lt;/code&gt;的&lt;code&gt;find_package&lt;/code&gt;下面添加如下代码：&lt;/p&gt;
&lt;figure data-raw=&quot;configure_file(src/vertex.glsl vertex.glsl COPYONLY)
configure_file(src/fragment.glsl fragment.glsl COPYONLY)
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;configure_file(src/vertex.glsl vertex.glsl COPYONLY)
configure_file(src/fragment.glsl fragment.glsl COPYONLY)
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;编译后运行程序，可以看到一个五颜六色的三角形，它的左下角为红色，右下角为绿色，顶点为蓝色。&lt;/p&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
    &lt;img src=&quot;/posts/learn_opengl/images/draw_triangle.png&quot; alt=&quot;三角形&quot; title=&quot;三角形&quot;&gt;
&lt;/div&gt;


&lt;p&gt;如果你遇到了问题，或者哪里不太明白，可以看咱写好的代码：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;/posts/learn_opengl/learn-code-2/main.c&quot;&gt;main.c&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;/posts/learn_opengl/learn-code-2/shader.h&quot;&gt;shader.h&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;/posts/learn_opengl/learn-code-2/shader.c&quot;&gt;shader.c&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;/posts/learn_opengl/learn-code-2/vertex.glsl&quot;&gt;vertex.glsl&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;/posts/learn_opengl/learn-code-2/fragment.glsl&quot;&gt;fragment.glsl&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;/posts/learn_opengl/learn-code-2/CMakeLists.txt&quot;&gt;CMakeLists.txt&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;

    </content>
    
    
    <category term="学习资料" label="学习资料" scheme="https://blog.starry-s.moe/categories/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" />
    
    <category term="OpenGL" label="OpenGL" scheme="https://blog.starry-s.moe/categories/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/OpenGL/" />
    
    
    <category term="学习资料" label="学习资料" scheme="https://blog.starry-s.moe/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" />
    
    <category term="OpenGL" label="OpenGL" scheme="https://blog.starry-s.moe/tags/OpenGL/" />
    
  </entry>
  
  
  
  <entry>
    <title>Spring - 4</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/spring-4/" />
    <id>https://blog.starry-s.moe/posts/spring-4/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-05-02T17:44:57.000Z</published>
    
    
    <updated>2021-05-02T17:44:57.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6611.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 50mm, 1/1000s, f2.8&quot;&gt;&lt;/p&gt;
&lt;p&gt;咱去年忘了更新这个系列...&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6611.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 50mm, 1/1000s, f2.8&quot;&gt;&lt;/p&gt;
&lt;p&gt;咱去年忘了更新这个系列...&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;愚カシイ机械&quot;,
        artist: &quot;岡部啓一 / 石濱翔 / 帆足圭吾 / 高田龍一&quot;,
        url: &quot;https://music.starry-s.moe/music/f47cbf8a517c72c16b5eff614cd78ace.m4a&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/2522279674184572.png&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#aa6666&quot;
    }]
});
&lt;/script&gt; 

&lt;hr&gt;
&lt;p&gt;前一阵子买了二手的适马17-50 f2.8镜头，在网上看这镜头很适合新手学摄影，而且这个焦段+大光圈适用的范围也很广。遂把在家吃灰了一年的相机带回学校，打算找时间拍点风景照片。&lt;/p&gt;
&lt;p&gt;实际上买完新镜头后我就拿它拍了几张花的照片后也没怎么出过门，本来打算5月初份去长白岛拍樱花的然而经过了五一小长假的调休，上周末的体侧，这周辽宁省又开始闹疫情，所以只好先拍点校内的风景啦。&lt;/p&gt;
&lt;p&gt;如果你想看长白岛的樱花，不妨看一下&lt;a href=&quot;/posts/spring-3/&quot;&gt;Spring - 3&lt;/a&gt;这篇文章。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;仅使用Raw Therapee和Adobe Lightroom对照片进行了裁剪并调整颜色，并由GIMP压缩&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6616.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 33mm, 1/1000s, f2.8&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6618.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 50mm, 1/1000s, f2.8&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6623.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 35mm, 1/1250s, f2.8&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;拍摄自：2021-05-18&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在大风天拍蒲公英确实是个不明智的选择。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6723.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 50mm, 1/100s, f2.8&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6726.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 50mm, 1/250s, f2.8&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6728.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 50mm, 1/320s, f2.8&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-4/images/IMG_6697.jpg&quot; alt=&quot;&quot; title=&quot;iso100, 50mm, 1/320s, f2.8&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;Spring-4&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/spring-4/#Spring-4&quot; title=&quot;Spring-4&quot;&gt;&lt;/a&gt;Spring - 4&lt;/h1&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/Spring/" />
    
    
    <category term="摄影" label="摄影" scheme="https://blog.starry-s.moe/tags/%E6%91%84%E5%BD%B1/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/tags/Spring/" />
    
    <category term="Flowers" label="Flowers" scheme="https://blog.starry-s.moe/tags/Flowers/" />
    
  </entry>
  
  
  
  <entry>
    <title>联想R7000P安装Arch Linux的常见问题</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/lenovo-r7000p/" />
    <id>https://blog.starry-s.moe/posts/lenovo-r7000p/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-03-22T11:51:32.000Z</published>
    
    
    <updated>2021-04-11T05:50:48.000Z</updated>
    
    
    <summary type="html">
      &lt;blockquote&gt;
&lt;p&gt;本篇原标题为「联想R7000P上手体验」，因为内容大多在讲安装Linux时遇到的问题及解决方法，所以把标题更改为「联想R7000P安装Arch Linux的常见问题」。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;旧电脑坏掉了，因为坏的有些复杂而且不忍心拿到学校的修理店去修于是打算等到暑假有时间自己买零部件修。（就不吐槽惠普的产品设计问题了...&lt;/p&gt;
&lt;p&gt;于是在网上逛了一会下决心再也不碰惠普了之后买了联想R7000P 2020，满血RTX 2060(这里指的是最大功耗为115W的笔记本显卡) + R7 4800H还是很香的，打守望屁股终于能稳定200+fps了。&lt;/p&gt;
&lt;p&gt;所以隔了这么久我终于更新博客了。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;blockquote&gt;
&lt;p&gt;本篇原标题为「联想R7000P上手体验」，因为内容大多在讲安装Linux时遇到的问题及解决方法，所以把标题更改为「联想R7000P安装Arch Linux的常见问题」。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;旧电脑坏掉了，因为坏的有些复杂而且不忍心拿到学校的修理店去修于是打算等到暑假有时间自己买零部件修。（就不吐槽惠普的产品设计问题了...&lt;/p&gt;
&lt;p&gt;于是在网上逛了一会下决心再也不碰惠普了之后买了联想R7000P 2020，满血RTX 2060(这里指的是最大功耗为115W的笔记本显卡) + R7 4800H还是很香的，打守望屁股终于能稳定200+fps了。&lt;/p&gt;
&lt;p&gt;所以隔了这么久我终于更新博客了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;Underground&quot;,
        artist: &quot;Lindsey Stirling&quot;,
        url: &quot;https://music.starry-s.moe/music/obj_wonDkMOGw6XDiTHCmMOi_2660462601_5de2_ff1b_7e9f_3314960c90b9d68875a3d640df5d283a.mp4&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/109951164174520818.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#CC8888&quot;
    }]
});
&lt;/script&gt; 

&lt;hr&gt;
&lt;h2 id=&quot;安装ArchLinux&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/lenovo-r7000p/#%E5%AE%89%E8%A3%85ArchLinux&quot; title=&quot;安装ArchLinux&quot;&gt;&lt;/a&gt;安装Arch Linux&lt;/h2&gt;
&lt;p&gt;到手后就把之前买的西数SN750 1T固态换到了新电脑上，顺便格式化重装了个系统。&lt;/p&gt;
&lt;p&gt;双M2插槽配上1T + 500G NVME，美汁汁。&lt;/p&gt;
&lt;p&gt;于是直接给Linux分了150G root，16G SWAP，500G HOME（有点奢侈）， 然后还分了100G用来存steam游戏，剩下的全扔给Windows。&lt;/p&gt;
&lt;p&gt;装Linux过程中只遇到了终端的警报声有些大这个问题（插耳机时声音依旧从扬声器输出），别的问题都没遇到。&lt;/p&gt;
&lt;p&gt;之前的电脑总是遇到奇葩问题，用旧版本Linux内核关机或者&lt;code&gt;lspci&lt;/code&gt;时会卡死，显卡驱动装不好会导致开机死机，声卡驱动一直有问题听歌时音量大一点就爆音，HDMI接口直连的NVIDIA显卡所以显卡驱动没配置好独显不工作时没办法外接显示器(后来才知道type c接口有DP视频输出)。&lt;/p&gt;
&lt;p&gt;新电脑买来装完系统后就遇到了一点小问题网上搜一下就解决了。&lt;/p&gt;
&lt;h3 id=&quot;屏幕亮度不能调节&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/lenovo-r7000p/#%E5%B1%8F%E5%B9%95%E4%BA%AE%E5%BA%A6%E4%B8%8D%E8%83%BD%E8%B0%83%E8%8A%82&quot; title=&quot;屏幕亮度不能调节&quot;&gt;&lt;/a&gt;屏幕亮度不能调节&lt;/h3&gt;
&lt;p&gt;&lt;del&gt;开个浏览器能把眼睛晃瞎&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;网上查了一下只有在bios设置为独显直连时解决亮度不能调节的方法，在混合显卡模式下，存在&lt;a href=&quot;https://bugzilla.opensuse.org/show_bug.cgi?id=1180749&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;AMD显卡亮度用16位值表示而不是8位值表示&lt;/a&gt;的这个BUG (Feature?)所以没办法调节亮度。&lt;/p&gt;
&lt;p&gt;所以&lt;code&gt;cat /sys/class/backlight/amdgpu_bl0/actual_brightness&lt;/code&gt;得到的是一个大于255的数。&lt;/p&gt;
&lt;p&gt;确保内核和显卡驱动都是最新的情况下，编辑内核参数&lt;code&gt;amdgpu.backlight=0&lt;/code&gt;和&lt;code&gt;acpi_backlight=vendor&lt;/code&gt;，可以解决混合模式下AMD显卡不能调节亮度这个问题。&lt;/p&gt;
&lt;p&gt;如果你经常切换混合模式和显卡直连模式的话：&lt;/p&gt;
&lt;p&gt;安装显卡驱动&lt;code&gt;xf86-video-amdgpu&lt;/code&gt;和&lt;code&gt;nvidia&lt;/code&gt;以及按需要安装nvidia的其他组件。&lt;/p&gt;
&lt;p&gt;复制&lt;code&gt;/usr/share/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf&lt;/code&gt;到&lt;code&gt;/etc/X11/xorg.conf.d/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;编辑&lt;code&gt;/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf&lt;/code&gt;在&lt;code&gt;EndSection&lt;/code&gt;前添加一行参数允许nvidia驱动调节亮度。&lt;/p&gt;
&lt;figure data-raw=&quot;Option &amp;quot;RegistryDwords&amp;quot; &amp;quot;EnableBrightnessControl=1&amp;quot;
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;Option &quot;RegistryDwords&quot; &quot;EnableBrightnessControl=1&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;之后编辑&lt;code&gt;/etc/modprobe.d/blacklist.conf&lt;/code&gt;禁用闭源驱动&lt;code&gt;nouveau&lt;/code&gt;和&lt;code&gt;ideapad_laptop&lt;/code&gt;，让显卡驱动调节亮度。&lt;/p&gt;
&lt;figure data-raw=&quot;# /etc/modprobe.d/blacklist.conf

blacklist nouveau
blacklist ideapad_laptop
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;# /etc/modprobe.d/blacklist.conf

blacklist nouveau
blacklist ideapad_laptop
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;编辑内核参数添加&lt;code&gt;acpi_backlight=vendor&lt;/code&gt;和&lt;code&gt;amdgpu.backlight=0&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;以systemd-boot为例:&lt;/p&gt;
&lt;figure data-raw=&quot;# /boot/loader/entries/arch.conf

options acpi_backlight=vendor
options amdgpu.backlight=0
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;# /boot/loader/entries/arch.conf

options acpi_backlight=vendor
options amdgpu.backlight=0
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;最后重启电脑就能调亮度了。&lt;/p&gt;
&lt;h3 id=&quot;GDM不自启动&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/lenovo-r7000p/#GDM%E4%B8%8D%E8%87%AA%E5%90%AF%E5%8A%A8&quot; title=&quot;GDM不自启动&quot;&gt;&lt;/a&gt;GDM不自启动&lt;/h3&gt;
&lt;p&gt;开机时GDM不会自动显示出来而是得手动切TTY2再切回TTY1才能显示。&lt;/p&gt;
&lt;p&gt;查Wiki得知是因为GDM在显卡驱动被加载之前就启动了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://wiki.archlinux.org/index.php/GDM#Black_screen_on_AMD_or_Intel_GPUs_when_an_NVidia_(e)GPU_is_present&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;参照Wiki&lt;/a&gt;，设置&lt;a href=&quot;https://wiki.archlinux.org/index.php/Kernel_mode_setting#Early_KMS_start&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;KMS早启动&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;编辑&lt;code&gt;/etc/mkinitcpio.conf&lt;/code&gt;&lt;/p&gt;
&lt;figure data-raw=&quot;# /etc/mkinitcpio.conf

MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm amdgpu radeon)
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;# /etc/mkinitcpio.conf

MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm amdgpu radeon)
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;如果你只使用独显直连模式的话可以去掉&lt;code&gt;amdgpu&lt;/code&gt;和&lt;code&gt;radeon&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;然后&lt;code&gt;sudo mkinitcpio -p linux&lt;/code&gt;重新生成内核镜像，之后重启。&lt;/p&gt;
&lt;p&gt;这么做会使Wayland在开机时被禁用，所以在混合模式使用AMD显卡开机时无法使用Wayland，&lt;a href=&quot;https://wiki.archlinux.org/index.php/GDM#GDM_ignores_Wayland_and_uses_X.Org_by_default&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;参见Wiki&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;将&lt;code&gt;/usr/lib/udev/rules.d/61-gdm.rules&lt;/code&gt;复制到&lt;code&gt;/etc/udev/rules.d/&lt;/code&gt;，并编辑&lt;code&gt;61-gdm.rules&lt;/code&gt;将下面这一行注释掉：&lt;/p&gt;
&lt;figure data-raw=&quot;DRIVER==&amp;quot;nvidia&amp;quot;, RUN+=&amp;quot;/usr/lib/gdm-disable-wayland&amp;quot;
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;DRIVER==&quot;nvidia&quot;, RUN+=&quot;/usr/lib/gdm-disable-wayland&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;之后重启电脑再开机&lt;code&gt;echo $XDG_SESSION_TYPE&lt;/code&gt;就可以检查现在使用的是&lt;code&gt;wayland&lt;/code&gt;了。&lt;/p&gt;
&lt;h3 id=&quot;OptimusManager&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/lenovo-r7000p/#OptimusManager&quot; title=&quot;OptimusManager&quot;&gt;&lt;/a&gt;Optimus Manager&lt;/h3&gt;
&lt;p&gt;因为独显功耗太高了，使用独显直连模式在浏览网页写文档这类的轻度工作时电池待机只能2小时，用混合模式的话能待机4.5小时，外加上我也不打那些对性能要求很高的游戏，
所以日常使用时就在Bios里设置显卡为混合模式。&lt;/p&gt;
&lt;p&gt;然后在Linux系统里安装&lt;code&gt;optimus-manager&lt;/code&gt;，修改配置为：使用电池开机时关掉NVIDIA显卡，只让AMD集显工作；有外接电源时则使用“hybrid”混合模式，如果需要玩游戏的话用&lt;a href=&quot;https://wiki.archlinux.org/index.php/PRIME#PRIME_render_offload&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;nvidia-prime&lt;/a&gt;让独显运行游戏。&lt;/p&gt;
&lt;p&gt;Optimus Manager的配置方法和之前我&lt;a href=&quot;/posts/archlinux-pavilion-gaming-laptop/&quot;&gt;之前配置旧电脑时&lt;/a&gt;讲的基本一样，唯一区别就是这电脑是AMD，旧电脑是Intel。&lt;/p&gt;
&lt;p&gt;所以编辑配置文件修改了这些地方：&lt;/p&gt;
&lt;figure data-raw=&quot;# /etc/optimus-manager/optimus-manager.conf

# 设置开机自动切换显卡模式
startup_mode=auto

# 使用电池时关掉独立显卡降低功耗
startup_auto_battery_mode=integrated

# 使用外接电源时为混合模式
startup_auto_extpower_mode=hybrid

[amd]
# 因为安装的xf86-video-amdgpu, 所以修改驱动改为amdgpu
driver=amdgpu
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;# /etc/optimus-manager/optimus-manager.conf

# 设置开机自动切换显卡模式
startup_mode=auto

# 使用电池时关掉独立显卡降低功耗
startup_auto_battery_mode=integrated

# 使用外接电源时为混合模式
startup_auto_extpower_mode=hybrid

[amd]
# 因为安装的xf86-video-amdgpu, 所以修改驱动改为amdgpu
driver=amdgpu
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;安装好&lt;code&gt;nvidia-prime&lt;/code&gt;后在混合显卡模式（hybrid）下，使用&lt;code&gt;prime-run&lt;/code&gt;让独显运行游戏。&lt;/p&gt;
&lt;p&gt;如果想让Steam以独显运行游戏，修改启动参数为&lt;code&gt;prime-run %command%&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&quot;Windows&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/lenovo-r7000p/#Windows&quot; title=&quot;Windows&quot;&gt;&lt;/a&gt;Windows&lt;/h2&gt;
&lt;p&gt;在Windows系统下显卡独连时字体渲染有些蹦，设置了ClearType之后还是没啥改善。&lt;/p&gt;
&lt;p&gt;主要是Visual Studio 2019的字体渲染真的瞎眼，最后装了Text Sharp插件换了Jet Brains字体才看起来正常了一些。&lt;/p&gt;
&lt;p&gt;最后在NVIDIA控制面板全局设置里把平滑处理全关了，字体的锯齿才消失。&lt;/p&gt;
&lt;p&gt;貌似是因为NVIDIA把文本编辑器当游戏渲染了。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Others&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/lenovo-r7000p/#Others&quot; title=&quot;Others&quot;&gt;&lt;/a&gt;Others&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在Linux系统里会遇到按Fn+Esc键时FnLock的灯没有亮这个问题，不过不影响FnLock的正常使用，所以就忽视了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果要用诱骗线充电的话，用optimus-manager把独显关掉（用&lt;code&gt;nvidia-smi&lt;/code&gt;得知独显在不使用的情况下仍有5W的功耗），然后装一个CPU功率调节的软件，例如&lt;code&gt;cpupower-gui&lt;/code&gt;&lt;sup&gt;AUR&lt;/sup&gt;，设置为节电模式，实测用小米65W GaN充电器给电脑充电，轻度使用没有卡顿掉电的情况。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因为之前趁着狗东打折加上买显示器送的100E卡，只花了两百多买了一个紫米20移动电源（&lt;del&gt;板砖&lt;/del&gt;），25000毫安且支持100WPD充电。按照上面讲的方法在电池满电的情况下一边轻度使用电脑一边充电，充电宝能用4小时左右，然后笔记本的电池还能续航4至5小时。（实在是因为原装充电器它太沉了）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;目前来看觉得这电脑还是蛮香的，AMD的CPU性能很强而且比intel版的Y7000P便宜一千块钱。尽管现在已经有二线厂商做AMD 5800系的笔记本了但是4800H的性能依旧够用，RTX3060显卡就当它是空气吧就算发售也是残血而且抢不到。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;然后就是电脑没有雷电3接口，只有一个支持USB3.2 Gen1的type c接口且支持DP1.2视频输出，不过USB接口倒是挺多的，电脑用到现在没有遇到啥AMD CPU引起的兼容性问题。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/lenovo-r7000p/images/1.jpg&quot; alt=&quot;GNOME 40&quot; title=&quot;GNOME 40&quot;&gt;&lt;/p&gt;

    </content>
    
    
    <category term="Linux" label="Linux" scheme="https://blog.starry-s.moe/categories/Linux/" />
    
    
    <category term="Arch Linux" label="Arch Linux" scheme="https://blog.starry-s.moe/tags/Arch%20Linux/" />
    
    <category term="Lenovo R7000P" label="Lenovo R7000P" scheme="https://blog.starry-s.moe/tags/Lenovo%20R7000P/" />
    
  </entry>
  
  
  
  <entry>
    <title>小米路由器3G之使用TTL串口刷机救砖</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/xiaomi-r3g-ttl-flash/" />
    <id>https://blog.starry-s.moe/posts/xiaomi-r3g-ttl-flash/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-01-22T14:10:01.000Z</published>
    
    
    <updated>2021-01-22T14:10:01.000Z</updated>
    
    
    <summary type="html">
      &lt;h2 id=&quot;砖了&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi-r3g-ttl-flash/#%E7%A0%96%E4%BA%86&quot; title=&quot;砖了&quot;&gt;&lt;/a&gt;砖了&lt;/h2&gt;
&lt;p&gt;本来路由器闲置了一年了都没咋用了，前两天想把OpenWrt系统刷回原厂系统。&lt;/p&gt;
&lt;p&gt;然鹅刷原厂固件时忘记改环境变量了，因为第三方Boot Loader也被我顺带刷回了原厂的所以现在开机无限重启。&lt;/p&gt;
&lt;p&gt;之前买单片机套件时赠了一条usb转ttl线的，但是被我放学校了。只好再从万能的某宝再买一条线，尝试着救砖了。&lt;/p&gt;
&lt;p&gt;(在某宝发现了一家店啥元件都有，还特别便宜。于是我还顺带买了很多杜邦线、电阻、LED灯、面包板等小玩意...)&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;h2 id=&quot;砖了&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi-r3g-ttl-flash/#%E7%A0%96%E4%BA%86&quot; title=&quot;砖了&quot;&gt;&lt;/a&gt;砖了&lt;/h2&gt;
&lt;p&gt;本来路由器闲置了一年了都没咋用了，前两天想把OpenWrt系统刷回原厂系统。&lt;/p&gt;
&lt;p&gt;然鹅刷原厂固件时忘记改环境变量了，因为第三方Boot Loader也被我顺带刷回了原厂的所以现在开机无限重启。&lt;/p&gt;
&lt;p&gt;之前买单片机套件时赠了一条usb转ttl线的，但是被我放学校了。只好再从万能的某宝再买一条线，尝试着救砖了。&lt;/p&gt;
&lt;p&gt;(在某宝发现了一家店啥元件都有，还特别便宜。于是我还顺带买了很多杜邦线、电阻、LED灯、面包板等小玩意...)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;crescent in the sky&quot;,
        artist: &quot;Stepan Voles&quot;,
        url: &quot;https://music.starry-s.moe/music/396e_a80d_10de_076d0b69c03bd2673595bd17ce939f69.mp3&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/1379887099097990.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#2233ee&quot;
    }]
});
&lt;/script&gt; 

&lt;hr&gt;
&lt;h2 id=&quot;拆机&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi-r3g-ttl-flash/#%E6%8B%86%E6%9C%BA&quot; title=&quot;拆机&quot;&gt;&lt;/a&gt;拆机&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/posts/xiaomi-r3g-ttl-flash/images/1.jpg&quot; alt=&quot;&amp;quot;路由器主板&amp;quot;&quot; title=&quot;Are You OK?&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;北方冬季气候干燥，拆机时记得放静电，找根铁丝把自己连地线上 (找个金属外壳是接地的电器和自己连上也行)。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;拆开路由器外壳，卸下主板，顺手拆掉了散热片（屏蔽罩）。&lt;/p&gt;
&lt;p&gt;串口在图片上主板的左侧，旁边有标记，从上到下依次是&lt;code&gt;TX&lt;/code&gt;、&lt;code&gt;GND&lt;/code&gt;、&lt;code&gt;RX&lt;/code&gt;、&lt;code&gt;1&lt;/code&gt;。需要注意的是主板上的&lt;code&gt;TX&lt;/code&gt;要接到usb串口的&lt;code&gt;RX&lt;/code&gt;，主板上的&lt;code&gt;RX&lt;/code&gt;要接到usb串口的&lt;code&gt;TX&lt;/code&gt;，&lt;code&gt;GND&lt;/code&gt;连&lt;code&gt;GND&lt;/code&gt;，VCC不用连。为了防止接错线，小米还十分贴心的标注了每个接口对应的连接线的颜色。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/xiaomi-r3g-ttl-flash/images/2.jpg&quot; alt=&quot;&quot; title=&quot;I&#039;m very OK!&quot;&gt;&lt;/p&gt;
&lt;p&gt;找出家里吃灰好几年差点被我扔掉的电烙铁，刮刀头刮了半天电烙铁才上锡，把新买的杜邦线母线焊到主板上，和ttl串口线相连。&lt;/p&gt;
&lt;p&gt;(电烙铁太破了根本焊不上锡，焊得很丑，emmm)&lt;/p&gt;
&lt;p&gt;实际上可以买个4PIN单排针焊上去，把串口接到排针上就可以，我直接把电线焊到上面以后用起来会很麻烦。&lt;/p&gt;
&lt;h2 id=&quot;刷机&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi-r3g-ttl-flash/#%E5%88%B7%E6%9C%BA&quot; title=&quot;刷机&quot;&gt;&lt;/a&gt;刷机&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;以下部分基于Arch Linux，其他系统的操作方式可能不一样（例如Windows可能需要超级终端访问串口，再想办法开一个tftp服务器）
刷机的原理: 通过ttl串口线连接路由器的主板，让路由器访问电脑上的tftp服务器，刷第三方Boot Loader。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;首先电脑上装一个tftp服务器。&lt;/li&gt;
&lt;/ol&gt;
&lt;figure data-raw=&quot;$ sudo pacman -S tftp-hpa
$ sudo systemctl start tftpd.service
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ sudo pacman -S tftp-hpa
$ sudo systemctl start tftpd.service
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;  tftp的默认目录为&lt;code&gt;/srv/tftp&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;  这里使用HackPascal制作的Breed（第三方Boot Loader），&lt;a href=&quot;https://breed.hackpascal.net/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;下载链接&lt;/a&gt;，把下载好的Breed重命名为&lt;code&gt;breed.bin&lt;/code&gt;，复制到tftp的默认目录。&lt;/p&gt;
&lt;figure data-raw=&quot;$ cd /srv/tftp
$ sudo cp ~/Downloads/breed-mt7620-xiaomi-r3g.bin breed.bin
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ cd /srv/tftp
$ sudo cp ~/Downloads/breed-mt7620-xiaomi-r3g.bin breed.bin
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;&lt;p&gt;路由器插网线连电脑，设置静态ip地址192.168.1.3/24，将串口和电脑连接，先不给路由器通电，通常情况下usb串口的设备名称为&lt;code&gt;/dev/ttyUSB0&lt;/code&gt;，如果不确定的话可以&lt;code&gt;dmesg&lt;/code&gt;查一下。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用&lt;code&gt;screen&lt;/code&gt;连接串口，波特率为115200。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure data-raw=&quot;$ sudo pacman -S screen
$ sudo screen /dev/ttyUSB0 115200
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ sudo pacman -S screen
$ sudo screen /dev/ttyUSB0 115200
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;  路由器通电，终端上会显示路由器启动的信息，等几秒后在选择启动项的时候按9，通过TFTP加载Boot Loader。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果串口在连接到电脑的情况下主板通电时没有响应，那就断开usb串口先给主板通电后再连接串口。
(我语文不好别骂我)
如果路由器没有变砖可以正常启动（蓝灯长亮），在正常开机过程中不能选择启动项。此时可以尝试在路由器开机后长按reset按钮7s以上直到主板重启，便可以选择启动项。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-raw=&quot;Please choose the operation:
 1: Load system code to SDRAM via TFTP.
 2: Load system code then write to Flash via TFTP.
 3: Boot system code via Flash (default).
 4: Entr boot command line interface.
 7: Load Boot Loader code then write to Flash via Serial.
 9: Load Boot Loader code then write to Flash via TFTP.

You choosed 9

9: System Load Boot Loader then write to Flash via TFTP.
Warning!! Erase Boot Loader in Flash then burn new one. Are you sure?(Y/N)y
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Please choose the operation:
 1: Load system code to SDRAM via TFTP.
 2: Load system code then write to Flash via TFTP.
 3: Boot system code via Flash (default).
 4: Entr boot command line interface.
 7: Load Boot Loader code then write to Flash via Serial.
 9: Load Boot Loader code then write to Flash via TFTP.

You choosed 9

9: System Load Boot Loader then write to Flash via TFTP.
Warning!! Erase Boot Loader in Flash then burn new one. Are you sure?(Y/N)y
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;  之后设置路由器主机地址（192.168.1.1）和TFTP服务器地址(192.168.1.3)以及文件名称(breed.bin)。&lt;/p&gt;
&lt;figure data-raw=&quot;Please Input new ones /or Ctrl-C to discard
          Input device IP (192.168.31.1) ==:192.168.1.1
          Input server IP (192.168.31.3) ==:192.168.1.3
          Input Uboot filename (uboot.bin) ==:breed.bin
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Please Input new ones /or Ctrl-C to discard
          Input device IP (192.168.31.1) ==:192.168.1.1
          Input server IP (192.168.31.3) ==:192.168.1.3
          Input Uboot filename (uboot.bin) ==:breed.bin
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;  按回车后开始刷机，过几秒钟后路由器会自动重启，第三方Boot Loader刷写完成。&lt;/p&gt;
&lt;p&gt;  路由器断电，长按reset键的同时通电开机，灯闪烁后打开浏览器输入网址&lt;code&gt;http://192.168.1.1&lt;/code&gt;便可访问breed后台。&lt;/p&gt;
&lt;h2 id=&quot;Done&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi-r3g-ttl-flash/#Done&quot; title=&quot;Done&quot;&gt;&lt;/a&gt;Done&lt;/h2&gt;
&lt;p&gt;第三方Breed刷完后，先用Breed刷小米官方的开发版固件，开启ssh，之后按照&lt;a href=&quot;/posts/Xiaomi_Miwifi_3G/#%E4%BD%BF%E7%94%A8Breed%E7%9A%84%E5%88%B7%E6%9C%BA%E6%96%B9%E6%B3%95&quot;&gt;小米路由器3G折腾之刷OpenWrt记录&lt;/a&gt;这篇文章刷OpenWrt。&lt;/p&gt;
&lt;figure data-raw=&quot;BusyBox v1.19.4 (2018-10-29 07:52:03 UTC) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

 -----------------------------------------------------
       Welcome to XiaoQiang!
 -----------------------------------------------------
  $$$$$$\  $$$$$$$\  $$$$$$$$\      $$\      $$\        $$$$$$\  $$\   $$\
 $$  __$$\ $$  __$$\ $$  _____|     $$ |     $$ |      $$  __$$\ $$ | $$  |
 $$ /  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ /  $$ |$$ |$$  /
 $$$$$$$$ |$$$$$$$  |$$$$$\         $$ |     $$ |      $$ |  $$ |$$$$$  /
 $$  __$$ |$$  __$$&lt; $$  __|        $$ |     $$ |      $$ |  $$ |$$  $$&lt;
 $$ |  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ |  $$ |$$ |\$$\
 $$ |  $$ |$$ |  $$ |$$$$$$$$\       $$$$$$$$$  |       $$$$$$  |$$ | \$$\
 \__|  \__|\__|  \__|\________|      \_________/        \______/ \__|  \__|


root@XiaoQiang:~#
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;BusyBox v1.19.4 (2018-10-29 07:52:03 UTC) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

 -----------------------------------------------------
       Welcome to XiaoQiang!
 -----------------------------------------------------
  $$$$$$\  $$$$$$$\  $$$$$$$$\      $$\      $$\        $$$$$$\  $$\   $$\
 $$  __$$\ $$  __$$\ $$  _____|     $$ |     $$ |      $$  __$$\ $$ | $$  |
 $$ /  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ /  $$ |$$ |$$  /
 $$$$$$$$ |$$$$$$$  |$$$$$\         $$ |     $$ |      $$ |  $$ |$$$$$  /
 $$  __$$ |$$  __$$&amp;lt; $$  __|        $$ |     $$ |      $$ |  $$ |$$  $$&amp;lt;
 $$ |  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ |  $$ |$$ |\$$\
 $$ |  $$ |$$ |  $$ |$$$$$$$$\       $$$$$$$$$  |       $$$$$$  |$$ | \$$\
 \__|  \__|\__|  \__|\________|      \_________/        \______/ \__|  \__|


root@XiaoQiang:~#
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

    </content>
    
    
    <category term="教程" label="教程" scheme="https://blog.starry-s.moe/categories/%E6%95%99%E7%A8%8B/" />
    
    <category term="路由器" label="路由器" scheme="https://blog.starry-s.moe/categories/%E6%95%99%E7%A8%8B/%E8%B7%AF%E7%94%B1%E5%99%A8/" />
    
    
    <category term="教程" label="教程" scheme="https://blog.starry-s.moe/tags/%E6%95%99%E7%A8%8B/" />
    
    <category term="路由器" label="路由器" scheme="https://blog.starry-s.moe/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" />
    
    <category term="OpenWrt" label="OpenWrt" scheme="https://blog.starry-s.moe/tags/OpenWrt/" />
    
  </entry>
  
  
  
  <entry>
    <title>解决笔记本外接HIDPI显示器的缩放问题</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/laptop-dualscreen-hidpi-scale/" />
    <id>https://blog.starry-s.moe/posts/laptop-dualscreen-hidpi-scale/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-01-09T14:12:54.000Z</published>
    
    
    <updated>2021-02-23T11:27:32.000Z</updated>
    
    
    <summary type="html">
      &lt;h2 id=&quot;起因&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/laptop-dualscreen-hidpi-scale/#%E8%B5%B7%E5%9B%A0&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h2&gt;
&lt;p&gt;前天在狗东买了台27寸4K显示器，型号为优派VX2771-4K-HD，分辨率3840x2160，支持HDR 10bit色深（然而电脑只支持DP1.2），因为之前已经&lt;a href=&quot;/posts/archlinux-pavilion-gaming-laptop/&quot;&gt;配置好了optimus-manager&lt;/a&gt;，所以电脑接上显示器就能亮，很幸运没有遇到物理问题。&lt;/p&gt;
&lt;p&gt;然后一看4K屏上的字小得瞎眼。&lt;/p&gt;
&lt;p&gt;如果设置分辨率为1080P，显示文字时会特别糊，根本没法看，效果还没有1080P显示器好。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;h2 id=&quot;起因&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/laptop-dualscreen-hidpi-scale/#%E8%B5%B7%E5%9B%A0&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h2&gt;
&lt;p&gt;前天在狗东买了台27寸4K显示器，型号为优派VX2771-4K-HD，分辨率3840x2160，支持HDR 10bit色深（然而电脑只支持DP1.2），因为之前已经&lt;a href=&quot;/posts/archlinux-pavilion-gaming-laptop/&quot;&gt;配置好了optimus-manager&lt;/a&gt;，所以电脑接上显示器就能亮，很幸运没有遇到物理问题。&lt;/p&gt;
&lt;p&gt;然后一看4K屏上的字小得瞎眼。&lt;/p&gt;
&lt;p&gt;如果设置分辨率为1080P，显示文字时会特别糊，根本没法看，效果还没有1080P显示器好。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;エンドロール&quot;,
        artist: &quot;KEIKO&quot;,
        url: &quot;https://music.starry-s.moe/music/obj_w5rDlsOJwrLDjj7CmsOj_5016145218_8a57_c3ad_6dee_bedcb53124a46de8152d464b7db24470.mov&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/109951165501153240.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#886666&quot;
    }]
});
&lt;/script&gt; 

&lt;h2 id=&quot;解决方法&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/laptop-dualscreen-hidpi-scale/#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95&quot; title=&quot;解决方法&quot;&gt;&lt;/a&gt;解决方法&lt;/h2&gt;
&lt;p&gt;首先按照&lt;a href=&quot;https://wiki.archlinux.org/index.php/HiDPI&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Wiki&lt;/a&gt;设置GNOME的HIDPI:&lt;/p&gt;
&lt;figure data-raw=&quot;$ gsettings set org.gnome.settings-daemon.plugins.xsettings overrides &amp;quot;[{&#039;Gdk/WindowScalingFactor&#039;, &lt;2&gt;}]&amp;quot;
$ gsettings set org.gnome.desktop.interface scaling-factor 2
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ gsettings set org.gnome.settings-daemon.plugins.xsettings overrides &quot;[{&#039;Gdk/WindowScalingFactor&#039;, &amp;lt;2&amp;gt;}]&quot;
$ gsettings set org.gnome.desktop.interface scaling-factor 2
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;在显示设置里将缩放调到200%后，界面被放大了2倍，在4K屏上的字倒是不瞎眼了。&lt;/p&gt;
&lt;p&gt;但是因为笔记本是15寸1080P，所以笔记本上显示的字大得离谱。&lt;/p&gt;
&lt;p&gt;解决方法是使用xrandr调整笔记本电脑的屏幕缩放，笔记本的分辨率为1920x1080，使用xrandr将画面的分辨率放大2倍，也就是调整为3840x2160，然后显示在分辨率为1920x1080的显示器上。&lt;/p&gt;
&lt;p&gt;首先使用&lt;code&gt;xrandr&lt;/code&gt;查看每个显示器所对应的设备名称和分辨率。&lt;/p&gt;
&lt;figure data-raw=&quot;$ xrandr | grep &amp;quot;$extern connected&amp;quot;

  HDMI-0 connected primary 3840x2160+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
  eDP-1-1 connected 1920x1080+0+2160 (normal left inverted right x axis y axis) 344mm x 193mm
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ xrandr | grep &quot;$extern connected&quot;

  HDMI-0 connected primary 3840x2160+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
  eDP-1-1 connected 1920x1080+0+2160 (normal left inverted right x axis y axis) 344mm x 193mm
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;这里HDMI-0是外接的4K显示器，分辨率为3840x2160，位置为(0, 0)。&lt;/p&gt;
&lt;p&gt;eDP-1-1是笔记本的显示器，分辨率1920x1080，位置为(0, 2160)，在4K显示器的左下方。&lt;/p&gt;
&lt;p&gt;参见&lt;a href=&quot;https://wiki.archlinux.org/index.php/HiDPI#Multiple_displays&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Wiki设置双显示器部分&lt;/a&gt;，用xrandr将笔记本的显示器缩放2倍，分辨率变为 [1920 * 2]x[1080 * 2]=3840x2160，位置还是在4K显示器的正下方。&lt;/p&gt;
&lt;figure data-raw=&quot;$ xrandr --output eDP-1-1 --scale 2.0x2.0 --panning 3840x2160+0+2160 --output HDMI-0 --auto
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ xrandr --output eDP-1-1 --scale 2.0x2.0 --panning 3840x2160+0+2160 --output HDMI-0 --auto
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;因为不需要修改4K显示器的分辨率，所以HDMI-0设置为auto。&lt;/p&gt;
&lt;p&gt;这样笔记本上的画面也显示正常了。&lt;/p&gt;
&lt;p&gt;但是用过一阵子会发现笔记本显示器上的字比4K显示器上的字小很多，看起来不方便，所以把缩放倍数改为1.6（我是从1.5-2.0之间一点点试的，才找到最适合自己的缩放倍数），这样解决了字体大小的问题，不过笔记本画面还是会有模糊（能接受）。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[1920 * 1.6]x[1080 * 1.6]=3072x1728&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-raw=&quot;$ xrandr --output eDP-1-1 --scale 1.6x1.6 --panning 3072x1728+0+2160 --output HDMI-0 --auto
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ xrandr --output eDP-1-1 --scale 1.6x1.6 --panning 3072x1728+0+2160 --output HDMI-0 --auto
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;用到现在GNOME的缩放还算是完美，除了玩Minecraft用的HMCL启动器（Java程序）没有被放大之外&lt;del&gt;（貌似缺配置，要是配置好了我再补充）&lt;/del&gt;，Steam界面缩放正常，饥荒、Dota2也都没问题。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Java8不支持Hidpi缩放，如果想让HMCL支持缩放需要需要安装Java9以上的版本，所以还是算了，又不是不能用。
网易云音乐缩放方法参考&lt;a href=&quot;https://ntzyz.io/post/fix-cloud-music-linux-client-hidpi-issue&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;这篇博客&lt;/a&gt;。
qt5设置环境变量&lt;code&gt;QT_SCREEN_SCALE_FACTORS=2&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Others&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/laptop-dualscreen-hidpi-scale/#Others&quot; title=&quot;Others&quot;&gt;&lt;/a&gt;Others&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;仅限GNOME，因为我只用GNOME所以不知道其他DE开HIDPI的效果是什么样。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;听说Wayland支持不同显示器设置不同的缩放倍数，但是我笔记本的HDMI是独显输出，自带屏幕为集显输出，想启用独显输出画面除了用大黄蜂之外只能Nvidia Optimus，然而Optimus不支持Wayland（F**K NVIDIA），
于是我现在都不知道用Wayland上双显示器的效果是什么样子，只好改用xorg和optimus-manager切换显卡，再用xrandr调显示器的缩放倍数。&lt;/p&gt;
&lt;p&gt;或者买一根type-c转DP的线连显示器，我电脑的type-c支持DP1.2，可以输出4K60fps，而且走集显输出。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;xrandr的指令是我自己试了很多遍试出来的，在我电脑上能用，期间遇到一堆问题(BadMatch)，没想好什么解决方法，所以在别的电脑上可能需要一些修改。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果你正考虑为你的笔记本购买一台新显示器而且你是Linux用户，你的笔记本又是双显卡，不知道HDMI是独显输出还是集显输出的话，建议你买一台和笔记本电脑的分辨率相同的显示器(或者2K)，这样能省去很多麻烦。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用了几个月后经常遇到显示器通过HDMI连接到电脑但是没有视频输出的情况，所以现在改用的是type-c转DP的连接线，走集成显卡输出，就没有遇到过这个问题。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

    </content>
    
    
    <category term="Linux" label="Linux" scheme="https://blog.starry-s.moe/categories/Linux/" />
    
    
    <category term="Arch Linux" label="Arch Linux" scheme="https://blog.starry-s.moe/tags/Arch%20Linux/" />
    
    <category term="HIDPI" label="HIDPI" scheme="https://blog.starry-s.moe/tags/HIDPI/" />
    
    <category term="Dual Moniter" label="Dual Moniter" scheme="https://blog.starry-s.moe/tags/Dual%20Moniter/" />
    
  </entry>
  
  
  
  <entry>
    <title>Hello 2021</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/hello-2021/" />
    <id>https://blog.starry-s.moe/posts/hello-2021/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2021-01-05T17:57:19.000Z</published>
    
    
    <updated>2021-01-13T17:51:06.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;&lt;img src=&quot;/posts/hello-2021/images/1.jpg&quot; alt=&quot;Lunar tear&quot; title=&quot;Lunar tear&quot;&gt;&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;&lt;img src=&quot;/posts/hello-2021/images/1.jpg&quot; alt=&quot;Lunar tear&quot; title=&quot;Lunar tear&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;Gloria&quot;,
        artist: &quot;Kalafina&quot;,
        url: &quot;https://music.starry-s.moe/music/kalafina-gloria.aac&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/2505786999756176.png&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#cc2222&quot;
    }]
});
&lt;/script&gt; 

&lt;hr&gt;
&lt;p&gt;本来我已经戴好耳机准备睡觉了的，突然想起来2020年的年终总结还没有写，恰好脑子里有想写的东西，于是大概构思了一下，便从床上爬起来开灯打开电脑开写年终总结。&lt;/p&gt;
&lt;p&gt;因为思路不是很稳定，总是写了删删了写，所以隔了这么久才把原本已经放弃了不打算写的年终总结重新写出来。&lt;/p&gt;
&lt;p&gt;果然还是深夜适合写这些东西。&lt;/p&gt;
&lt;p&gt;今年原本打算能像去年那样在假期外出旅行的，然而疫情爆发后我就一直窝在家待着哪里都没去，不过在1月17号也就是武汉封城前几天，我自己一个人坐飞机跑去北京玩了一圈，当时还不知道有疫情这么一回事，到北京后就是找个地方住下，简单的去了一些景点，后来因为脚疼，很多路远的人多的地方都没有去成。在北京闲逛3天后就坐大客车回家了（一边坐车一遍骂京哈高铁京承段为什么一点进展都没有）。到家后不几天就听说武汉开始封城，然后北京就开始交通管制，现在想想还挺刺激的。&lt;/p&gt;
&lt;p&gt;然后暑假本来打算去上海BW2020的，在票都买好了之后，因为外出需要和学校审批（此处省略若干字），最终漫展门票全打水漂，飞机票退票手续费还花了三百多块钱。&lt;/p&gt;
&lt;p&gt;上半年宅在家里大半年，几乎是什么都没学，什么事情都没干。不过也借此机会每天都能睡个大懒觉，总之就是狠狠的歇了一顿，尝试着把高中时期欠的觉补回来，然而似乎并不管用。&lt;/p&gt;
&lt;p&gt;然后总感觉自己每天都很累，明明什么都没有干但是身体总是一点力气都没有，总之下半年开学后经历了很长一段时间才重新适应了学校的生活，期间心理变化很复杂。&lt;/p&gt;
&lt;p&gt;所以大二下学期和大三上学期的期末成绩基本上都是刚好及格。（真的是烤60分比烤80分还高兴）&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;年初看了几集超电磁炮3，看到后来因为它更新太慢了就忘了继续看了。之后还看了格莱普尼尔，看这个番纯粹是因为它的OP是Hikaru唱的，看着看着觉得挺有意思而且官方更新速度很快，于是就把第一季追完了。&lt;/p&gt;
&lt;p&gt;然后因为Lacrimosa这首歌，我才看的黑执事，不过自己比较懒只看了第一季，第二季一直咕到现在都没有看，听说剧情挺虐的所以我更不敢看了。（明明第二季的ed比第一季的还好听）&lt;/p&gt;
&lt;p&gt;本来还打算看新世纪福音战士的，也是因为懒，看了一集就不继续看了。&lt;/p&gt;
&lt;p&gt;除此之外，年末的时候在睡前为了打发时间看了几集非自然死亡。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;这一年又打了一遍尼尔：机械纪元。和第一次玩不太一样，二刷时我尽可能的多做支线任务，不开简单模式和自动芯片。不过通关后我还没有打E结局，总想找个时间把其他支线任务做完。&lt;/p&gt;
&lt;p&gt;年初在逛淘宝时发现了台版的尼尔原著小说，于是毫不犹豫的把少年寄叶、短话和长话全都买了下来。不过截至目前我只看完了短话。在看完艾米尔的回忆那一章后很感动于是打开游戏找到相对应的支线任务，废了很大力气找到那三朵“Lunar Tear”（月之泪）之后，前往种着一大片月之泪的地下室。&lt;/p&gt;
&lt;p&gt;在网上看攻略找到了艾米尔居住的家，于是又走了很远的路到地下很深的地方，到他家里面拿（偷）走了面具。&lt;/p&gt;
&lt;p&gt;据说去他家偷完东西后会触发艾米尔的boss支线，不过因为在寝室没太多时间所以我没有继续玩下去。&lt;/p&gt;
&lt;p&gt;蛮期待2021年4月发行的尼尔续作的，不过有些担心我的笔记本还能不能跑得起来。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;尝试着二刷空境原著，不过没刷完，所以只好等以后有时间再看了。&lt;/p&gt;
&lt;p&gt;2020年下半年花了很大力气尝试玩懂FGO，不过最终因为太肝、自己太非、没时间而劝退，前几章的主线太枯燥乏味了，而且我貌似只对FSN系列和空境系列的人感兴趣，FGO里面的人物基本和他们不沾边而且我也不认识。&lt;/p&gt;
&lt;p&gt;很期待月姬重制版，尽管我目前还一点都不了解月姬。既然月姬重置版只在主机平台上映，尼尔续作也有主机版，那么我是不是应该提前准备一台PS4呢？&lt;/p&gt;
&lt;p&gt;PS5水货太贵了还是算了，除非等国行，然而等国行又要等到4月份。&lt;/p&gt;
&lt;p&gt;关键是我连PS4都买不起。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2021年1月22日后续：
最终买了二手港版PS4 Slim，考虑了价格、重量、性能、体积等因素后没有买Pro（主要是没钱），因此现在变得非常贫穷。
换了笔记本上拆下来闲置了一年的1T硬盘，尝试着在尼尔：伪装者发售前三刷一遍尼尔：机械纪元，因为PS4太好玩了所以现在在后悔为什么不早点买PS4。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;2020年4月份的时候新开了一个Minecraft单机生存的坑，原本是打算看一下新版本（1.15.2）更新了什么新特性的（蜜蜂），结果玩上生存就停不下来了。先是花了两个星期用纯铁镐手挖两个史莱姆区块，用矿车运村民和僵尸照着B站的视频建了简易的刷铁机，之后又用不到一个月的时间解放末地。总之就是玩上了就停不下来了。然后照着B站各大UP主的视频做了末地刷沙机、然后是混凝土固化机，后来挂三向轰炸机肝了3天清了出生点空置域。用了短短几个月的时间一个人建了很多东西，去地狱打了凋零骷髅头，建海上刷怪塔刷火药和骨粉。后来物资储备足够多了之后就开始挖地铁（旧习难改吧），一年的时间挖了两条地铁线路，盖了十几座车站、一座跨海大桥、一栋摩天大楼。&lt;/p&gt;
&lt;p&gt;原来单机生存还能玩得这么有意思，B站上有很多生电大佬，然而红科搬的视频我基本都看不懂。&lt;/p&gt;
&lt;p&gt;后续可能要再修几条地铁，延长已有的线路，然后再搞一些建筑，炸一个原点空置域修全物品分类机，然后还打算升级1.16.4。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;就回忆到这里吧，2020是个特别的一年。&lt;/p&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
  &lt;img src=&quot;/posts/hello-2021/images/2.jpg&quot;&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p&gt;犹豫了很久最后还是决定把之前删掉的部分文章恢复回来，不然总给人一种这个博客是在2020年创建的而不是2016年创建的错觉。&lt;/p&gt;
&lt;p&gt;2020年博客鸽了很长一段时间，当时尽管并没有放弃博客但是我真的什么都写不出来，因为看到自己以前写的水文觉得很恶心而且十分不适，于是就在某个心情不好的时候删掉了。后来换了一个新的域名之后就再也没和任何人提起“我还有一个博客”这件事情，因为把博客的文章全删除后几乎没人访问我的博客，新的访客量到现在为止才800多，其中绝大多数都是我自己调试页面刷新时点出来的。&lt;/p&gt;
&lt;p&gt;对啊博客就是用来记录生活的，所以就让“因为看不惯以前的自己写的啥也不是的水文最终将其全部删掉”也成为博客记录下的一件事吧。&lt;/p&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    
    <category term="碎碎念" label="碎碎念" scheme="https://blog.starry-s.moe/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/" />
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/tags/%E6%97%A5%E5%B8%B8/" />
    
  </entry>
  
  
  
  <entry>
    <title>51单片机习题整理</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/learn-mcs8051/" />
    <id>https://blog.starry-s.moe/posts/learn-mcs8051/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2020-11-03T12:19:36.000Z</published>
    
    
    <updated>2020-12-09T04:31:15.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;赶在&lt;del&gt;期中考试&lt;/del&gt;(骑磨烤柿)前把单片机的课后习题整理出来...&lt;/p&gt;
&lt;p&gt;(实在是没什么可拿来更新博客的了, 就干脆写点复习资料吧...)&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;赶在&lt;del&gt;期中考试&lt;/del&gt;(骑磨烤柿)前把单片机的课后习题整理出来...&lt;/p&gt;
&lt;p&gt;(实在是没什么可拿来更新博客的了, 就干脆写点复习资料吧...)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
&lt;div class=&quot;alert-blue&quot;&gt;
本篇内容为作者整理资料所得, 仅供学习使用。如需转载请务必遵循&lt;a style=&quot;color:#666&quot; href=&quot;https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;CC BY-NC-ND 4.0&lt;/a&gt;协议。&lt;br&gt;
请勿将本篇内容作为权威的教学辅导资料使用, 因无法保证100%准确, 仅供参考。&lt;br&gt;
如果发现了本篇存在的错误, 欢迎在页面下方提issue指正。&lt;br&gt;
本篇文章使用MathJax显示数学公式，在使用RSS阅读器时会出现无法正确显示的情况。&lt;br&gt;
&lt;/div&gt;


 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;春はゆく&quot;,
        artist: &quot;Aimer&quot;,
        url: &quot;https://music.starry-s.moe/music/obj_wonDkMOGw6XDiTHCmMOi_1630142819_fc9d_8785_4c2c_8abd7ec40b9695cbf53de173e782f195.m4a&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/109951164785068521.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#25AFF5&quot;
    }]
});
&lt;/script&gt; 

&lt;h2 id=&quot;硬件结构amp;指令系统&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn-mcs8051/#%E7%A1%AC%E4%BB%B6%E7%BB%93%E6%9E%84amp;%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F&quot; title=&quot;硬件结构amp;指令系统&quot;&gt;&lt;/a&gt;硬件结构&amp;amp;指令系统&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;8051复位后从地址&lt;code&gt;0000H&lt;/code&gt;开始执行程序, SP的值为&lt;code&gt;07H&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;PC: 两字节(16位)寄存器, 也称程序计数器。&lt;/p&gt;
&lt;p&gt;SP: 堆栈指针, 指示出堆栈顶部在&lt;strong&gt;内部RAM块&lt;/strong&gt;中的位置。&lt;/p&gt;
&lt;p&gt;单片机的堆栈设在了内部RAM区, 单片机复位后, SP中的内容为&lt;code&gt;07H&lt;/code&gt;(指向第0组工作寄存器的R7), 堆栈实际上从&lt;code&gt;08H&lt;/code&gt;开始。&lt;/p&gt;
&lt;p&gt;若SP被初始化为&lt;code&gt;39H&lt;/code&gt;, 则堆栈实际上是从&lt;code&gt;3AH&lt;/code&gt;开始的。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;LCALL addr16&lt;/code&gt;指令时，单片机先将PC的低字节压栈，再将PC的高字节压栈，最后把转移地址送入PC中。&lt;/p&gt;
&lt;p&gt;与之类似的&lt;code&gt;LJMP&lt;/code&gt;类无条件转移指令，单片机只修改PC的值，并不堆栈保存跳转前的PC中保存的地址。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;RET&lt;/code&gt;指令后, SP值减2 (因为PC为2字节寄存器), 进行两次出栈操作，第一次出栈送PC的高位，第二次出栈送PC的低位。&lt;/p&gt;
&lt;p&gt;中断服务程序结束指令&lt;code&gt;RETI&lt;/code&gt;不仅将堆栈中保存的2字节地址分别送入PC的高位和低位中，而且复位中断系统。因此&lt;code&gt;RET&lt;/code&gt;和&lt;code&gt;RETI&lt;/code&gt;不同。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;RET&lt;/code&gt;和&lt;code&gt;RETI&lt;/code&gt;对堆栈的操作是相同的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;PSW中的&lt;code&gt;RS1 RS0&lt;/code&gt;=&lt;code&gt;10B&lt;/code&gt;时, R2的RAM地址为&lt;code&gt;12H&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;PSW： 程序状态字寄存器, 从&lt;code&gt;PSW.7&lt;/code&gt;至&lt;code&gt;PSW.0&lt;/code&gt;分别为&lt;code&gt;Cy&lt;/code&gt;(进位标志位), &lt;code&gt;Ac&lt;/code&gt;(辅助进位标志位), &lt;code&gt;F0&lt;/code&gt;(标志位), &lt;code&gt;RS1&lt;/code&gt;和&lt;code&gt;RS0&lt;/code&gt;(寄存器区选择控制位), &lt;code&gt;OV&lt;/code&gt;(溢出位), 保留位, &lt;code&gt;P&lt;/code&gt;(奇偶标志位, 奇数为1, 偶数为0)。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;PSW&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Cy&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Ac&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;F0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RS1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RS0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;OV&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;P&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;&lt;code&gt;RS1 RS0&lt;/code&gt; = &lt;code&gt;10B&lt;/code&gt;时, 使用第二组工作寄存器区, 第0组工作寄存器区R0-R7的地址为&lt;code&gt;00H-07H&lt;/code&gt;, 第1组为&lt;code&gt;08H-0FH&lt;/code&gt;, 第2组为&lt;code&gt;10H-17H&lt;/code&gt;, 第3组为&lt;code&gt;18H-1FH&lt;/code&gt;(每组长度为8个字节, 每个寄存器占1个字节)。&lt;/p&gt;
&lt;p&gt;因此, 当A为&lt;code&gt;01110010B&lt;/code&gt;时, PSW中P为0(偶数个1)。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;INC A&lt;/code&gt;指令不改变&lt;code&gt;PSW&lt;/code&gt;中的&lt;code&gt;Cy&lt;/code&gt;，只有可能改变奇偶标志位&lt;code&gt;P&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;假设PSW为&lt;code&gt;18H&lt;/code&gt;, 即&lt;code&gt;00011000B&lt;/code&gt;, 此时使用第3组工作寄存器, R0地址为&lt;code&gt;18H&lt;/code&gt;, R7地址为&lt;code&gt;1FH&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;复位后, 默认选择的寄存器区是0区。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;8051片外数据存储器的寻址空间为&lt;code&gt;0000H~0FFFFH&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;位地址&lt;code&gt;07H&lt;/code&gt;位于字节地址&lt;code&gt;20H&lt;/code&gt;, 位地址&lt;code&gt;7FH&lt;/code&gt;位于字节地址&lt;code&gt;2FH&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;片内RAM中&lt;code&gt;20H~2FH&lt;/code&gt;这16个单元即可进行共128位的位寻址, 也可进行字节寻址。&lt;/p&gt;
&lt;p&gt;字节地址及其位地址见下表所示：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;字节地址&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;2FH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;7FH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;7EH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;7DH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;7CH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;7BH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;7AH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;79H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;78H&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;2EH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;77H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;76H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;75H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;74H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;73H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;72H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;71H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;70H&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;2DH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;6FH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;6EH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;6DH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;6CH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;6BH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;6AH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;69H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;68H&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;...&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;21H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0FH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0EH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0DH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0CH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0BH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0AH&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;09H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;08H&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;20H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;07H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;06H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;05H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;04H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;03H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;02H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;01H&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00H&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;因此&lt;code&gt;00H~07H&lt;/code&gt;位于字节地址&lt;code&gt;20H&lt;/code&gt;, &lt;code&gt;78H-7FH&lt;/code&gt;位于字节地址&lt;code&gt;2FH&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;除此之外，一些特殊功能寄存器（SFR）可进行位寻址（字节地址能够被8整除），SFR中位地址有83个（共有88个，5个未用），能够位寻址的SFR的字节地址末位均为&lt;code&gt;0H&lt;/code&gt;或&lt;code&gt;8H&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;访问外部存储器时, P0口用来传输低8位地址和数据, P2口用来传送高8位地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;访问外部存储器时, ALE的输出用于锁存低8位地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一个机器周期为12个震荡周期&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;为保证读入数据正确, 在读一个端口引脚之前应先向相应的端口锁存器写1。&lt;/p&gt;
&lt;p&gt;如果在读一个端口引脚之前向对应的输出锁存器写了0, 将总是读到0。&lt;/p&gt;
&lt;p&gt;8051访问片外存储器时, 利用ALE信号锁存来自P0的低8位地址信号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;只能用直接寻址方式访问特殊功能寄存器。&lt;/p&gt;
&lt;p&gt;如果为8052单片机, 在访问高128字节的RAM时, 只能用间接寻址方式寻址。&lt;/p&gt;
&lt;p&gt;访问片外数据存储器64Kbyte时, 使用&lt;code&gt;DPTR&lt;/code&gt;做间接寻址寄存器。&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;MOVX @DPTR&lt;/code&gt;类指令访问外部扩展存储器时, P2口输出高8位地址, P0口传送低8位地址和数据。&lt;/p&gt;
&lt;p&gt;8051中, &lt;code&gt;PC&lt;/code&gt;和&lt;code&gt;DPTR&lt;/code&gt;都用于提供地址时, &lt;code&gt;PC&lt;/code&gt;是&lt;strong&gt;用户程序不可访问的&lt;/strong&gt;, &lt;code&gt;DPTR&lt;/code&gt;可以分为两个8位寄存器&lt;code&gt;DPH&lt;/code&gt;和&lt;code&gt;DPL&lt;/code&gt;使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;累加器A的值为&lt;code&gt;30H&lt;/code&gt;, 指令&lt;code&gt;MOVC A, @A+PC&lt;/code&gt;位于地址&lt;code&gt;3000H&lt;/code&gt;。执行该指令时, 程序存储器地址&lt;code&gt;3031H&lt;/code&gt;的内容被传送至累加器A。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;   指令&lt;code&gt;MOVC A, @A+PC&lt;/code&gt;长度为1字节, 位于地址&lt;code&gt;3000H&lt;/code&gt;, 因此PC值为&lt;code&gt;3001H&lt;/code&gt;, 故&lt;code&gt;A+PC&lt;/code&gt;为&lt;code&gt;3031H&lt;/code&gt;。&lt;/p&gt;
&lt;ol start=&quot;11&quot;&gt;
&lt;li&gt;设SP的值为&lt;code&gt;5FH&lt;/code&gt;, 指令&lt;code&gt;LCALL DELAY&lt;/code&gt;所在地址为&lt;code&gt;2030H&lt;/code&gt;, 子程序DELAY所在地址为&lt;code&gt;20A0H&lt;/code&gt;, 则该指令完成的操作是将地址&lt;code&gt;2033H&lt;/code&gt;压入堆栈保存, 将地址&lt;code&gt;20A0H&lt;/code&gt;送入PC, SP的值应在该指令执行结束后变成&lt;code&gt;61H&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;   单片机执行子程序或中断服务程序时, 需要保护现场, 即将PC当前的值压栈保存, 当子程序或中断服务程序运行结束后再进行出栈。(所以如果子程序修改了栈的内容, 在子程序运行结束后程序有可能会运行错误)。&lt;/p&gt;
&lt;p&gt;   &lt;strong&gt;PC是16字节寄存器&lt;/strong&gt;, 所以SP需要加2, 以此分别保存PC的高、低8位的数据。&lt;/p&gt;
&lt;p&gt;   &lt;code&gt;LCALL addr16&lt;/code&gt;这条指令占3字节, 其中addr16占两字节, 因此程序可跳转64KB范围内的地址。&lt;/p&gt;
&lt;p&gt;   (&lt;code&gt;ACALL&lt;/code&gt;指令只能跳转当前所在的&lt;strong&gt;2K范围内&lt;/strong&gt;的地址, 如果不涉及到片外数据存储器的话, 通常只用&lt;code&gt;SJMP&lt;/code&gt;和&lt;code&gt;AJMP&lt;/code&gt;)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在网上搜到的答案「将&lt;code&gt;3500H&lt;/code&gt;送入PC」是错误的, 实际是将&lt;code&gt;20A0H&lt;/code&gt;送入PC, 因为DELAY所在的地址为&lt;code&gt;20A0H&lt;/code&gt;, 和&lt;code&gt;3500H&lt;/code&gt;一点关系都没有。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;12&quot;&gt;
&lt;li&gt;&lt;code&gt;MOVC&lt;/code&gt;访问 &lt;strong&gt;程序(ROM)&lt;/strong&gt; 存储器, &lt;code&gt;MOVX&lt;/code&gt;指令访问 &lt;strong&gt;外部数据&lt;/strong&gt; 存储器。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;   &lt;code&gt;MOVC&lt;/code&gt;为查表指令, 只有&lt;code&gt;MOVC @A+PC&lt;/code&gt;和&lt;code&gt;MOVC @A+DPTR&lt;/code&gt;这两条, 均为单字节指令。&lt;/p&gt;
&lt;p&gt;   &lt;code&gt;MOVX&lt;/code&gt;用于累加器A与外部数据存储器进行传送。&lt;/p&gt;
&lt;p&gt;   可以是&lt;code&gt;MOVX A, @DPTR&lt;/code&gt;, &lt;code&gt;MOVX A, @Ri&lt;/code&gt;, &lt;code&gt;MOVX @DPTR, A&lt;/code&gt;, &lt;code&gt;MOVX @Ri, A&lt;/code&gt;，其中i为0或1.&lt;/p&gt;
&lt;p&gt;   当使用&lt;code&gt;MOVX @Ri&lt;/code&gt;类指令时，只有P0口用来传送地址和数据，P2口的状态不会发生改变，因此可使用&lt;code&gt;MOV P2, #12H&lt;/code&gt;指令设定高8位的地址。&lt;/p&gt;
&lt;p&gt;   当采用Ri作间接寻址时, 只能寻找片外256个单元的数据存储器, 此时8位地址和数据均由P0口传送，P2口的状态不发生改变。&lt;/p&gt;
&lt;ol start=&quot;13&quot;&gt;
&lt;li&gt;假设指令&lt;code&gt;DJNZ R7, rel&lt;/code&gt;位于&lt;code&gt;005FH&lt;/code&gt;, 如果在执行该指令前寄存器R7值为&lt;code&gt;00H&lt;/code&gt;, 偏移量rel为&lt;code&gt;02H&lt;/code&gt;, 则该指令执行后下一条要执行的指令所在的地址是&lt;code&gt;005FH&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;   &lt;code&gt;DJNZ R7, rel&lt;/code&gt;位于&lt;code&gt;005FH&lt;/code&gt;, 该指令长度为&lt;strong&gt;2字节&lt;/strong&gt; (书上写的3字节是错的), 所以在执行这条指令开始时PC值在原来的基础上 + 2 变为&lt;code&gt;0061H&lt;/code&gt;。又因为rel为&lt;code&gt;02H&lt;/code&gt;, 所以执行这条指令后, PC值变为&lt;code&gt;0063H&lt;/code&gt;。&lt;/p&gt;
&lt;ol start=&quot;14&quot;&gt;
&lt;li&gt;分析下面子程序的功能, 假设8051单片机的震荡频率为6MHz。&lt;/li&gt;
&lt;/ol&gt;
&lt;figure data-raw=&quot;  DL: MOV R7, #0AH
  L0: MOV R6, #250
  L1: NOP
     NOP
     DJNZ R6, L1
     DJNZ R7, L0
     RET
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;  DL: MOV R7, #0AH
  L0: MOV R6, #250
  L1: NOP
     NOP
     DJNZ R6, L1
     DJNZ R7, L0
     RET
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;  R7为10, R6为250, 因此两个&lt;code&gt;NOP&lt;/code&gt;加上一个&lt;code&gt;DJNZ&lt;/code&gt;一共循环了250次, 该250次的循环一共执行了10次。&lt;/p&gt;
&lt;p&gt;  &lt;code&gt;NOP&lt;/code&gt;为1周期指令, &lt;code&gt;DJNZ&lt;/code&gt;为2周期指令, 两个&lt;code&gt;NOP&lt;/code&gt;加一个&lt;code&gt;DJNZ&lt;/code&gt;共4周期。&lt;/p&gt;
&lt;p&gt;  6MHz下一个机器周期为 $12 \div (6 \times 10^6)= 2{\mu}s$, 12MHz下一个机器周期为1微秒。&lt;/p&gt;
&lt;p&gt;  故程序该子程序延时了$(4 \times 250 \times 10 \times 12) \div (6 \times 10^6) = 20(ms)$。&lt;/p&gt;
&lt;p&gt;  (实际上有10次&lt;code&gt;MOV R6, #250&lt;/code&gt;和10次&lt;code&gt;DJNZ R7, L0&lt;/code&gt;造成的30个机器周期的约0.6ms的误差)&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;以下部分写于2020年11月25日&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;汇编语言程序&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn-mcs8051/#%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F&quot; title=&quot;汇编语言程序&quot;&gt;&lt;/a&gt;汇编语言程序&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;编写一个子程序, 将内部RAM 40H~4FH的内容复制到50H~5FH。&lt;/p&gt;
&lt;figure data-raw=&quot;COPY: MOV R0, #40H
      MOV R1, #50H
      MOV R2, #10H
      ; 40H~4FH一共复制了16次
LOOP:
      MOV A, @R0
      MOV @R1, A
      INC R0
      INC R1
      DJNZ R2, LOOP
      RET
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;COPY: MOV R0, #40H
      MOV R1, #50H
      MOV R2, #10H
      ; 40H~4FH一共复制了16次
LOOP:
      MOV A, @R0
      MOV @R1, A
      INC R0
      INC R1
      DJNZ R2, LOOP
      RET
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;因为没有&lt;code&gt;MOV @RX, @RX&lt;/code&gt;这条指令, 所以用A做数据的中转站。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;将任何无符号8位二进制数转换为BCD码的子程序, 入口参数为内部RAM单元20H, 出口参数为内部RAM单元30H和31H, 30H存放百位数, 31H存放十位数和个位数。&lt;/p&gt;
&lt;figure data-raw=&quot;CV:
MOV R0, #20H
MOV A, @R0
MOV B, #100
DIV AB; A除以100, 得到的百位数存在A中
MOV 30H, A
MOV A, B

MOV B, #10
DIV AB

SWAP A
ADD A, B; 也可以用ORL
MOV 31H, A
RET
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;CV:
MOV R0, #20H
MOV A, @R0
MOV B, #100
DIV AB; A除以100, 得到的百位数存在A中
MOV 30H, A
MOV A, B

MOV B, #10
DIV AB

SWAP A
ADD A, B; 也可以用ORL
MOV 31H, A
RET
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;DIV AB&lt;/code&gt;和&lt;code&gt;MUL AB&lt;/code&gt;的A和B之间没有逗号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;内部RAM 30H单元存放两位十进制数 (压缩BCD码), 编写将该十进制数转换为对应ASCII码的子程序, 转换结果存放到内部RAM 40H (十位数) 和41H (个位数) 单元。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ASCII码： &lt;code&gt;30H&lt;/code&gt;为&lt;code&gt;0&lt;/code&gt;, &lt;code&gt;41H&lt;/code&gt;为&lt;code&gt;A&lt;/code&gt;, &lt;code&gt;61H&lt;/code&gt;为&lt;code&gt;a&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-raw=&quot;CV:
MOV A, 30H
ANL A, #0FH
MOV DPTR, #DATA; 或者直接用ADD A, #30H即可
MOVC A, @A+DPTR
MOV 41H, A

MOV A, 30H
SWAP A
ANL A, #0FH
MOVC A, @A+DPTR
MOV 40H, A

RET

DATA:
DB 30H, 31H, 32H, 33H, 34H, 35H, 36H, 37H, 38H, 39H
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;CV:
MOV A, 30H
ANL A, #0FH
MOV DPTR, #DATA; 或者直接用ADD A, #30H即可
MOVC A, @A+DPTR
MOV 41H, A

MOV A, 30H
SWAP A
ANL A, #0FH
MOVC A, @A+DPTR
MOV 40H, A

RET

DATA:
DB 30H, 31H, 32H, 33H, 34H, 35H, 36H, 37H, 38H, 39H
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;8个8位数相加, 求平均值, 入口地址为&lt;code&gt;30H&lt;/code&gt;~`37H&lt;code&gt;, 结果存到&lt;/code&gt;40H`。&lt;/p&gt;
&lt;p&gt;把8位数相加存在溢出, 所以把相加结果以16进制存到R2、R3中, 再除以8( 右移3次), 即可求得不四舍五入的平均值。&lt;/p&gt;
&lt;figure data-raw=&quot;MOV R0, #30H
MOV R1, #08H
MOV R2, #00H
MOV R3, #00H
; 初始化
LOOP:
CLR C
MOV A, @R0
ADD A, R3
MOV R3, A
JNC SKIP
INC R2
SKIP:
INC R0
DJNZ R1, LOOP
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;MOV R0, #30H
MOV R1, #08H
MOV R2, #00H
MOV R3, #00H
; 初始化
LOOP:
CLR C
MOV A, @R0
ADD A, R3
MOV R3, A
JNC SKIP
INC R2
SKIP:
INC R0
DJNZ R1, LOOP
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;这样结果被保存到R2、R3中, 然后需要写一个循环右移3位的程序。&lt;/p&gt;
&lt;figure data-raw=&quot;MOV R4, #03H
LOOP2:
RRC R2
RRC R3
DJNZ R4, LOOP2

MOV 40H, R3
; 右移3次后R2的低4位为0, 结果保存在R3中
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;MOV R4, #03H
LOOP2:
RRC R2
RRC R3
DJNZ R4, LOOP2

MOV 40H, R3
; 右移3次后R2的低4位为0, 结果保存在R3中
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;这样R3中求得的是不带四舍五入的结果。&lt;/p&gt;
&lt;p&gt;如果需要带四舍五入的话第一种方法是判断最后一次右移时最低位是否为$1$， ($1 / 2 = 0.5$)。&lt;/p&gt;
&lt;figure data-raw=&quot;MOV R4, #03H
LOOP2:
RRC R2
RRC R3
DJNZ R4, LOOP2

JNC SKIP2
INC R3
SKIP2:
MOV 40H, R3
; 右移3次后R2肯定为0
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;MOV R4, #03H
LOOP2:
RRC R2
RRC R3
DJNZ R4, LOOP2

JNC SKIP2
INC R3
SKIP2:
MOV 40H, R3
; 右移3次后R2肯定为0
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;这样是带四舍五入的结果。&lt;/p&gt;
&lt;p&gt;第二种方法，8个8位数相加求平均值，要求四舍五入的话，只需要在这8个数求和后再加4（&lt;code&gt;0100B&lt;/code&gt;），之后右移3次。&lt;/p&gt;
&lt;figure data-raw=&quot;ADD A, #04H
MOV R3, A
JNC SKIP2
INC R2

SKIP2:
MOV R4, #03H
LOOP2:
RRC R2
RRC R3
DJNZ R4, LOOP2
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;ADD A, #04H
MOV R3, A
JNC SKIP2
INC R2

SKIP2:
MOV R4, #03H
LOOP2:
RRC R2
RRC R3
DJNZ R4, LOOP2
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;结果保存在R3中。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&quot;中断系统&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn-mcs8051/#%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F&quot; title=&quot;中断系统&quot;&gt;&lt;/a&gt;中断系统&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;8051的外部中断有低电平触发和下降沿触发两种触发方式。外部中断1的中断向量地址是&lt;code&gt;0013H&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;在响应中断时, 单片机自动生成一条长调用指令&lt;code&gt;LCALL addr16&lt;/code&gt;, 其地址为中断入口地址。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;中断源&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;入口地址&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;INT0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0003H&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;T0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;000BH&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;INT1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0013H&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;T1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;001BH&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;串行口&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;0023H&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;通常在中断入口地址处放一条&lt;strong&gt;无条件转移指令&lt;/strong&gt;&lt;code&gt;*JMP&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;内部查询顺序同入口地址的顺序，由高到低。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;执行指令&lt;code&gt;MOV IP, #0BH&lt;/code&gt;( &lt;code&gt;#00001011B&lt;/code&gt;)后, 中断优先级最高者为&lt;code&gt;PX0&lt;/code&gt;, 最低为&lt;code&gt;PS&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;IP: 中断优先级寄存器, 其前3为无意义, 后5位( IP.4至IP.0)为：&lt;code&gt;PS&lt;/code&gt;, &lt;code&gt;PT1&lt;/code&gt;, &lt;code&gt;PX1&lt;/code&gt;, &lt;code&gt;PT0&lt;/code&gt;, &lt;code&gt;PX0&lt;/code&gt;, 分别对应串行口、定时器T1、外部中断1、定时器0、外部中断0。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;IP&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PS&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PT1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PX1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PT0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PX0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;单片机复位以后, IP的内容为0, 各个中断源均为低优先级中断。&lt;/p&gt;
&lt;p&gt;在同时收到几个同一优先级的中断请求时, 中断响应取决于内部查询顺序, 其顺序由高到低为：&lt;code&gt;INT0&lt;/code&gt;、&lt;code&gt;T0&lt;/code&gt;、&lt;code&gt;INT1&lt;/code&gt;、&lt;code&gt;T1&lt;/code&gt;、&lt;code&gt;串行口&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;当中断源均为同一优先级时, 当它们同时申请中断时CPU首先响应外部中断0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;8051的晶振频率为12MHz, 则最短的外部中断响应时间为3${\mu}$s, 最长的外部中断响应时间为12${\mu}s$。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;中断标记位于单片机寄存器的&lt;code&gt;TCON&lt;/code&gt;和&lt;code&gt;SCON&lt;/code&gt;中。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;TCON&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TF1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TR1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TF0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TR0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IE1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IT1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IE0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IT0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;SCON&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;REN&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TB8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RB8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TI&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RI&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;&lt;code&gt;TCON&lt;/code&gt;中&lt;code&gt;TF1&lt;/code&gt;和&lt;code&gt;TF0&lt;/code&gt;为定时器/计数器中断标志位, &lt;code&gt;TR1&lt;/code&gt;和&lt;code&gt;TR0&lt;/code&gt;为定时/计数启动位, &lt;code&gt;IE1&lt;/code&gt;和&lt;code&gt;IE0&lt;/code&gt;为外部中断标志位, &lt;code&gt;IT1&lt;/code&gt;和&lt;code&gt;IT0&lt;/code&gt;为选择外部中断为边沿触发(1)还是电平触发(0)方式。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SCON&lt;/code&gt;中前几位与串行口有关，第1位和第2位的&lt;code&gt;TI&lt;/code&gt;和&lt;code&gt;RI&lt;/code&gt;(是大写字母I不是数字1)分别为串行口中断发送中断请求标志位(发送成功后置1)和接受中断请求标志位( 接受成功后置1)。串口中断无法硬件清零, 只能软件清零。&lt;/p&gt;
&lt;p&gt;当IE中EA为1、ES为1时，TI或RI为1时，CPU执行无条件转移指令&lt;code&gt;LJMP 0023H&lt;/code&gt;, 执行串行口中断服务程序。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;要使8051能够响应定时器T1的中断和串行口中断, 不响应其他中断, 则中断允许寄存器&lt;code&gt;IE&lt;/code&gt;的内容为&lt;code&gt;98H&lt;/code&gt;(&lt;code&gt;10011000B&lt;/code&gt;)。&lt;/p&gt;
&lt;p&gt;中断允许寄存器IE：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;IE&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;EA&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;ES&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;ET1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;EX1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;ET0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;EX0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;&lt;code&gt;EA&lt;/code&gt;为总控制位, 当&lt;code&gt;EA&lt;/code&gt;为1时, CPU才可以响应中断请求。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ES&lt;/code&gt;为串行口中断允许位, &lt;code&gt;ET1&lt;/code&gt;和&lt;code&gt;ET0&lt;/code&gt;为定时器中断允许位, &lt;code&gt;EX1&lt;/code&gt;和&lt;code&gt;EX0&lt;/code&gt;为外部中断允许位。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&quot;定时器和计数器&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn-mcs8051/#%E5%AE%9A%E6%97%B6%E5%99%A8%E5%92%8C%E8%AE%A1%E6%95%B0%E5%99%A8&quot; title=&quot;定时器和计数器&quot;&gt;&lt;/a&gt;定时器和计数器&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;使T0工作方式1的溢出周期最长的初值是&lt;code&gt;0000H&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;定时器/计数器工作在方式0为13位计数器, 由&lt;code&gt;TLX&lt;/code&gt;的低5位和&lt;code&gt;THX&lt;/code&gt;的高8位组成13位计数器, 最大值为$2^{13}-1 = 8191$, 晶振频率12MHz下计时周期最长为8.192ms。工作在方式1时由均为8位的&lt;code&gt;TLX&lt;/code&gt;和&lt;code&gt;THX&lt;/code&gt;组成16位计数器, 最大值为65535, 晶振频率为12M下最长为65.536ms。&lt;/p&gt;
&lt;p&gt;当定时器/计数器工作在方式2时, 可以循环定时/计数。当计数溢出后, 自动将8位的&lt;code&gt;THX&lt;/code&gt;装入8位的&lt;code&gt;TLX&lt;/code&gt;中, 可省去重装初值的时间, 最大值为&lt;code&gt;255&lt;/code&gt;, 晶振频率12M下计时周期最长为0.256ms。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;T1&lt;/code&gt;配置为方式3时, 停止计数, 方式3只适用于定时器0。&lt;/p&gt;
&lt;p&gt;定时器&lt;code&gt;T0&lt;/code&gt;的方式3将其分为两个8位定时器, 其中&lt;code&gt;TH0&lt;/code&gt;只能做定时器使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;设8051单片机的晶振频率为12MHz, 定时器作计数器使用时, 其计数输入信号的最高频率为500KHz。&lt;/p&gt;
&lt;p&gt;当定时器用作计数器时, 当检测到引脚上的负跳变时计数器的值增一。检测下降沿需要2个机器周期, 即24个震荡周期, 所以输入信号最高频率为 $12M \div 24 = 500KHz$。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用定时器方式2扩展一个下降沿触发的外部中断, 计数初值应为&lt;code&gt;FFH&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;此处定时器2以计数器方式运行, 当检测到一个下降沿后, 计数器加一后溢出, 因此会执行定时器中断的中断子程序。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;2020年12月3日：
前两天感冒, 休息了几天(&lt;del&gt;打了两天的游戏&lt;/del&gt;)后继续。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;串行口&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn-mcs8051/#%E4%B8%B2%E8%A1%8C%E5%8F%A3&quot; title=&quot;串行口&quot;&gt;&lt;/a&gt;串行口&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;串行口TXD为高电平, 表示这是数据位或停止位或空闲状态。&lt;/p&gt;
&lt;p&gt;串行口工作在方式1时, &lt;code&gt;TXD&lt;/code&gt;用来发送数据、&lt;code&gt;RXD&lt;/code&gt;用来接受数据。方式1的一帧数据为10位, 起始为为0, 停止位为1, 数据位和空闲状态均可能为0或1。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;串行口工作在方式3时, 发送的第9位数据要事先写入寄存器&lt;code&gt;SCON&lt;/code&gt;的&lt;code&gt;TB8&lt;/code&gt;, 接收的第9位数据被写入同一寄存器的&lt;code&gt;RB8&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;串行口控制寄存器SCON：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;SCON&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;REN&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TB8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RB8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TI&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RI&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;其中&lt;code&gt;SM0&lt;/code&gt;、&lt;code&gt;SM1&lt;/code&gt;为串口的工作方式选择位, 方式0为同步移位寄存器方式, 方式1为8位异步收发, 方式2和方式3为9位异步收发。&lt;/p&gt;
&lt;p&gt;波特率：串行口每秒钟传送的比特位数，单位bits/s。&lt;/p&gt;
&lt;p&gt;方式0的波特率&lt;strong&gt;固定&lt;/strong&gt;为 $f_{osc}/12$, 方式2的波特率为 $f_{osc}/64$ 或 $f_{osc}/32$ (由SMOD控制)。&lt;/p&gt;
&lt;p&gt;方式1的波特率和方式3的波特率可变, 公式为 $(2^{SMOD} / 32) \times 定时器T1的溢出率$。&lt;/p&gt;
&lt;p&gt;T1的溢出率为定时器T1的周期的倒数，定时器的周期为&lt;/p&gt;
&lt;p&gt;$$T = \frac{12\times (2^n - X )}{f_{osc}}$$&lt;/p&gt;
&lt;p&gt;当T1工作在方式2时，n为8，波特率为：&lt;/p&gt;
&lt;p&gt;$$波特率=\frac{(2^{SMOD} \div 32) \times f_{osc}}{12 \times (256 - X)}$$&lt;/p&gt;
&lt;p&gt;$X$为定时器T1的初值。&lt;/p&gt;
&lt;p&gt;串口工作在方式1，波特率为2400，则每秒钟最大能发送/接收 $2400 \div 10 = 240Byte$的数据。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;单片机工作在方式1时, 1帧数据为1个起始位、8个数据位、1个停止位共10位。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;8051的UART工作在方式3，要求每秒钟能传送不少于900个字节的数据，则波特率应当大于 $900 \times 8 = 7200bits/s$。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;比特率2400Kbits/s，时钟频率12M，PC机发送8个字节的数据存到单片机的&lt;code&gt;30H-37H&lt;/code&gt;中，随后单片机发送2个确认字节&lt;code&gt;55H&lt;/code&gt;和&lt;code&gt;AAH&lt;/code&gt;给PC机，使用查询方式。&lt;/p&gt;
&lt;figure data-raw=&quot;ORG 0000H
MAIN:
MOV SCON, #50H
; 串口使用方式1，且允许接收
MOV PCON, #00H
; 波特率不加倍
MOV TMOD, #20H
; 定时器1使用方式2

MOV TL1, #0F3H
MOV TH1, #0F3H
SETB TR1

LOOP:
MOV R0, #30H
MOV R1, #08H

REC:
JNB RI, $
MOV @R0, SBUF
CLR RI ; 软件清零RI
INC R0
DJNZ R1, REC

MOV SBUF, #55H
JNB TI, $
CLR TI

MOV SBUF, #0AAH
JNB TI, $
CLR TI
AJMP LOOP

END
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;ORG 0000H
MAIN:
MOV SCON, #50H
; 串口使用方式1，且允许接收
MOV PCON, #00H
; 波特率不加倍
MOV TMOD, #20H
; 定时器1使用方式2

MOV TL1, #0F3H
MOV TH1, #0F3H
SETB TR1

LOOP:
MOV R0, #30H
MOV R1, #08H

REC:
JNB RI, $
MOV @R0, SBUF
CLR RI ; 软件清零RI
INC R0
DJNZ R1, REC

MOV SBUF, #55H
JNB TI, $
CLR TI

MOV SBUF, #0AAH
JNB TI, $
CLR TI
AJMP LOOP

END
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;单片机接收到数据后，RI被置1，代表SBUF中的数据有效，取走SBUF中的数据后需要软件清零RI（串口中断不会自动清零RI）。&lt;/p&gt;
&lt;p&gt;当单片机执行写SBUF操作时，串口发送开始，TI被自动置1，在发送完成后TI被自动清0。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;2020年12月7日：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;IO口amp;外部存储器拓展&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn-mcs8051/#IO%E5%8F%A3amp;%E5%A4%96%E9%83%A8%E5%AD%98%E5%82%A8%E5%99%A8%E6%8B%93%E5%B1%95&quot; title=&quot;IO口amp;外部存储器拓展&quot;&gt;&lt;/a&gt;I/O口 &amp;amp; 外部存储器拓展&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;8051使用指令&lt;code&gt;MOVX A, @R0&lt;/code&gt;读外部数据存储器时，不起作用的信号是&lt;code&gt;WR&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;8051在使用&lt;code&gt;MOVX @DPTR&lt;/code&gt;类指令读外部数据存储器时，P0和P2先输出外部数据的地址，单片机发出的&lt;code&gt;ALE&lt;/code&gt;信号的负跳沿将P0口输出的地址锁存在地址锁存器(74HC573)里，之后单片机发出&lt;code&gt;RD&lt;/code&gt;信号，读取外部数据存储器（RAM）的数据到总线再传送到P0口上。最后单片机从P0口读取数据保存到A中。&lt;/p&gt;
&lt;p&gt;如果是写外部数据存储器时，单片机将不发出&lt;code&gt;RD&lt;/code&gt;信号而是&lt;code&gt;WR&lt;/code&gt;信号，将A中的数据写入外部数据存储器中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;存储器芯片6264需要13根地址线。&lt;/p&gt;
&lt;p&gt;62256的容量为 $256Kbit \div 8 = 32KB = 2^{15}$, 需要15根地址线。&lt;/p&gt;
&lt;p&gt;6264的容量为 $64Kbit \div 8 = 8KB = 2^{13}$，所以需要13根地址线。&lt;/p&gt;
&lt;p&gt;6116容量为 $16Kbit \div 8 = 2KB = 2^{11}$, 需要11根地址线。&lt;/p&gt;
&lt;p&gt;计算方法是62$X$的 $容量=X \div 8(K)$。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用16位地址模式时，8051的外部数据存储器寻址空间为64KB。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;基于8051的单片机系统能拓展的外部数据存储器容量无限制。&lt;/p&gt;
&lt;p&gt;有的书上说最大只能拓展64KB，实际是最大寻址空间为64KB，拓展的外部数据存储器容量无限制。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;8051的程序存储器可用来存放用户程序和数据。 例如使用&lt;code&gt;DW&lt;/code&gt;或&lt;code&gt;DB&lt;/code&gt;指令用来定义数据。&lt;/p&gt;
&lt;p&gt;所以应用程序也可以使用&lt;code&gt;MOVC A, @A+DPTR&lt;/code&gt;访问程序存储器中的数据。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;除此之外LED数码管和外部存储器拓展、外部I/O设备拓展部分有很多需要根据线路图计算地址和DA转换的题，因为线路图源自老师提供的PDF，而老师为PDF加了密码，意味着不允许外传，所以我就不放到博客上面了，&lt;del&gt;除非我自己用Porteus画一个类似的&lt;/del&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;6&quot;&gt;
&lt;li&gt;&lt;p&gt;LED段码入口地址8004H，位选入口地址8002H，将30H-32H保存的6个压缩BCD码发送到6位共阴极数码管上显示， 要求编写延时1ms的子程序。&lt;/p&gt;
&lt;figure data-raw=&quot;MAIN:
MOV R0, #30H
; R2用来计数
MOV R2, #03H
; R3用来位选
MOV R3, #01H

LOOP:
MOV A, @R0
SWAP A
ANL A, #0FH
MOV DPTR, #TAB
MOVC A, @A+DPTR
; 取高4位BCD码对应的段码

MOV DPTR, #8004H
MOVX A, @A+DPTR
; 先送段码

MOV A, R3
MOV DPTR, #8002H
MOVX @DPTR, A
RL A
MOV R3, A
; 再送位选

LCALL DELAY

MOV A, @R0
ANL A, #0FH
MOV DPTR, #TAB
MOVC A, @A+DPTR
; 取低4位BCD码对应的段码

MOV DPTR, #8004H
MOVX A, @A+DPTR
; 送段码

MOV A, R3
MOV DPTR, #8002H
MOVX @DPTR, A
RL A
MOV R3, A
; 送位选

LCALL DELAY
INC R0

DJNZ R2, LOOP

DELAY:
MOV R7, #250
DL:
NOP
NOP
DJNZ R7, DL
RET

TAB:
DB 3FH, 06H, 5BH, 4FH, 66H, 6DH, 7DH, 07H, 7FH, 6FH

END
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;MAIN:
MOV R0, #30H
; R2用来计数
MOV R2, #03H
; R3用来位选
MOV R3, #01H

LOOP:
MOV A, @R0
SWAP A
ANL A, #0FH
MOV DPTR, #TAB
MOVC A, @A+DPTR
; 取高4位BCD码对应的段码

MOV DPTR, #8004H
MOVX A, @A+DPTR
; 先送段码

MOV A, R3
MOV DPTR, #8002H
MOVX @DPTR, A
RL A
MOV R3, A
; 再送位选

LCALL DELAY

MOV A, @R0
ANL A, #0FH
MOV DPTR, #TAB
MOVC A, @A+DPTR
; 取低4位BCD码对应的段码

MOV DPTR, #8004H
MOVX A, @A+DPTR
; 送段码

MOV A, R3
MOV DPTR, #8002H
MOVX @DPTR, A
RL A
MOV R3, A
; 送位选

LCALL DELAY
INC R0

DJNZ R2, LOOP

DELAY:
MOV R7, #250
DL:
NOP
NOP
DJNZ R7, DL
RET

TAB:
DB 3FH, 06H, 5BH, 4FH, 66H, 6DH, 7DH, 07H, 7FH, 6FH

END
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;打印机数据输入接口和P1直接相连，STB接口和P3.4相连，BUSY接口和P3.3相连，不使用ACK应答信号，编写将外部存储器&lt;code&gt;1000H-100FH&lt;/code&gt;的数据发送到打印机打印的子程序。&lt;/p&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
 &lt;img src=&quot;/posts/learn-mcs8051/images/1.jpg&quot;&gt;
&lt;/div&gt;
&lt;br&gt;

&lt;figure data-raw=&quot;PRINT:
MOV DPTR, #1000H
MOV R2, #10H

LOOP:
JB P3.3, $
; 确保打印机处于空闲状态
MOVX A, @DPTR
MOV P1, A
CLR P3.4
SETB P3.4
INC DPTR
DJNZ R2, LOOP
RET
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;PRINT:
MOV DPTR, #1000H
MOV R2, #10H

LOOP:
JB P3.3, $
; 确保打印机处于空闲状态
MOVX A, @DPTR
MOV P1, A
CLR P3.4
SETB P3.4
INC DPTR
DJNZ R2, LOOP
RET
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;如果打印机没有和P1直接相连，而是连接到数据锁存器上（74HC374），锁存器的时钟信号的入口地址为&lt;code&gt;A000H&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;使用堆栈保护间接寻址寄存器的值。&lt;/p&gt;
&lt;figure data-raw=&quot;PRINT:
MOV R2, #10H
MOV DPTR, #1000H
LOOP:
JB P3.3, $
; 确保打印机处于空闲状态

MOVX A, @DPTR
PUSH DPL
PUSH DPH
MOV DPTR, #0A000H
MOVX @DPTR, A
POP DPH
POP DPL

CLR P3.4
SETB P3.4
INC DPTR
DJNZ R2, LOOP
RET
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;PRINT:
MOV R2, #10H
MOV DPTR, #1000H
LOOP:
JB P3.3, $
; 确保打印机处于空闲状态

MOVX A, @DPTR
PUSH DPL
PUSH DPH
MOV DPTR, #0A000H
MOVX @DPTR, A
POP DPH
POP DPL

CLR P3.4
SETB P3.4
INC DPTR
DJNZ R2, LOOP
RET
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&quot;SFR列表&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/learn-mcs8051/#SFR%E5%88%97%E8%A1%A8&quot; title=&quot;SFR列表&quot;&gt;&lt;/a&gt;SFR列表&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;87H&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;PCON&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SMOD&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PD&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IDL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;br&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;88H&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;TCON&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TF1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TR1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TF0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TR0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IE1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IT1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IE0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;IT0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;br&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;89H&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;TMOD&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;GATE&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;C/T&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;M1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;M0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;GATE&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;C/T&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;M1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;M0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;br&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;98H&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;SCON&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;SM2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;REN&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TB8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RB8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;TI&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RI&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;br&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;A8H&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;IE&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;EA&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;ES&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;ET1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;EX1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;ET0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;EX0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;br&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;B8H&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;IP&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PS&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PT1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PX1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PT0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;PX0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;br&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;D0H&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D7&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D6&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D5&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D4&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D3&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;D0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;PSW&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Cy&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Ac&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;F0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RS1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;RS0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;OV&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;-&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;P&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;hr&gt;

    </content>
    
    
    <category term="学习资料" label="学习资料" scheme="https://blog.starry-s.moe/categories/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" />
    
    <category term="单片机" label="单片机" scheme="https://blog.starry-s.moe/categories/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/%E5%8D%95%E7%89%87%E6%9C%BA/" />
    
    
    <category term="单片机" label="单片机" scheme="https://blog.starry-s.moe/tags/%E5%8D%95%E7%89%87%E6%9C%BA/" />
    
    <category term="学习资料" label="学习资料" scheme="https://blog.starry-s.moe/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" />
    
  </entry>
  
  
  
  <entry>
    <title>惠普光影精灵4在Arch Linux下使用Optimus Manager配置双显卡</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/archlinux-pavilion-gaming-laptop/" />
    <id>https://blog.starry-s.moe/posts/archlinux-pavilion-gaming-laptop/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2020-07-19T07:29:57.000Z</published>
    
    
    <updated>2021-02-23T10:58:33.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;自从高中毕业至今这台笔记本用了将近两年, 已经记不清当初为什么买了这台笔记本, 刚买来电脑第一次装Arch Linux时遇到了一些坑, 不过大多数的问题Google折腾一会或随着后续的软件更新基本上就都解决了, 唯独配置双显卡这个问题在用了两年后才算是找到了比较满意的解决方法（大概是）, &lt;del&gt;尽管现在这电脑已经停产了, 就算有人买了这台电脑也不一定会拿他装Arch Linux, 不过我还是打算把这个问题的解决过程记录一下&lt;/del&gt;（本篇讲的方法应该是适用于大多数N卡+i卡的笔记本电脑的, 只是有些细节不一样）, 以备我后续重装系统时有个参考。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;自从高中毕业至今这台笔记本用了将近两年, 已经记不清当初为什么买了这台笔记本, 刚买来电脑第一次装Arch Linux时遇到了一些坑, 不过大多数的问题Google折腾一会或随着后续的软件更新基本上就都解决了, 唯独配置双显卡这个问题在用了两年后才算是找到了比较满意的解决方法（大概是）, &lt;del&gt;尽管现在这电脑已经停产了, 就算有人买了这台电脑也不一定会拿他装Arch Linux, 不过我还是打算把这个问题的解决过程记录一下&lt;/del&gt;（本篇讲的方法应该是适用于大多数N卡+i卡的笔记本电脑的, 只是有些细节不一样）, 以备我后续重装系统时有个参考。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;Kaleidoscope&quot;,
        artist: &quot;Vicetone / Grace Grundy&quot;,
        url: &quot;https://music.starry-s.moe/music/560e_0558_060b_adc45c798222ffa86a4d1a0cb6ddf18f.m4a&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/18671906464338403.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#A26208&quot;
    }]
});
&lt;/script&gt; 

&lt;h2 id=&quot;先描述一下踩坑经过&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/archlinux-pavilion-gaming-laptop/#%E5%85%88%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%8B%E8%B8%A9%E5%9D%91%E7%BB%8F%E8%BF%87&quot; title=&quot;先描述一下踩坑经过&quot;&gt;&lt;/a&gt;先描述一下踩坑经过&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;本段略微有些废话, 可以跳过&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;记得在刚买来这台笔记本（2018年夏）, Linux内核还没升到5.0的时候, 使用live CD装系统时会遇到&lt;code&gt;lspci&lt;/code&gt;卡死, 关机的时候会卡死的问题, 查系统日记都是一堆ACPI的报错。当时网上查了一下大概是内核和驱动一些bug, 没找到解决办法, Google到论坛的帖子说是在关机/重启发生卡死时只能直接长按电源关机就（找不到搜的回答了）&lt;/p&gt;
&lt;p&gt;装完系统后安装显卡驱动时想通过Bumblebee + bbswitch切换双显卡, 于是装了Gnome然后照着wiki配置完Bumblebee和bbswitch后重启电脑直接死机。&lt;/p&gt;
&lt;p&gt;经过多次重装系统的折磨后, 发现只装Bumblebee不装bbswitch不&lt;code&gt;systemctl enable bumblebeed.service&lt;/code&gt;时, 能正常开机, 然后之前遇到的两个问题也莫名其妙就好了, 即系统重启关机不会卡死, &lt;code&gt;lspci&lt;/code&gt;也正常了（迷）&lt;/p&gt;
&lt;p&gt;之后, 在不装bbswitch的情况下, 启动&lt;code&gt;bumblebeed.service&lt;/code&gt;再用&lt;code&gt;optirun&lt;/code&gt;和&lt;code&gt;primusrun&lt;/code&gt;这种方式用独显运行程序都没有问题。&lt;/p&gt;
&lt;p&gt;当时因为电脑不装Bumblebee的话就没法正常关机, 于是就一直用着Bumblebee切换双显卡, 玩游戏性能比Windows下差一点, 别的都没啥问题。&lt;/p&gt;
&lt;p&gt;今年年初买了一块拓展屏想搞双显示器, 本来显示器应该插上HDMI直接就能用的, 但是因为这电脑的HDMI走的独显输出, Bumblebee不能直接用, wiki上教的创建个intel的虚拟输出啥的方法有试过但是没成功, 于是又Google了一下后卸了Bumblebee改用&lt;a href=&quot;https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Use_NVIDIA_graphics_only&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;NVIDIA Optimus 只使用独显&lt;/a&gt;的方式, 这样双显示器倒是能用了, 但是如果笔记本只用电池没连着拓展屏的时候还跑着独显这也太费电了。&lt;/p&gt;
&lt;p&gt;所以最后找到了能切换显卡的&lt;a href=&quot;https://github.com/Askannz/optimus-manager&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Optimus Manager&lt;/a&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;查了一下这款电脑的type-c接口支持DP1.2视频输出，和HDMI 2.0一样支持4K 60fps，走的是intel集成显卡，可以在独显不通电的时候输出画面到第三方显示器。所以买一根type-c转DP线就可以点亮第三方显示器（前提是你的显示器有DP接口），但是切换显卡还是得依靠Bunblebee或Optimus Manager这类的软件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;安装过程&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/archlinux-pavilion-gaming-laptop/#%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B&quot; title=&quot;安装过程&quot;&gt;&lt;/a&gt;安装过程&lt;/h2&gt;
&lt;p&gt;照着&lt;a href=&quot;https://wiki.archlinux.org/index.php/NVIDIA_Optimus&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Wiki&lt;/a&gt;和Optimus Manager的&lt;a href=&quot;https://github.com/Askannz/optimus-manager#optimus-manager&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;README&lt;/a&gt;。首先安装好显卡驱动相关的软件, 如果有Bumblebee的话使用&lt;code&gt;systemctl disable bumblebeed&lt;/code&gt;停用。&lt;/p&gt;
&lt;p&gt;首先清除（记得备份）&lt;code&gt;/etc/X11/xorg.conf.d/&lt;/code&gt;下的配置文件, 并删掉（记得备份）&lt;code&gt;/etc/X11/xorg.conf&lt;/code&gt;（如果有的话）, 因为Optimus Manager会自动生成配置文件存放到&lt;code&gt;/etc/X11/xorg.conf.d/&lt;/code&gt;里面, 所以建议安装前把显示配置相关的文件都清除掉。&lt;/p&gt;
&lt;p&gt;使用Arch Linux CN源或者通过AUR Helper安装&lt;code&gt;optimus-manager&lt;/code&gt;。&lt;/p&gt;
&lt;figure data-raw=&quot;# Arch Linux CN
$ sudo pacman -S optimus-manager
# AUR
$ yay -S optimus-manager
&quot; data-info=&quot;language-text&quot; data-lang=&quot;text&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# Arch Linux CN
$ sudo pacman -S optimus-manager
# AUR
$ yay -S optimus-manager
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;因为我用的Gnome, 参照&lt;a href=&quot;https://github.com/Askannz/optimus-manager#important--gnome-and-gdm-users&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;README中说的&lt;/a&gt;卸载掉&lt;code&gt;gdm&lt;/code&gt;并安装&lt;code&gt;gdm-prime&lt;/code&gt;&lt;sup&gt;AUR&lt;/sup&gt;。（国内下载源代码的速度极慢建议挂梯子, 或者挂梯子克隆&lt;a href=&quot;https://gitlab.gnome.org/GNOME/gdm&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;GDM的代码&lt;/a&gt;到&lt;code&gt;~/.cache/yay/gdm-prime/gdm&lt;/code&gt;下。）&lt;/p&gt;
&lt;p&gt;修改&lt;code&gt;/etc/gdm/custom.conf&lt;/code&gt;, 移除&lt;code&gt;WaylandEnable=false&lt;/code&gt;一行前面的&lt;code&gt;#&lt;/code&gt;禁用Wayland而使用X。&lt;/p&gt;
&lt;h3 id=&quot;修改配置文件&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/archlinux-pavilion-gaming-laptop/#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6&quot; title=&quot;修改配置文件&quot;&gt;&lt;/a&gt;修改配置文件&lt;/h3&gt;
&lt;figure data-raw=&quot;$ sudo cp /usr/share/optimus-manager.conf /etc/optimus-manager/optimus-manager.conf
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ sudo cp /usr/share/optimus-manager.conf /etc/optimus-manager/optimus-manager.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;不要编辑&lt;code&gt;/usr/share/&lt;/code&gt;下的文件, 编辑&lt;code&gt;/etc/optimus-manager/optimus-manager.conf&lt;/code&gt;, 将切换方式设为&lt;code&gt;switching=none&lt;/code&gt;, 不推荐使用bbswitch（见&lt;a href=&quot;/posts/archlinux-pavilion-gaming-laptop/#Others&quot;&gt;后续第一条&lt;/a&gt;）, 设置&lt;code&gt;pci_power_control=yes&lt;/code&gt;让PCI Power Management切换显卡。&lt;/p&gt;
&lt;p&gt;之后根据需求来修改开机自动选择显卡：&lt;/p&gt;
&lt;figure data-raw=&quot;startup_mode=auto
startup_auto_battery_mode=intel
startup_auto_extpower_mode=nvidia
&quot; data-info=&quot;language-conf&quot; data-lang=&quot;conf&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;startup_mode=auto
startup_auto_battery_mode=intel
startup_auto_extpower_mode=nvidia
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;这里我设置的是用电池时使用集成显卡, 用电源时使用独显。&lt;/p&gt;
&lt;p&gt;最后贴一下全部的配置文件, 除了上述的几处修改以外其他均为默认值, 仅供参考。&lt;/p&gt;
&lt;figure data-raw=&quot;[optimus]

# This parameter defines the method used to power switch the Nvidia card. See the documentation
# for a complete description of what each value does. Possible values :
#
# - nouveau : load the nouveau module on the Nvidia card.
# - bbswitch : power off the card using the bbswitch module (requires the bbswitch dependency).
# - acpi_call : try various ACPI method calls to power the card on and off (requires the acpi_call dependency)
# - custom: use custom scripts at /etc/optimus-manager/nvidia-enable.sh and /etc/optimus-manager/nvidia-disable.sh
# - none : do not use an external module for power management. For some laptop models it&#039;s preferable to
#          use this option in combination with pci_power_control (see below).
switching=none

# Enable PCI power management in Intel mode.
# This option is incompatible with acpi_call and bbswitch, so it will be ignored in those cases.
pci_power_control=yes

# Remove the Nvidia card from the PCI bus.
# May prevent crashes caused by power switching.
# Ignored if switching=nouveau or switching=bbswitch.
pci_remove=yes

# Reset the Nvidia card at the PCI level before reloading the nvidia module.
# Ensures the card is in a fresh state before reloading the nvidia module.
# May fix some switching issues. Possible values :
#
# - no : does not perform any reset
# - function_level : perform a light &amp;quot;function-level&amp;quot; reset
# - hot_reset : perform a &amp;quot;hot reset&amp;quot; of the PCI bridge. ATTENTION : this method messes with the hardware
#         directly, please read the online documentation of optimus-manager before using it.
#         Also, it will perform a PCI remove even if pci_remove=no.
#
pci_reset=no

# Automatically log out the current desktop session when switching GPUs.
# This feature is currently supported for the following DE/WM :
# KDE Plasma, GNOME, XFCE, LXDE, Deepin, i3, Openbox, AwesomeWM, bspwm
# If this option is disabled or you use a different desktop environment,
# GPU switching only becomes effective at the next graphical session login.
auto_logout=yes

# GPU mode to use at computer startup. Possible values: nvidia, intel, hybrid, auto
# &amp;quot;auto&amp;quot; is a special mode that auto-detects if the computer is running on battery
# and selects a proper GPU mode. See the other options below.
startup_mode=auto
# GPU mode to select when startup_mode=auto and the computer is running on battery.
# Possible values: nvidia, intel, hybrid
startup_auto_battery_mode=intel
# GPU mode to select when startup_mode=auto and the computer is running on external power.
# Possible values: nvidia, intel, hybrid
startup_auto_extpower_mode=nvidia


[intel]

# Driver to use for the Intel GPU. Possible values : modesetting, intel
# To use the intel driver, you need to install the package &amp;quot;xf86-video-intel&amp;quot;.
driver=modesetting

# Acceleration method (corresponds to AccelMethod in the Xorg configuration).
# Only applies to the intel driver.
# Possible values : sna, xna, uxa
# Leave blank for the default (no option specified)
accel=

# Enable TearFree option in the Xorg configuration.
# Only applies to the intel driver.
# Possible values : yes, no
# Leave blank for the default (no option specified)
tearfree=

# DRI version. Possible values : 2, 3
DRI=3

# Whether or not to enable modesetting for the nouveau driver.
# Does not affect modesetting for the Intel GPU driver !
# This option only matters if you use nouveau as the switching backend.
modeset=yes

[nvidia]

# Whether or not to enable modesetting. Required for PRIME Synchronization (which prevents tearing).
modeset=yes

# Whether or not to enable the NVreg_UsePageAttributeTable option in the Nvidia driver.
# Recommended, can cause poor CPU performance otherwise.
PAT=yes

# DPI value. This will be set using the Xsetup script passed to your login manager.
# It will run the command
# xrandr --dpi &lt;DPI&gt;
# Leave blank for the default (the above command will not be run).
DPI=96

# If you&#039;re running an updated version of xorg-server (let&#039;s say to get PRIME Render offload enabled),
# the nvidia driver may not load because of an ABI version mismatch. Setting this flag to &amp;quot;yes&amp;quot;
# will allow the loading of the nvidia driver.
ignore_abi=no

# Set to yes if you want to use optimus-manager with external Nvidia GPUs (experimental)
allow_external_gpus=no

# Comma-separated list of Nvidia-specific options to apply.
# Available options :
# - overclocking : enable CoolBits in the Xorg configuration, which unlocks clocking options
#   in the Nvidia control panel. Note: does not work in hybrid mode.
# - triple_buffer : enable triple buffering.
options=overclocking
&quot; data-info=&quot;language-conf&quot; data-lang=&quot;conf&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;[optimus]

# This parameter defines the method used to power switch the Nvidia card. See the documentation
# for a complete description of what each value does. Possible values :
#
# - nouveau : load the nouveau module on the Nvidia card.
# - bbswitch : power off the card using the bbswitch module (requires the bbswitch dependency).
# - acpi_call : try various ACPI method calls to power the card on and off (requires the acpi_call dependency)
# - custom: use custom scripts at /etc/optimus-manager/nvidia-enable.sh and /etc/optimus-manager/nvidia-disable.sh
# - none : do not use an external module for power management. For some laptop models it&#039;s preferable to
#          use this option in combination with pci_power_control (see below).
switching=none

# Enable PCI power management in Intel mode.
# This option is incompatible with acpi_call and bbswitch, so it will be ignored in those cases.
pci_power_control=yes

# Remove the Nvidia card from the PCI bus.
# May prevent crashes caused by power switching.
# Ignored if switching=nouveau or switching=bbswitch.
pci_remove=yes

# Reset the Nvidia card at the PCI level before reloading the nvidia module.
# Ensures the card is in a fresh state before reloading the nvidia module.
# May fix some switching issues. Possible values :
#
# - no : does not perform any reset
# - function_level : perform a light &quot;function-level&quot; reset
# - hot_reset : perform a &quot;hot reset&quot; of the PCI bridge. ATTENTION : this method messes with the hardware
#         directly, please read the online documentation of optimus-manager before using it.
#         Also, it will perform a PCI remove even if pci_remove=no.
#
pci_reset=no

# Automatically log out the current desktop session when switching GPUs.
# This feature is currently supported for the following DE/WM :
# KDE Plasma, GNOME, XFCE, LXDE, Deepin, i3, Openbox, AwesomeWM, bspwm
# If this option is disabled or you use a different desktop environment,
# GPU switching only becomes effective at the next graphical session login.
auto_logout=yes

# GPU mode to use at computer startup. Possible values: nvidia, intel, hybrid, auto
# &quot;auto&quot; is a special mode that auto-detects if the computer is running on battery
# and selects a proper GPU mode. See the other options below.
startup_mode=auto
# GPU mode to select when startup_mode=auto and the computer is running on battery.
# Possible values: nvidia, intel, hybrid
startup_auto_battery_mode=intel
# GPU mode to select when startup_mode=auto and the computer is running on external power.
# Possible values: nvidia, intel, hybrid
startup_auto_extpower_mode=nvidia


[intel]

# Driver to use for the Intel GPU. Possible values : modesetting, intel
# To use the intel driver, you need to install the package &quot;xf86-video-intel&quot;.
driver=modesetting

# Acceleration method (corresponds to AccelMethod in the Xorg configuration).
# Only applies to the intel driver.
# Possible values : sna, xna, uxa
# Leave blank for the default (no option specified)
accel=

# Enable TearFree option in the Xorg configuration.
# Only applies to the intel driver.
# Possible values : yes, no
# Leave blank for the default (no option specified)
tearfree=

# DRI version. Possible values : 2, 3
DRI=3

# Whether or not to enable modesetting for the nouveau driver.
# Does not affect modesetting for the Intel GPU driver !
# This option only matters if you use nouveau as the switching backend.
modeset=yes

[nvidia]

# Whether or not to enable modesetting. Required for PRIME Synchronization (which prevents tearing).
modeset=yes

# Whether or not to enable the NVreg_UsePageAttributeTable option in the Nvidia driver.
# Recommended, can cause poor CPU performance otherwise.
PAT=yes

# DPI value. This will be set using the Xsetup script passed to your login manager.
# It will run the command
# xrandr --dpi &amp;lt;DPI&amp;gt;
# Leave blank for the default (the above command will not be run).
DPI=96

# If you&#039;re running an updated version of xorg-server (let&#039;s say to get PRIME Render offload enabled),
# the nvidia driver may not load because of an ABI version mismatch. Setting this flag to &quot;yes&quot;
# will allow the loading of the nvidia driver.
ignore_abi=no

# Set to yes if you want to use optimus-manager with external Nvidia GPUs (experimental)
allow_external_gpus=no

# Comma-separated list of Nvidia-specific options to apply.
# Available options :
# - overclocking : enable CoolBits in the Xorg configuration, which unlocks clocking options
#   in the Nvidia control panel. Note: does not work in hybrid mode.
# - triple_buffer : enable triple buffering.
options=overclocking
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;h2 id=&quot;食用方法&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/archlinux-pavilion-gaming-laptop/#%E9%A3%9F%E7%94%A8%E6%96%B9%E6%B3%95&quot; title=&quot;食用方法&quot;&gt;&lt;/a&gt;食用方法&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;optimus-manager --switch nvidia&lt;/code&gt;切换到独显（nvidia）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;optimus-manager --switch intel&lt;/code&gt;切换到集显（intel）&lt;/p&gt;
&lt;p&gt;安装&lt;code&gt;mesa-demos&lt;/code&gt;后, 使用&lt;code&gt;glxinfo | grep &quot;OpenGL renderer&quot;&lt;/code&gt;查看当前正使用的显卡&lt;/p&gt;
&lt;p&gt;其他用法参见&lt;a href=&quot;https://github.com/Askannz/optimus-manager#usage&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Usage&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;切换显卡的过程中会自动注销登录, 所以记得&lt;strong&gt;保存并关掉电脑正在运行的程序&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;你可以在配置文件中修改&lt;code&gt;auto_logout=false&lt;/code&gt;禁止自动注销以手动注销切换显卡。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Others&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/archlinux-pavilion-gaming-laptop/#Others&quot; title=&quot;Others&quot;&gt;&lt;/a&gt;Others&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;之所以不推荐使用&lt;code&gt;bbswitch&lt;/code&gt;是因为容易遇到&lt;strong&gt;ACPI锁死&lt;/strong&gt;的问题, &lt;a href=&quot;https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Lockup_issue_(lspci_hangs)&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;参考Wiki&lt;/a&gt;, 需要添加&lt;a href=&quot;https://wiki.archlinux.org/index.php/Kernel_parameters&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;内核参数&lt;/a&gt;&lt;code&gt;acpi_osi=! acpi_osi=&quot;Windows 2009&quot;&lt;/code&gt;或&lt;code&gt;acpi_osi=&quot;!Windows 2015&quot;&lt;/code&gt;启动, 如果你遇到了锁死可以通过开机时在&lt;a href=&quot;https://wiki.archlinux.org/index.php/Arch_boot_process#Boot_loader&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;启动加载器界面&lt;/a&gt;编辑添加内核参数来正常进入系统, 如果你用的是efistub或者没办法编辑内核参数的话就只能用live CD救你的电脑了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果用不了&lt;code&gt;lspci&lt;/code&gt;, 电脑没法正常关机的话, 是nouveau的问题, 可添加内核参数&lt;code&gt;modprobe.blacklist=nouveau&lt;/code&gt;禁用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因为前几天改配置文件时又踩了一遍锁死的坑, 于是用最新的(2020.07.01)live CD救砖时, 惊喜的发现在live环境下&lt;code&gt;lspci&lt;/code&gt;和关机都不会卡死了, 貌似是新版内核修复了这个bug&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在切换显卡自动注销后, gdm界面有时不会自动加载出来而是一直黑屏, 这时需要手动切换到tty2再切回tty1才能加载出来。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果显示器支持&lt;a href=&quot;https://en.wikipedia.org/wiki/Display_Data_Channel#DDC.2FCI&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;DDC/DI&lt;/a&gt;，可以参考&lt;a href=&quot;https://wiki.archlinux.org/index.php/Backlight#External_monitors&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Wiki&lt;/a&gt;使用命令调节显示器亮度。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;(本条与配置显卡无关) 因为电脑用的intel网卡, 如果遇到蓝牙耳机无法连接的情况, 安装&lt;code&gt;pulseaudio&lt;/code&gt;和&lt;code&gt;pulseaudio-modues-bt&lt;/code&gt;等耳机需要的蓝牙组件, 照着Wiki上的&lt;a href=&quot;https://wiki.archlinux.org/index.php/Wireless_network_configuration#Bluetooth_coexistence&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;禁用Bluetooth coexistence&lt;/a&gt;解决此问题。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
    &lt;img src=&quot;/posts/archlinux-pavilion-gaming-laptop/images/1.png&quot; alt=&quot;neofetch&quot;&gt;
&lt;/div&gt;

    </content>
    
    
    <category term="Linux" label="Linux" scheme="https://blog.starry-s.moe/categories/Linux/" />
    
    
    <category term="Arch Linux" label="Arch Linux" scheme="https://blog.starry-s.moe/tags/Arch%20Linux/" />
    
    <category term="NVIDIA Optimus" label="NVIDIA Optimus" scheme="https://blog.starry-s.moe/tags/NVIDIA%20Optimus/" />
    
  </entry>
  
  
  
  <entry>
    <title>Spring - 3</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/spring-3/" />
    <id>https://blog.starry-s.moe/posts/spring-3/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2019-05-03T15:20:43.000Z</published>
    
    
    <updated>2019-05-03T15:20:43.000Z</updated>
    
    
    <summary type="html">
      &lt;div class=&quot;alert-blue&quot;&gt;
多图预警
&lt;/div&gt;


    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;div class=&quot;alert-blue&quot;&gt;
多图预警
&lt;/div&gt;

&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;辉く空の静寂には&quot;,
        artist: &quot;Kalafina&quot;,
        url: &quot;https://music.starry-s.moe/music/4d6b_af91_c8ab_7e676adf998cd77b5d6b8a8e095d4066.mp3&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/109951163710392062.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#776666&quot;
    }]
});
&lt;/script&gt; 

&lt;p&gt;&lt;img src=&quot;/posts/spring-3/images/IMG_4238-1.JPG&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-3/images/IMG_4150-1.JPG&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-3/images/IMG_4204-1.JPG&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-3/images/IMG_4245-1.JPG&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-3/images/IMG_4242-1.JPG&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-3/images/IMG_4216-1.JPG&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/Spring/" />
    
    
    <category term="摄影" label="摄影" scheme="https://blog.starry-s.moe/tags/%E6%91%84%E5%BD%B1/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/tags/Spring/" />
    
    <category term="Flowers" label="Flowers" scheme="https://blog.starry-s.moe/tags/Flowers/" />
    
  </entry>
  
  
  
  <entry>
    <title>一个人的旅行 —— 上海</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/shanghai/" />
    <id>https://blog.starry-s.moe/posts/shanghai/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2019-04-09T05:24:44.000Z</published>
    
    
    <updated>2019-04-21T16:00:00.000Z</updated>
    
    
    <summary type="html">
      &lt;div style=&quot;text-align:center&quot;&gt;
  &lt;img src=&quot;/posts/shanghai/images/shanghai.jpg&quot;&gt;
&lt;/div&gt;

&lt;div class=&quot;alert-blue&quot;&gt;多图预警&lt;/div&gt;


    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
  &lt;img src=&quot;/posts/shanghai/images/shanghai.jpg&quot;&gt;
&lt;/div&gt;

&lt;div class=&quot;alert-blue&quot;&gt;多图预警&lt;/div&gt;

&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;p&gt;不要问我为什么过了这么久才把这篇文章码出来…&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_4138-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;光の旋律&quot;,
        artist: &quot;Kalafina&quot;,
        url: &quot;https://music.starry-s.moe/music/Hikari_No_Senritsu.mp3&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/Kalafina All Time Best 2008-2018 small.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#444&quot;
    }]
});
&lt;/script&gt; 

&lt;p&gt;很久以前就有想去上海的念头了。&lt;/p&gt;
&lt;p&gt;最开始是打算在下一次BW举办的时候去上海的，不过想了想要是一整个寒假哪里都没去实在是不甘心，遂定机票简单的制定了计划和预算，开始了这趟旅行。&lt;/p&gt;
&lt;p&gt;准确点说不全是我一个人的旅行，只有去除掉和朋友一同坐了一趟飞机和磁悬浮（火车就不算了）后就剩下的就是一人的旅行了。&lt;/p&gt;
&lt;p&gt;上飞机前的晚上，我硬是没买卧铺票在火车的硬座上坐着熬了一晚上…全靠看Fate Zero熬过来的…&lt;/p&gt;
&lt;p&gt;之所以来上海是因为我很想看一下这么一座拥有B站总部和巨多B站大佬的城市是什么样子的，某些东西可能在大多数人眼里很平淡普通吧，但是我觉得很好玩。所以去迪士尼玩、登上海之巅、到野生动物园近距离看大老虎（fǔ）吃肉这些只能被我称作是本次旅行的附赠品，我当然不是只奔着这些去上海的，但别人问你你花了那么多钱出去旅游了一趟什么也没玩的话肯定会骂我的对吧。毕竟门票不贵买了也不吃亏。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3617-1.jpg&quot; alt=&quot;龙阳路&quot; title=&quot;龙阳路&quot;&gt;&lt;/p&gt;
 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer1&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap1 = new APlayer ({
    container: document.getElementById(&quot;aplayer1&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;aquarium&quot;,
        artist: &quot;Víctor Vergara&quot;,
        url: &quot;https://music.starry-s.moe/music/4098_d136_0a0a_ea008ceca6a370b79cdc52db597556d0.mp3&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/1379887099097990.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#3333aa&quot;
    }]
});
&lt;/script&gt; 

&lt;!-- &lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=330 height=86 src=&quot;//music.163.com/outchain/player?type=2&amp;id=409931671&amp;auto=0&amp;height=66&quot;&gt;&lt;/iframe&gt; --&gt;

&lt;p&gt;没急着用Metro大都会手机刷码捶（雾）地铁是因为我更想试一下Apple Pay是怎么操作的（所以这也是我没有办为游客准备的地铁卡的原因），现在觉得我花了60块钱充Apple Pay真的是交智商税，无数次的被卡在炸鸡口出不去有一次手机出bug双击电源键弹不出钱包界面后面排了很长的队伍是怎样的感受可想而知。&lt;/p&gt;
&lt;p&gt;在此之前只坐过北京地铁和沈阳地铁，在地铁上站两个小时是什么感受只在上海体验过…&lt;/p&gt;
&lt;p&gt;墙裂推荐看一下&lt;a href=&quot;https://www.bilibili.com/video/av2625588&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;上海轨交的鬼畜（雾）&lt;/a&gt;，不然第一次坐地铁很容易迷路的（谜一样的逻辑）。&lt;/p&gt;
&lt;p&gt;第一次自己外出，或多或少会有失误的地方，除了像算错火车票时间退票改票多花点手续费之外，旅店选在了嘉定区着实麻烦了许多…&lt;/p&gt;
&lt;p&gt;因为当时我只知道市区的旅店贵，又不想住青年旅舍，就选个不在市中心但是离地铁站不太远的地方（事实上需要走三十分钟）…&lt;/p&gt;
&lt;p&gt;到后来才知道我住的地方离江苏好近啊，要是坐11号线支线就江苏花桥了，简直…&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3259-1.jpg&quot; alt=&quot;猫！猫！猫！快看！！！&quot; title=&quot;cat&quot;&gt;&lt;/p&gt;
&lt;p&gt;不过旅店的窗子对面有猫！！！每天早晨拉开窗帘看到对面房顶有猫在晒太阳的感觉真的开心死了！&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3266-1.jpg&quot; alt=&quot;嘉定西站&quot; title=&quot;嘉定西站&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/5.jpg&quot; alt=&quot;迪士尼&quot; title=&quot;迪士尼&quot;&gt;&lt;/p&gt;
&lt;!-- &lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=430 height=86 src=&quot;//music.163.com/outchain/player?type=2&amp;id=468490569&amp;auto=0&amp;height=66&quot;&gt;&lt;/iframe&gt; --&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer2&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap2 = new APlayer ({
    container: document.getElementById(&quot;aplayer2&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;遊園施設&quot;,
        artist: &quot;帆足圭吾&quot;,
        url: &quot;https://music.starry-s.moe/music/540b_075e_0453_cae9f8037d04c81f84993977b01792ec.m4a&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/18710389371705314.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#44aa44&quot;
    }]
});
&lt;/script&gt; 

&lt;p&gt;所以最漫长的就是坐11号线花了很长的时间才能从上海的嘉定到上海浦东的迪士尼…&lt;/p&gt;
&lt;p&gt;一个人去迪士尼的好处就是排队排到最后遇到需要一人凑数的时候我就能合法插队了啊好高兴啊当时（后来我才知道有些地方我一个人是可以直接走单人通道根本不用排队…）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3382-1.jpg&quot; alt=&quot;玩具总动员&quot; title=&quot;玩具总动员&quot;&gt;&lt;/p&gt;
&lt;p&gt;和一个小姐姐一起坐的创极速光轮，小姐姐被吓够呛，我全程没敢睁眼睛死死抓住把手猫在最后一排…&lt;/p&gt;
&lt;p&gt;在B站上看到有人用MC还原了迪士尼的创极速光轮：&lt;a href=&quot;https://www.bilibili.com/video/av13333369&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;av13333369&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;迪士尼的吃的真的香！就算是80多一根的大鸡腿还是有人排很长的队伍去买，就是真香，花了150买了一些吃的。&lt;/p&gt;
&lt;p&gt;排的最长的队是七个小矮人矿车，足足站了70分钟。&lt;/p&gt;
&lt;p&gt;除了泡泡龙冲天赛车我没敢坐，别的知名项目基本上都玩了一遍，但很可惜只玩了一遍。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3536-1.jpg&quot; alt=&quot;迪士尼夜光幻影秀&quot; title=&quot;夜光幻影秀&quot;&gt;&lt;/p&gt;
&lt;p&gt;知道晚上有烟花的时候就决定了这一天待在迪士尼里不走了。&lt;/p&gt;
&lt;p&gt;夜光幻影秀真的是那种能看哭的震撼。&lt;/p&gt;
&lt;p&gt;印象最深的就是20：30幻影秀结束后好多人站在那里不想走，还有好多人在拍照。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3388-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;机智的我选择站在地铁门口等下一班车在屏蔽门打开后跑进去抢一个座，说着看起来很不要脸的行为，但是我的腿真的站不动了…&lt;/p&gt;
&lt;p&gt;&lt;del&gt;如果是两个人一起去玩的话会更有意思么？&lt;/del&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3610-1.jpg&quot; alt=&quot;&quot; title=&quot;俯瞰风景&quot;&gt;&lt;/p&gt;
&lt;p&gt;上海之巅的风景很好，我去的那天不是很晴，远处的建筑看起来有些朦胧，不过不影响观景。&lt;/p&gt;
&lt;p&gt;VR体验区放着AlanWalker的Routine，听着自己喜欢的歌逛观光厅，很有意思的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3600-1.jpg&quot; alt=&quot;&quot; title=&quot;陆家嘴&quot;&gt;&lt;/p&gt;
&lt;p&gt;陆家嘴附近的吃的是真贵，饿着肚子跑到别的地方吃的午饭...&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3906-1.jpg&quot; alt=&quot;16号线野生动物园站&quot; title=&quot;野生动物园站&quot;&gt;&lt;/p&gt;
&lt;p&gt;下午坐地铁去野生动物园。&lt;/p&gt;
&lt;p&gt;又回到了龙阳路地铁站。&lt;/p&gt;
&lt;p&gt;16号线分大站车小站车，大站车不停野生动物园站，当时差一点上错车。&lt;/p&gt;
&lt;p&gt;之前在知乎上见过有人吐槽16号线车厢内座椅设计的，等坐上车后才感受到这是真的挤…&lt;/p&gt;
&lt;p&gt;在16号线上查了英语四级的成绩，压线过，成绩不高不是很满意，不过想了想考试时自己在生病住院，算作是自己为自己找的一个借口吧。&lt;/p&gt;
&lt;p&gt;野生动物园站离动物园门口炒鸡远，走着去太耽误时间了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3646-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;等走到动物园的时候已经下午2点多了，开电瓶车的司机总在提醒他们马上就下班了让我们赶紧逛剩下的景点这个很烦，所以最后我又走着在园区溜达了一遍。&lt;/p&gt;
&lt;p&gt;基本上把所有的动物都看了一边，表示我已经见过这些动物了，在公园里溜达一大圈。&lt;/p&gt;
&lt;p&gt;等逛完一大圈之后动物园里已经没几个人了，&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3824-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;站在桥上看下面的天鹅，附近的音响在放AlanWalker的remix过的Faded，真的我很喜欢这首歌。&lt;/p&gt;
&lt;p&gt;最后花五块钱买包饲料喂天鹅，又买点玉米喂鸽子…&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3875-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_3987-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;晚上开始下雨，坐地铁回陆家嘴去了东方明珠，由于下雨玻璃上有很多水珠所以最初隔着窗子拍的照片都有些模糊。&lt;/p&gt;
&lt;p&gt;东方明珠还没有学生票…&lt;/p&gt;
&lt;p&gt;最开始觉得好亏，花了好多钱还拍不了照片，直到后来我到了下面的空中走廊...&lt;/p&gt;
&lt;p&gt;&lt;del&gt;在迪士尼和别人撞衫就算了，第二天在东方明珠又撞衫，还是同一个人，啊世界真小。&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;在东方明珠上待了很久，参观了一些其他项目，坐了一把VR过山车（正好赶上最后一趟），很晚才回到旅店。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_4071-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
  &lt;img src=&quot;/posts/shanghai/images/4.jpg&quot; title=&quot;bilibili&quot; alt=&quot;bilibili&quot;&gt;
&lt;/div&gt;

&lt;p&gt;第三天是先坐11号线到江苏路换二号线然后换四号线然后换十号线…&lt;/p&gt;
&lt;p&gt;&lt;del&gt;欢迎您乘坐轨道交通四号线，本线环线本线环线本线环线本线环线哈哈哈哈哈哈哈哈哈哈哈哈……&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;傻乎乎的骑共享单车跑去B站总部逛了一大圈，问了一下前台小姐姐只能参观一楼大厅后去了咖啡厅花了50块钱买一杯小电视咖啡（忘记叫什么名字了）后含泪把它喝掉…&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;太好吃了呜呜呜呜呜…&lt;/p&gt;
&lt;p&gt;还真不是Bilibili会员购骗死肥宅钱…&lt;/p&gt;
&lt;p&gt;所以我什么都没有买。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/2.jpg&quot; alt=&quot;&quot; title=&quot;武康大楼&quot;&gt;&lt;/p&gt;
&lt;p&gt;下午开始下雨，懒得拿相机，也没怎么用手机拍照，就顺着地铁线路依次去了趟同济，交大，顺路去了武康大楼，参观了宋庆龄故居。最后去了师范大，没有去复旦因为时间不够了。&lt;/p&gt;
&lt;p&gt;逛那些校园的时候只是打着伞进去走了一圈代表哦我已经来过这里了，一张照片都没有拍。&lt;/p&gt;
&lt;p&gt;去同济时正赶上开学，去看了一眼樱花树还没有开，就匆匆走了。&lt;/p&gt;
&lt;p&gt;只不过是多抽出一些时间让自己走在街上闲逛罢了…&lt;/p&gt;
&lt;p&gt;好多时间都是在地铁上度过的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/IMG_4125-1.jpg&quot; alt=&quot;&quot; title=&quot;城隍庙&quot;&gt;&lt;/p&gt;
&lt;p&gt;想了想明天就要坐飞机回家了所以内心很是不舍晚上又坐地铁去了城隍庙（豫园），吃了豫园卖的特别难吃的小吃后（终于明白为什么上海本地人几乎不去豫园这个地方了）回旅店早早睡觉为明天早起做准备…&lt;/p&gt;
&lt;p&gt;因为起床晚了为了赶时间坐的磁悬浮去的普通国际姬场（雾），没有坐二号线广兰路到浦东国际机场的延线有些可惜。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/shanghai/images/6.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;飞机即将降落时在城市上空绕了好几圈，体验了好几次失重的感觉（太好玩了我还要玩 #啪）&lt;/p&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    
    <category term="旅行" label="旅行" scheme="https://blog.starry-s.moe/tags/%E6%97%85%E8%A1%8C/" />
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/tags/%E6%97%A5%E5%B8%B8/" />
    
    <category term="摄影" label="摄影" scheme="https://blog.starry-s.moe/tags/%E6%91%84%E5%BD%B1/" />
    
  </entry>
  
  
  
  <entry>
    <title>小米路由器3G折腾之刷OpenWrt记录</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/xiaomi_r3g_openwrt/" />
    <id>https://blog.starry-s.moe/posts/xiaomi_r3g_openwrt/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2019-02-18T16:49:20.000Z</published>
    
    
    <updated>2021-01-23T04:36:44.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;生命不息, 折腾不止...&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;生命不息, 折腾不止...&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
&lt;div class=&quot;alert-red&quot;&gt;本篇由于创作时间过于久远, 作者已无法保证其准确性, 内容仅供参考。&lt;/div&gt;

 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;Mallow Flower&quot;,
        artist: &quot;Otokaze&quot;,
        url: &quot;https://music.starry-s.moe/music/969d_ef88_965d_f8693c4f0a65db94a9cc0ebb9be2bd06.mp3&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/781752767371058.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#EFCE82&quot;
    }]
});
&lt;/script&gt; 

&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi_r3g_openwrt/#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;
&lt;p&gt;你至少需要以下工具：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;路由器本体&lt;/li&gt;
&lt;li&gt;网线&lt;/li&gt;
&lt;li&gt;一个已格式化为FAT/FAT32格式的U盘, 用来刷开发者固件和ssh激活工具&lt;/li&gt;
&lt;li&gt;一根怼&lt;code&gt;Reset&lt;/code&gt;钮的针&lt;/li&gt;
&lt;li&gt;Windows用户需要一个SSH软件（例如：&lt;a href=&quot;https://putty.org&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;putty&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www1.miwifi.com/miwifi_download.html&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;小米路由器客户端&lt;/a&gt;, 用来绑定你的小米账号&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;SSH到路由器&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi_r3g_openwrt/#SSH%E5%88%B0%E8%B7%AF%E7%94%B1%E5%99%A8&quot; title=&quot;SSH到路由器&quot;&gt;&lt;/a&gt;SSH到路由器&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;路由器重启后指示灯会变为蓝色, 若变为红色则为刷机失败。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;安装开发者固件并开启SSH权限：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;在&lt;a href=&quot;http://www1.miwifi.com/miwifi_download.html&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;MiWiFi下载页面&lt;/a&gt;下载所需要的路由器开发者固件（ROM -&amp;gt; ROM for R3G开发版）,命名为&lt;code&gt;miwifi.bin&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;路由器断电, 将下载好的开发者固件放入U盘插入路由器USB接口, 捅住reset扭接上电源后待指示灯为黄色闪烁时松开, 数分钟后路由器会自动重启, 此过程不要乱动路由器。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;小米路由器客户端登陆小米账号绑定路由器设备, 此过程需要路由器联网。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www1.miwifi.com/miwifi_open.html&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;MiWiFi开放平台&lt;/a&gt;登陆小米账号下载ssh激活工具命名为&lt;code&gt;miwifi_ssh.bin&lt;/code&gt;, 记下root密码。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;操作方式同第二步骤, 刷入ssh激活工具。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;SSH到路由器:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Windows系统用putty, ip为&lt;code&gt;191.168.31.1&lt;/code&gt;, 用户名：&lt;code&gt;root&lt;/code&gt;, 密码为下载激活ssh工具时记下的密码。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Unix/Linux系统终端执行：&lt;code&gt;ssh root@191.168.31.1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果在ssh到路由器时遇到no matching key exchange method found错误，编辑&lt;code&gt;~/.ssh/config&lt;/code&gt;, 加入下面两行：&lt;/p&gt;
&lt;figure data-raw=&quot;Host *
    KexAlgorithms +diffie-hellman-group1-sha1
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;Host *
    KexAlgorithms +diffie-hellman-group1-sha1
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;刷入Bootloader（推荐可选）&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi_r3g_openwrt/#%E5%88%B7%E5%85%A5Bootloader%EF%BC%88%E6%8E%A8%E8%8D%90%E5%8F%AF%E9%80%89%EF%BC%89&quot; title=&quot;刷入Bootloader（推荐可选）&quot;&gt;&lt;/a&gt;刷入Bootloader（推荐/可选）&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;该步骤可选是因为Breed不支持直接刷入Openwrt固件, 可参考&lt;a href=&quot;https://www.right.com.cn/forum/forum.php?mod=viewthread&amp;amp;tid=267455&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;这篇帖子&lt;/a&gt;, 不过为了防止变砖, 还是推荐刷Breed。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Breed原作者为hackpascal, &lt;a href=&quot;https://breed.hackpascal.net/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;此处为下载地址&lt;/a&gt;, 文件名为&lt;code&gt;breed-mt7621-xiaomi-r3g.bin&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;第一种方法是ssh到路由器后通过&lt;code&gt;wget&lt;/code&gt;下载breed文件再刷入（需要确保路由器联网）, 下载地址为https所以需要加上&lt;code&gt;--no-check-certificate&lt;/code&gt;参数。&lt;/p&gt;
&lt;figure data-raw=&quot;cd /tmp
wget --no-check-certificate https://breed.hackpascal.net/breed-mt7621-xiaomi-r3g.bin -O breed.bin
mtd -r write breed.bin Bootloader
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;cd /tmp
wget --no-check-certificate https://breed.hackpascal.net/breed-mt7621-xiaomi-r3g.bin -O breed.bin
mtd -r write breed.bin Bootloader
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;另一种方法是将breed通过U盘拷贝到路由器再刷入。&lt;/p&gt;
&lt;figure data-raw=&quot;mkdir /tmp/sdcard
mount /dev/sda1 /tmp/sdcard
mtd -r write /tmp/sdcard/breed.bin Bootloader
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;mkdir /tmp/sdcard
mount /dev/sda1 /tmp/sdcard
mtd -r write /tmp/sdcard/breed.bin Bootloader
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;路由器刷写完毕后会自动重启, &lt;strong&gt;在写入Breed的过程中不要动路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id=&quot;刷机&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi_r3g_openwrt/#%E5%88%B7%E6%9C%BA&quot; title=&quot;刷机&quot;&gt;&lt;/a&gt;刷机&lt;/h2&gt;
&lt;p&gt;下载所需固件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;tuna镜像站的OpenWrt下载地址：&lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/lede/releases/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;https://mirrors.tuna.tsinghua.edu.cn/lede/releases/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;官方下载地址: &lt;a href=&quot;https://downloads.openwrt.org/releases/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;https://downloads.openwrt.org/releases/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;使用Breed的刷机方法&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi_r3g_openwrt/#%E4%BD%BF%E7%94%A8Breed%E7%9A%84%E5%88%B7%E6%9C%BA%E6%96%B9%E6%B3%95&quot; title=&quot;使用Breed的刷机方法&quot;&gt;&lt;/a&gt;使用Breed的刷机方法&lt;/h3&gt;
&lt;p&gt;按照hackpascal的说法是：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果kernel0存在kernel1不存在, 那么启动kernel0
如果kernel1存在kernel0不存在, 那么启动kernel1
如果kernel0和kernel1都存在, 那么检查环境变量 &lt;code&gt;xiaomi.r3g.bootfw&lt;/code&gt; 的值, 如果存在且值为 2, 那么启动kernel1, 否则启动kernel0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;简单来说就是：路由器有两个内核, 需要在Breed里设置环境变量让路由器启动kernel1。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;刷入Openwrt固件到Kernel1&lt;/p&gt;
&lt;figure data-raw=&quot;mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;路由器断电, 捅住reset按钮后通电, 待指示灯变为蓝色闪烁后用网线连接路由器到电脑, 浏览器打开网址&lt;code&gt;192.168.1.1&lt;/code&gt;, 进入Breed界面。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在环境变量编辑里添加&lt;code&gt;xiaomi.r3g.bootfw&lt;/code&gt;字段, 值为&lt;code&gt;2&lt;/code&gt;,保存后重启即可进入Openwrt。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;没有刷入Breed的刷机方法&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi_r3g_openwrt/#%E6%B2%A1%E6%9C%89%E5%88%B7%E5%85%A5Breed%E7%9A%84%E5%88%B7%E6%9C%BA%E6%96%B9%E6%B3%95&quot; title=&quot;没有刷入Breed的刷机方法&quot;&gt;&lt;/a&gt;没有刷入Breed的刷机方法&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://openwrt.org/toh/xiaomi/mir3g&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;OpenWrt官网提供的教程&lt;/a&gt;是在没有刷入Breed的情况下刷入OpenWrt固件的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ssh到路由器, 导入固件后刷机。&lt;/p&gt;
&lt;figure data-raw=&quot;mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
nvram set flag_try_sys1_failed=1
nvram commit

reboot
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
nvram set flag_try_sys1_failed=1
nvram commit

reboot
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Others&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/xiaomi_r3g_openwrt/#Others&quot; title=&quot;Others&quot;&gt;&lt;/a&gt;Others&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;如果刷了Breed + Pandavan/PandoraBox后想换回OpenWrt的话, 首先在Breed中刷回小米路由器开发版的官方固件, 然后SSH到路由器按照上述的使用Breed的刷机方法再刷机。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;USB3.0会对路由器的2.4G频段信号造成干扰。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;OpenWrt默认语言为英文, 可安装&lt;code&gt;luci-i18n-base-zh-cn&lt;/code&gt;,&lt;code&gt;luci-i18n-base-zh-tw&lt;/code&gt;安装简体/繁体中文。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://openwrt-dist.sourceforge.net&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;OpenWrt-dist&lt;/a&gt;可拓展更多功能。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;为优化软件包安装速度, 可将opkg源改为国内：&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;  LuCI -&amp;gt; System -&amp;gt; Software -&amp;gt; Configuration 中将 Distribution feeds 的&lt;code&gt;http://downloads.openwrt.org&lt;/code&gt;替换为&lt;code&gt;http://mirrors.tuna.tsinghua.edu.cn/lede&lt;/code&gt;。&lt;/p&gt;
&lt;ol start=&quot;6&quot;&gt;
&lt;li&gt;OpenWrt可安装软件包&lt;code&gt;libustream-openssl&lt;/code&gt; &lt;code&gt;libustream-mbedtls&lt;/code&gt;解决&lt;code&gt;wget&lt;/code&gt;无法访问https服务器问题。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;  然后建议把opkg源能改为https的都改为https。&lt;/p&gt;

    </content>
    
    
    <category term="教程" label="教程" scheme="https://blog.starry-s.moe/categories/%E6%95%99%E7%A8%8B/" />
    
    <category term="路由器" label="路由器" scheme="https://blog.starry-s.moe/categories/%E6%95%99%E7%A8%8B/%E8%B7%AF%E7%94%B1%E5%99%A8/" />
    
    
    <category term="教程" label="教程" scheme="https://blog.starry-s.moe/tags/%E6%95%99%E7%A8%8B/" />
    
    <category term="路由器" label="路由器" scheme="https://blog.starry-s.moe/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" />
    
    <category term="OpenWrt" label="OpenWrt" scheme="https://blog.starry-s.moe/tags/OpenWrt/" />
    
  </entry>
  
  
  
  <entry>
    <title>使用HMCL启动Minecraft</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/hmcl-minecraft/" />
    <id>https://blog.starry-s.moe/posts/hmcl-minecraft/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2018-07-29T09:26:35.000Z</published>
    
    
    <updated>2018-07-29T09:26:35.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;终于到了暑假可以开一个Minecraft服务器和小伙伴联机的时候了！在发现我对吃鸡那类的游戏除了觉得好玩以外没有任何天赋( &lt;del&gt;没钱买鼠标？&lt;/del&gt; )后打算继续玩我的世界，所以为了方便那些想玩Minecraft（非网易代理版）但是还不知道怎么操作的那些小伙伴们，这篇教程就这么诞生了。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;p&gt;终于到了暑假可以开一个Minecraft服务器和小伙伴联机的时候了！在发现我对吃鸡那类的游戏除了觉得好玩以外没有任何天赋( &lt;del&gt;没钱买鼠标？&lt;/del&gt; )后打算继续玩我的世界，所以为了方便那些想玩Minecraft（非网易代理版）但是还不知道怎么操作的那些小伙伴们，这篇教程就这么诞生了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;div class=&quot;alert-red&quot;&gt;
本篇由于创作时间过于久远，部分下载链接可能失效，因长期未更新，教程仅供参考。
&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;本教程将分为二个部分，第一部分将指导你如何使用HMCL启动器安装并使用Minecraft（非网易代理版），第二部分处理一些常见的问题。
本教程主要写给Windows用户，我想Linux用户不太需要我的教程了吧。。
可能有人是刚接触电脑的新人，所以我尽可能的把每一步都写详细清楚，方便大家的理解。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本教程仅提供所述内容的下载连接，游戏的版权归Mojang所有。&lt;/p&gt;
&lt;p&gt;顺便说一下网易版并不支持MacOS哈哈哈哈。。。。&lt;/p&gt;
&lt;h2 id=&quot;第一部分：&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/hmcl-minecraft/#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%9A&quot; title=&quot;第一部分：&quot;&gt;&lt;/a&gt;第一部分：&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;如果你尚未在官网购买正版的Minecraft，你可以使用HMCL（&lt;a href=&quot;https://github.com/huanghongxun/HMCL&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Hello Minecraft Launcher&lt;/a&gt; )启动器下载并运行MC。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1.
你需要确保你的电脑已安装java8。下载java：&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&lt;/a&gt;&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;接下来你需要下载HMCL启动器。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我建议去&lt;a href=&quot;https://ci.huangyuhui.net/job/HMCL/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;HMCL的官方服务器&lt;/a&gt; 下载所需的&lt;code&gt;exe&lt;/code&gt;文件，最好不要从贴吧/论坛下载来路不明/非最新版本的HMCL启动器。&lt;/p&gt;
&lt;p&gt;选择最新版本的后缀为&lt;code&gt;.exe&lt;/code&gt;的文件下载即可。或者你可以下载后缀为&lt;code&gt;.jar&lt;/code&gt;的文件（用于Linux，MacOS）&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;新建一个文件夹（放在你喜欢的位置例如桌面），将下载的&lt;code&gt;exe/jar&lt;/code&gt;文件复制到这里。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Windows用户直接双击exe文件运行即可，&lt;/p&gt;
&lt;p&gt;Linux用户你下载的是jar文件所以如果你想运行你需要新建一个可执行文件：&lt;/p&gt;
&lt;figure data-raw=&quot;$ cd 你的文件夹名称
$ echo &amp;quot;java -jar hmcl-对应的版本号.jar&amp;quot; &gt; ./start.sh
$ chmod 744 ./start.sh
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ cd 你的文件夹名称
$ echo &quot;java -jar hmcl-对应的版本号.jar&quot; &amp;gt; ./start.sh
$ chmod 744 ./start.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;然后在终端执行&lt;code&gt;./start.sh&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;或者直接在终端执行&lt;code&gt;java -jar hmcl-*.jar&lt;/code&gt;即可。&lt;/p&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;设置一个你喜欢的名字并一直使用它，选择离线模式&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在HMCL里点击右下角的加号下载游戏文件,建议将游戏下载到你启动器所在的文件夹内。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如果你已购买正版Minecraft，在确保java安装好后直接去官网下载启动器再到启动器中下载游戏即可，可能会因网络原因速度慢，这是正常现象。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;请支持正版，RMB165，可使用支付宝。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;第二部分：&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/hmcl-minecraft/#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%EF%BC%9A&quot; title=&quot;第二部分：&quot;&gt;&lt;/a&gt;第二部分：&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;笔记本双显卡用户请确保你正确的安装了显卡驱动（新买的笔记本不知道什么是显卡驱动就默认已经安装好了），NVIDA显卡用户在桌面右键选择NVIDIA控制面板（没有这个选项可能是你的显卡驱动没安装好），选择 &lt;strong&gt;3D设置-&amp;gt;管理3D设置&lt;/strong&gt; ，选择添加，找到你安装的JAVA目录下的java.exe，将其设置为高性能处理器。然后保存设置并退出。（ps现在市面上新出的笔记本用集成显卡玩这个游戏也已经很流畅了）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在游戏中按F3，若右侧有NVIDIA字样就说明你已成功的使用独显运行游戏了，在左侧可以观察帧数。&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;&lt;p&gt;Linux用户如果可以启动HMCL但是无法启动游戏错误报告是有关OpenGL的话在确定显卡驱动配置正常后检查一下是否安装了&lt;code&gt;xorg-xrandr&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;64位系统的用户不要安装32位的java，不仅影响性能而且对可使用的内存大小也有限制。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Linux用户如果想用独显玩Minecraft而日常使用时切换回省电的集显，请参考 &lt;a href=&quot;https://sh.alynx.xyz/posts/2017/02/16/Steam-with-Bumblebee/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Linux下使Steam调用Bumblebee使用独显&lt;/a&gt;,当然不同的Linux Distribution方法会有不同，请linux用户自行摸索。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;相关内容：&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/hmcl-minecraft/#%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9%EF%BC%9A&quot; title=&quot;相关内容：&quot;&gt;&lt;/a&gt;相关内容：&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://minecraft-zh.gamepedia.com/index.php?title=%E6%95%99%E7%A8%8B/%E6%88%90%E5%8A%9F%E5%9C%B0%E5%90%AF%E5%8A%A8%E6%B8%B8%E6%88%8F&amp;amp;variant=zh-cn&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;教程/成功地启动游戏-Minecraft Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://minecraft.net/zh-hans/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;官方网站|Minecraft&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.starry-s.me/posts/raspberrypi-mc-server/&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;树莓派之我的世界服务器&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果你感兴趣想一起联机我的世界的话欢迎联系我，大家一起来Van游戏。&lt;/p&gt;

    </content>
    
    
    <category term="Minecraft" label="Minecraft" scheme="https://blog.starry-s.moe/categories/Minecraft/" />
    
    
    <category term="Minecraft" label="Minecraft" scheme="https://blog.starry-s.moe/tags/Minecraft/" />
    
    <category term="HMCL" label="HMCL" scheme="https://blog.starry-s.moe/tags/HMCL/" />
    
  </entry>
  
  
  
  <entry>
    <title>Spring - 2</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/spring-2/" />
    <id>https://blog.starry-s.moe/posts/spring-2/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2018-04-05T10:05:11.000Z</published>
    
    
    <updated>2018-04-05T10:05:11.000Z</updated>
    
    
    <summary type="html">
      &lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/05.jpeg&quot; alt=&quot;Spring&quot; title=&quot;Flowers&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;春天来了。&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/spring-2/#%E6%98%A5%E5%A4%A9%E6%9D%A5%E4%BA%86%E3%80%82&quot; title=&quot;春天来了。&quot;&gt;&lt;/a&gt;春天来了。&lt;/h2&gt;
&lt;div class=&quot;alert-blue&quot;&gt;
多图预警
&lt;/div&gt;


    </summary>
    
    
    <content type="html">
      &lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/05.jpeg&quot; alt=&quot;Spring&quot; title=&quot;Flowers&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;春天来了。&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/spring-2/#%E6%98%A5%E5%A4%A9%E6%9D%A5%E4%BA%86%E3%80%82&quot; title=&quot;春天来了。&quot;&gt;&lt;/a&gt;春天来了。&lt;/h2&gt;
&lt;div class=&quot;alert-blue&quot;&gt;
多图预警
&lt;/div&gt;

&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/01.jpeg&quot; alt=&quot;Spring 1&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/02.jpeg&quot; alt=&quot;Spring 2&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/03.jpeg&quot; alt=&quot;Spring 3&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/04.jpeg&quot; alt=&quot;Spring 4&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/06.jpeg&quot; alt=&quot;Spring 6&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/07.jpeg&quot; alt=&quot;Spring 7&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring-2/images/08.jpeg&quot; alt=&quot;Spring 8&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Spring-2&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/spring-2/#Spring-2&quot; title=&quot;Spring-2&quot;&gt;&lt;/a&gt;Spring - 2&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;拍摄自2018-3-28&lt;/p&gt;
&lt;/blockquote&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/Spring/" />
    
    
    <category term="摄影" label="摄影" scheme="https://blog.starry-s.moe/tags/%E6%91%84%E5%BD%B1/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/tags/Spring/" />
    
    <category term="Flowers" label="Flowers" scheme="https://blog.starry-s.moe/tags/Flowers/" />
    
  </entry>
  
  
  
  <entry>
    <title>Spring</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/spring/" />
    <id>https://blog.starry-s.moe/posts/spring/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2017-05-05T14:28:00.000Z</published>
    
    
    <updated>2017-05-05T14:28:00.000Z</updated>
    
    
    <summary type="html">
      &lt;div class=&quot;alert-blue&quot;&gt;
多图预警
&lt;/div&gt;

&lt;p&gt;前一阵子拍的一些花，简单地用手机和电脑调了颜色，感觉蛮好看的。感觉有的照片可以当作壁纸了。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;div class=&quot;alert-blue&quot;&gt;
多图预警
&lt;/div&gt;

&lt;p&gt;前一阵子拍的一些花，简单地用手机和电脑调了颜色，感觉蛮好看的。感觉有的照片可以当作壁纸了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
&lt;h2 id=&quot;拍摄自ipodtouch6&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/spring/#%E6%8B%8D%E6%91%84%E8%87%AAipodtouch6&quot; title=&quot;拍摄自ipodtouch6&quot;&gt;&lt;/a&gt;拍摄自ipod touch6&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/1491917117692.jpeg&quot; alt=&quot;Spring_1&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/1491917129991.jpeg&quot; alt=&quot;Spring_3&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/1491917137076.jpeg&quot; alt=&quot;Spring_4&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/1491917142441.jpeg&quot; alt=&quot;Spring_5&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;拍摄自佳能powershots100&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/spring/#%E6%8B%8D%E6%91%84%E8%87%AA%E4%BD%B3%E8%83%BDpowershots100&quot; title=&quot;拍摄自佳能powershots100&quot;&gt;&lt;/a&gt;拍摄自佳能powershot s100&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/IMG_0009.jpg&quot; alt=&quot;Spring_6&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/IMG_0011.jpg&quot; alt=&quot;Spring_7&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/IMG_0012.jpg&quot; alt=&quot;Spring_8&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/IMG_0018.jpg&quot; alt=&quot;Spring_9&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/posts/spring/images/IMG_0025.jpg&quot; alt=&quot;Spring_10&quot;&gt;&lt;/p&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/Spring/" />
    
    
    <category term="摄影" label="摄影" scheme="https://blog.starry-s.moe/tags/%E6%91%84%E5%BD%B1/" />
    
    <category term="Spring" label="Spring" scheme="https://blog.starry-s.moe/tags/Spring/" />
    
    <category term="Flowers" label="Flowers" scheme="https://blog.starry-s.moe/tags/Flowers/" />
    
  </entry>
  
  
  
  <entry>
    <title>Sorry, Thank you.</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/sorry-thankyou/" />
    <id>https://blog.starry-s.moe/posts/sorry-thankyou/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2016-11-26T07:00:24.000Z</published>
    
    
    <updated>2016-11-26T07:00:24.000Z</updated>
    
    
    <summary type="html">
      &lt;div style=&quot;text-align:center&quot;&gt;
  &lt;img src=&quot;/posts/sorry-thankyou/images/snow.jpg&quot; alt=&quot;Snow&quot; title=&quot;Snow&quot;&gt;
&lt;/div&gt;

&lt;p&gt;想了很久不知道以什么来作为本篇文章的开头，不确定自己真的想说些什么，但是我还是带着确切目的来写这篇文章的。&lt;/p&gt;
&lt;p&gt;这一个月发生了一些不太愉快的事，可能不算很大吧但是对我来说这个影响真的很大。我不知道应该从何说起，先静下来带上耳机慢慢的想慢慢的写。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;div style=&quot;text-align:center&quot;&gt;
  &lt;img src=&quot;/posts/sorry-thankyou/images/snow.jpg&quot; alt=&quot;Snow&quot; title=&quot;Snow&quot;&gt;
&lt;/div&gt;

&lt;p&gt;想了很久不知道以什么来作为本篇文章的开头，不确定自己真的想说些什么，但是我还是带着确切目的来写这篇文章的。&lt;/p&gt;
&lt;p&gt;这一个月发生了一些不太愉快的事，可能不算很大吧但是对我来说这个影响真的很大。我不知道应该从何说起，先静下来带上耳机慢慢的想慢慢的写。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
&lt;p&gt;一直没想到有些事发生的这么快，短短4个月发生了这么多变化。&lt;/p&gt;
&lt;p&gt;还记得4个月前还在忙小考试的那阵子，这只猫就这么来到了我的生活中。&lt;/p&gt;
&lt;p&gt;4个月它变化很大，长大了许多，从一只几斤重的小猫一下子变成一只大猫了。&lt;/p&gt;
&lt;p&gt;它是一只很通人性的猫，可以用很乖来形容。在家里不打翻任何东西，犯错误会很主动的认错等待受罚。虽然它没有和人沟通的能力但是能看出它一直都想和人说话，一直都在努力的想表达很多事情。甚至它一直都在学人的一举一动。&lt;/p&gt;
&lt;p&gt;它喜欢外出。和别的猫不一样，它可以被绳子栓着溜。夏天的时候我和家人一起在河边陪它溜达。它也不像别的猫那样到处乱跑。路人很喜欢它刷白刷白的毛，在河边很显眼。&lt;/p&gt;
&lt;p&gt;它爱吃猫罐头，经常晚上缠在脚边要罐头吃。有时我太懒了就懒得管他，就只给它一碗猫粮。&lt;/p&gt;
&lt;p&gt;和它相处的这段日子很愉快很美好。&lt;/p&gt;
&lt;p&gt;每天晚上放学回家都能看到它激动的朝你跑来，晚上睡觉它还会趴在你的床边。&lt;/p&gt;
&lt;p&gt;养一只猫的生活很别样的丰富多彩。它改变了我许多。后来它也就成了我生命的一部分了。&lt;/p&gt;
&lt;p&gt;猫的思维也挺特殊的，和人有很大的不同&lt;/p&gt;
&lt;p&gt;我可以用很规矩来形容一个猫。它在我眼里每天生活得都很规矩，定时定点的干一些事，并且总把它的主人当亲人来对待吧。&lt;/p&gt;
&lt;p&gt;每天上学后都能听到几声它独自在家中哭嚎一般的叫声，听着挺揪心的，但是也没办法。&lt;/p&gt;
&lt;p&gt;没想到一切过去得这么快，甚至我现在还难以回忆过去。&lt;/p&gt;
&lt;p&gt;一周前的早晨，它去世了。&lt;/p&gt;
&lt;p&gt;一瞬间觉得这和我想的有些不一样。&lt;/p&gt;
&lt;p&gt;原本普通的一天中午就这样变得不同了。一下午我都神混颠倒的听老师讲课。还是请了一节课的假回家和家人一起把它带到大凌河边埋起来了。&lt;/p&gt;
&lt;p&gt;我选择了沉默起来，没有和任何人说这件事。尽可能的不被这悲伤困扰着。中午在家带上耳机想让自己静下来，但是眼泪就抑制不住的往外流。心里还是那么的舍不得，没有告别的就这么离去了。&lt;/p&gt;
&lt;p&gt;我缓了好长好长的时间。在学校里不愿多说一句话，在家里不敢想太多的东西，稍微有些害怕，有一些孤独。之前每天回家都会习惯性的喊几声它的名字，但是现在又要想方设法的控制自己不要这么做。&lt;/p&gt;
&lt;p&gt;考虑了很久决定写点什么来纪念一下这只陪伴了我几个月的猫咪。的确，我没想到这么快失去它。尽管过去半个月了但我仍能梦到和它一起玩耍时的场景，总觉得它还活着。&lt;/p&gt;
&lt;p&gt;总觉得没有和它说再见，梦里梦见它还是活蹦乱跳的和我闹。一切就像梦一样，我告诉自己那只是一场梦。在梦里和它说再见吧，这一切只能在梦里完成了，梦是那么的真实，总给我一种错觉。而真正的现实却被我当作梦境去面对了。&lt;/p&gt;
&lt;p&gt;还有几天又要考试了，而这次我真的觉得累了。看到班级同学都在使劲的在课上学着，而我想歇一歇。先找几本书看一下吧，总感觉2016年的下半年大脑一直处在混沌的状态，丝毫没有清醒过，做事情的动机也没有了，一点都不像年初时的自己了。随着自己最喜欢的那首歌听腻了，就在也没找到更好听的歌来唤醒大脑的深处。而年末又发生了这些事情。我不得不好好的想想，我到底遗忘了什么，身体为什么这么的累，忙活了一切究竟换回来的是什么，尽管没有后悔过但是真的好累好累。这不是我给自己规划的生活。
带耳机把这些一点点的写出来，也许写出来心里就会好受了吧。&lt;/p&gt;
&lt;p&gt;有些事没办法按照自己所想的那样去进行，自己所想的和实际发生的之间的差距总是那么大，也许这就是生活吧。&lt;/p&gt;
&lt;p&gt;这就是缘份吧，我想。&lt;/p&gt;
&lt;p&gt;感谢它陪伴我的这4个月。心里想着有些对不起它，但是又没办法挽回了。&lt;/p&gt;
&lt;p&gt;静静的在心里想：谢谢，对不起。&lt;/p&gt;
&lt;p&gt;一切过去的好快，每天还是要面对着新的一切，还要去上学，还要有理想。重新规划一下未来，把没必要的数据都清理掉，给大脑一周的假期。一切还在继续。&lt;/p&gt;
&lt;p&gt;看到AlanWalker终于发布新曲了，非常激动的戴耳机去听。看到这样一个有理想，一直努力的人真好。&lt;/p&gt;
&lt;p&gt;一眨眼2016也就这么过去了。站在2017回首过去一年感觉自己变了好多，经历了好多的事。认识了好多的人，我的生活也就这么一点点的被他们影响着。但是这也没什么不好，虽然累点但是一切还是值得去走的。高中生活过去一半了，真的很快啊，或许到了高三时间会过得更快吧。要学会珍惜，要多和现在还存在的人和事待一会儿。一旦自己发现我已经失去了什么改变不回来时，就都晚了。&lt;/p&gt;
&lt;p&gt;说实话我觉得我性格很大大咧咧的马马虎虎的，但是在班里却很宅的样子都不是很愿意说话。我找不到别的形容自己的词了，感觉说自己二一点也没什么不妥的。可能是我有时候疏忽大意了吧，忽略掉了身边好多对我好的人，还犯下了好多改不了的错误。有时候感觉自己蛮聪明的然后自己固执到了犯了错误都不愿意找原因的地步，然后自己就陷在这里越来越深了。感觉自己一直都是在拆了东墙补西墙那样的生活着，维护起网站了就开始遗弃用了多年的QQ空间了，一遇到点新鲜事就把脑子里别的东西全忘掉了，然后自己就这么看似完美的一天天的走下去了。  &lt;/p&gt;
&lt;p&gt;可能还需要经历很久我在能把自己的毛病改过来吧，或许很久以后我也意识不到自己的毛病。&lt;/p&gt;
&lt;p&gt;两个月过去了，期末过去了，春节即将来临了。有时候我还会不由自主的问自己我养过那只猫吗？它死了吗？发生过了什么吗？······也许一个人真的被什么东西伤到了影响到了他的正常生活后，他的大脑就会控制他自己不顾一切的忘掉这些事情。所以现在我彻底的忘掉了他的样子，盯着窗户上的堵死的猫洞会发呆很久才能想起来这是干什么用的，回看他的照片时会感到很陌生一样问自己，这只猫好可爱啊，为什么我一点和他熟悉的感觉都没有了呢。&lt;/p&gt;
&lt;p&gt;感谢在生命中遇见了它，一切来的快去的也快。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/posts/sorry-thankyou/images/thankyou.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;SorryThankyou&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/sorry-thankyou/#SorryThankyou&quot; title=&quot;SorryThankyou&quot;&gt;&lt;/a&gt;Sorry, Thankyou.&lt;/h1&gt;

    </content>
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/categories/%E6%97%A5%E5%B8%B8/" />
    
    
    <category term="日常" label="日常" scheme="https://blog.starry-s.moe/tags/%E6%97%A5%E5%B8%B8/" />
    
    <category term="碎碎念" label="碎碎念" scheme="https://blog.starry-s.moe/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/" />
    
  </entry>
  
  
  
  <entry>
    <title>树莓派之我的世界服务器</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/raspberrypi-mc-server/" />
    <id>https://blog.starry-s.moe/posts/raspberrypi-mc-server/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2016-11-25T07:01:28.000Z</published>
    
    
    <updated>2016-11-25T07:01:28.000Z</updated>
    
    
    <summary type="html">
      &lt;div class=&quot;alert-red&quot;&gt;本篇由于创作时间过于久远, 作者已无法保证其准确性, 内容仅供参考。&lt;/div&gt;

&lt;p&gt;刚买树莓派3B时就想弄一个我的世界服务器，但是那时不懂Linux，服务器也就没建成。这一阵子打算把这个计划再捡起来，和同学一起联机的话树莓派还是能做到的。ARM系列的CPU性能肯定比X86_64电脑的CPU弱许多，外加上树莓派1G的运行内存，让它跑大型服务器肯定是不可能的，所以只能弄一个几个人联机的小服务器了。&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;div class=&quot;alert-red&quot;&gt;本篇由于创作时间过于久远, 作者已无法保证其准确性, 内容仅供参考。&lt;/div&gt;

&lt;p&gt;刚买树莓派3B时就想弄一个我的世界服务器，但是那时不懂Linux，服务器也就没建成。这一阵子打算把这个计划再捡起来，和同学一起联机的话树莓派还是能做到的。ARM系列的CPU性能肯定比X86_64电脑的CPU弱许多，外加上树莓派1G的运行内存，让它跑大型服务器肯定是不可能的，所以只能弄一个几个人联机的小服务器了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;blockquote&gt;
&lt;p&gt;终于可以继续更新博客了！原计划是11月之前更新博客的。不巧电脑出了问题，重装了一遍Arch Linux,后来又发生了一些事一直没能用电脑。由于开学到现在能放假供我写博客的时间少之又少，这篇原本在11月初就能发表的文章就这样被硬生生推迟到了11月末了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;材料以及工具&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/raspberrypi-mc-server/#%E6%9D%90%E6%96%99%E4%BB%A5%E5%8F%8A%E5%B7%A5%E5%85%B7&quot; title=&quot;材料以及工具&quot;&gt;&lt;/a&gt;材料以及工具&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;树莓派一只 （包括所需要的C10的内存卡以及刷好的固件以及5v，2.5A充电器）&lt;/li&gt;
&lt;li&gt;一个支持DDNS的路由器（非必须）&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;如果不想用树莓派建服务器的话也可以按照本教程在电脑上搭建服务器。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;配置树莓派&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/raspberrypi-mc-server/#%E9%85%8D%E7%BD%AE%E6%A0%91%E8%8E%93%E6%B4%BE&quot; title=&quot;配置树莓派&quot;&gt;&lt;/a&gt;配置树莓派&lt;/h2&gt;
&lt;h3 id=&quot;调整GPU可使用的内存：&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/raspberrypi-mc-server/#%E8%B0%83%E6%95%B4GPU%E5%8F%AF%E4%BD%BF%E7%94%A8%E7%9A%84%E5%86%85%E5%AD%98%EF%BC%9A&quot; title=&quot;调整GPU可使用的内存：&quot;&gt;&lt;/a&gt;调整GPU可使用的内存：&lt;/h3&gt;
&lt;p&gt;毕竟用树莓派开服务器不需要占用GPU，直接调低。&lt;/p&gt;
&lt;p&gt;Raspbian: &lt;code&gt;raspi-config&lt;/code&gt;中将GPU内存分为16M。&lt;/p&gt;
&lt;p&gt;Arch Linux ARM: &lt;code&gt;/boot/config.txt&lt;/code&gt;中更改GPU显存为16&lt;/p&gt;
&lt;h2 id=&quot;安装JAVA&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/raspberrypi-mc-server/#%E5%AE%89%E8%A3%85JAVA&quot; title=&quot;安装JAVA&quot;&gt;&lt;/a&gt;安装JAVA&lt;/h2&gt;
&lt;p&gt;Archlinux ARM:&lt;/p&gt;
&lt;figure data-raw=&quot;$ sudo pacman -S jre8-openjdk
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ sudo pacman -S jre8-openjdk
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;通用方法：
前往 &lt;strong&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/cn/java/javase/downloads/jdk8-downloads-2133151-zhs.html&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;JAVA下载页&lt;/a&gt;&lt;/strong&gt; 下载树莓派（ARM架构，32位系统）所支持的JDK。&lt;/p&gt;
&lt;figure data-raw=&quot;$ mkdir ./java
$ tar -zxvf 你所下载的JDK.jar.gz -C ./java/
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ mkdir ./java
$ tar -zxvf 你所下载的JDK.jar.gz -C ./java/
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;在终端输入&lt;code&gt;./java/jdk1.8.0/bin/java -version&lt;/code&gt;显示java的版本号。&lt;/p&gt;
&lt;h2 id=&quot;部署服务器&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/raspberrypi-mc-server/#%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E5%99%A8&quot; title=&quot;部署服务器&quot;&gt;&lt;/a&gt;部署服务器&lt;/h2&gt;
&lt;p&gt;本篇使用&lt;a href=&quot;https://github.com/PaperMC/Paper&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer noopener&quot;&gt;Paper MC&lt;/a&gt;部署服务器。
除了Paper之外还有Bukkit和Spigot以及原版可选。&lt;/p&gt;
&lt;p&gt;使用以下命令启动服务器。&lt;/p&gt;
&lt;figure data-raw=&quot;$ echo eula=True &gt; eula.txt
$ ./java/jdk*/bin/java -Xms512M -Xmx1024M -jar ./spigot.jar
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ echo eula=True &amp;gt; eula.txt
$ ./java/jdk*/bin/java -Xms512M -Xmx1024M -jar ./spigot.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;第一次运行会下载一些文件需要一定的时间。&lt;/p&gt;
&lt;p&gt;网上有很多服务器插件和Mod什么的。本章中不做过多介绍.&lt;/p&gt;
&lt;h2 id=&quot;用screen保持服务器一直运行而不被关掉。&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/raspberrypi-mc-server/#%E7%94%A8screen%E4%BF%9D%E6%8C%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%80%E7%9B%B4%E8%BF%90%E8%A1%8C%E8%80%8C%E4%B8%8D%E8%A2%AB%E5%85%B3%E6%8E%89%E3%80%82&quot; title=&quot;用screen保持服务器一直运行而不被关掉。&quot;&gt;&lt;/a&gt;用screen 保持服务器一直运行而不被关掉。&lt;/h2&gt;
&lt;p&gt;首先安装好screen。&lt;/p&gt;
&lt;figure data-raw=&quot;$ screen
$ ./java/jdk1.8.0/bin/java -Xms512M -Xmx1024M -jar./paperclip.jar
&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;$ screen
$ ./java/jdk1.8.0/bin/java -Xms512M -Xmx1024M -jar./paperclip.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;p&gt;在配置好你的服务器后就可以和小伙伴一起联机了。经过测试几个人简单的联机运行蛮正常的。&lt;/p&gt;

    </content>
    
    
    <category term="Minecraft" label="Minecraft" scheme="https://blog.starry-s.moe/categories/Minecraft/" />
    
    
    <category term="Minecraft" label="Minecraft" scheme="https://blog.starry-s.moe/tags/Minecraft/" />
    
    <category term="树莓派" label="树莓派" scheme="https://blog.starry-s.moe/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" />
    
  </entry>
  
  
  
  <entry>
    <title>Everything is based on “Hello World”.</title>
    <link rel="alternate" type="text/html" href="https://blog.starry-s.moe/posts/hello-world/" />
    <id>https://blog.starry-s.moe/posts/hello-world/</id>
    
    <author>
      <name>STARRY-S</name>
      <email>hxstarrys@gmail.com</email>
    </author>
    
    
    <published>2016-08-22T06:22:54.000Z</published>
    
    
    <updated>2016-08-22T06:22:54.000Z</updated>
    
    
    <summary type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;&lt;img src=&quot;/posts/hello-world/images/image.jpg&quot; alt=&quot;&amp;quot;Hello World&amp;quot;&quot; title=&quot;Hello World&quot;&gt;&lt;/p&gt;
 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;時雨&quot;,
        artist: &quot;川嶋あい&quot;,
        url: &quot;https://music.starry-s.moe/music/obj_w5rDlsOJwrLDjj7CmsOj_4642548938_80e9_cee0_eb38_c8adceebab40a36bfc2685fdad037b14.mov&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/109951165427223375.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#aabbaa&quot;
    }]
});
&lt;/script&gt; 

&lt;p&gt;你好，世界！&lt;/p&gt;

    </summary>
    
    
    <content type="html">
      &lt;link href=&quot;/css/APlayer.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src= &quot;/js/APlayer.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;&lt;img src=&quot;/posts/hello-world/images/image.jpg&quot; alt=&quot;&amp;quot;Hello World&amp;quot;&quot; title=&quot;Hello World&quot;&gt;&lt;/p&gt;
 &lt;!--APlayer--&gt;
&lt;div id=&quot;aplayer0&quot; style=&quot;background: var(--color-main-background)&quot;&gt;&lt;/div&gt;
&lt;script&gt;
const ap0 = new APlayer ({
    container: document.getElementById(&quot;aplayer0&quot;),
    theme: &quot;#33363b&quot;,
    fixed: false,
    listFolded: false,
    listMaxHeight: false,
    lrcType: false,
    mini: false,
    volume: 0.7,
    order: &quot;list&quot;,
    loop: &quot;all&quot;,
    autoplay: false,
    audio: [{
        name: &quot;時雨&quot;,
        artist: &quot;川嶋あい&quot;,
        url: &quot;https://music.starry-s.moe/music/obj_w5rDlsOJwrLDjj7CmsOj_4642548938_80e9_cee0_eb38_c8adceebab40a36bfc2685fdad037b14.mov&quot;,
        cover: &quot;https://music.starry-s.moe/music/cover/109951165427223375.jpg&quot;,
        lrc: &quot;&quot;,
        theme: &quot;#aabbaa&quot;
    }]
});
&lt;/script&gt; 

&lt;p&gt;你好，世界！&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;hr&gt;
&lt;figure data-raw=&quot;#include &lt;stdio.h&gt;
int main(int argc, char *argv[])
{
    printf(&amp;quot;Hello World!\n&amp;quot;);
    return 0;
}
&quot; data-info=&quot;language-C&quot; data-lang=&quot;C&quot; class=&quot;code-block&quot;&gt;&lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;language-C&quot;&gt;#include &amp;lt;stdio.h&amp;gt;
int main(int argc, char *argv[])
{
    printf(&quot;Hello World!\n&quot;);
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;h2 id=&quot;STARRY-S039;Blog&quot;&gt;&lt;a class=&quot;header-link&quot; href=&quot;/posts/hello-world/#STARRY-S039;Blog&quot; title=&quot;STARRY-S039;Blog&quot;&gt;&lt;/a&gt;STARRY-S&#039; Blog&lt;/h2&gt;

    </content>
    
    
    <category term="Hello World" label="Hello World" scheme="https://blog.starry-s.moe/categories/Hello%20World/" />
    
    
    <category term="Hello World" label="Hello World" scheme="https://blog.starry-s.moe/tags/Hello%20World/" />
    
  </entry>
  
  
</feed>
